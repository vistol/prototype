(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function dm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hm={exports:{}},Go={},fm={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),$y=Symbol.for("react.portal"),Dy=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),zy=Symbol.for("react.profiler"),Fy=Symbol.for("react.provider"),Uy=Symbol.for("react.context"),qy=Symbol.for("react.forward_ref"),Vy=Symbol.for("react.suspense"),By=Symbol.for("react.memo"),Hy=Symbol.for("react.lazy"),gh=Symbol.iterator;function Wy(e){return e===null||typeof e!="object"?null:(e=gh&&e[gh]||e["@@iterator"],typeof e=="function"?e:null)}var pm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mm=Object.assign,gm={};function Ir(e,t,n){this.props=e,this.context=t,this.refs=gm,this.updater=n||pm}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ir.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xm(){}xm.prototype=Ir.prototype;function Uu(e,t,n){this.props=e,this.context=t,this.refs=gm,this.updater=n||pm}var qu=Uu.prototype=new xm;qu.constructor=Uu;mm(qu,Ir.prototype);qu.isPureReactComponent=!0;var xh=Array.isArray,ym=Object.prototype.hasOwnProperty,Vu={current:null},vm={key:!0,ref:!0,__self:!0,__source:!0};function bm(e,t,n){var s,r={},a=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)ym.call(t,s)&&!vm.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Za,type:e,key:a,ref:o,props:r,_owner:Vu.current}}function Gy(e,t){return{$$typeof:Za,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Za}function Ky(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yh=/\/+/g;function Nl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ky(""+e.key):t.toString(36)}function Bi(e,t,n,s,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Za:case $y:o=!0}}if(o)return o=e,r=r(o),e=s===""?"."+Nl(o,0):s,xh(r)?(n="",e!=null&&(n=e.replace(yh,"$&/")+"/"),Bi(r,t,n,"",function(u){return u})):r!=null&&(Bu(r)&&(r=Gy(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(yh,"$&/")+"/")+e)),t.push(r)),1;if(o=0,s=s===""?".":s+":",xh(e))for(var l=0;l<e.length;l++){a=e[l];var c=s+Nl(a,l);o+=Bi(a,t,n,c,r)}else if(c=Wy(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=s+Nl(a,l++),o+=Bi(a,t,n,c,r);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function pi(e,t,n){if(e==null)return e;var s=[],r=0;return Bi(e,s,"","",function(a){return t.call(n,a,r++)}),s}function Jy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},Hi={transition:null},Qy={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:Hi,ReactCurrentOwner:Vu};function wm(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:pi,forEach:function(e,t,n){pi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pi(e,function(){t++}),t},toArray:function(e){return pi(e,function(t){return t})||[]},only:function(e){if(!Bu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ie.Component=Ir;ie.Fragment=Dy;ie.Profiler=zy;ie.PureComponent=Uu;ie.StrictMode=My;ie.Suspense=Vy;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qy;ie.act=wm;ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=mm({},e.props),r=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Vu.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ym.call(t,c)&&!vm.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Za,type:e.type,key:r,ref:a,props:s,_owner:o}};ie.createContext=function(e){return e={$$typeof:Uy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Fy,_context:e},e.Consumer=e};ie.createElement=bm;ie.createFactory=function(e){var t=bm.bind(null,e);return t.type=e,t};ie.createRef=function(){return{current:null}};ie.forwardRef=function(e){return{$$typeof:qy,render:e}};ie.isValidElement=Bu;ie.lazy=function(e){return{$$typeof:Hy,_payload:{_status:-1,_result:e},_init:Jy}};ie.memo=function(e,t){return{$$typeof:By,type:e,compare:t===void 0?null:t}};ie.startTransition=function(e){var t=Hi.transition;Hi.transition={};try{e()}finally{Hi.transition=t}};ie.unstable_act=wm;ie.useCallback=function(e,t){return dt.current.useCallback(e,t)};ie.useContext=function(e){return dt.current.useContext(e)};ie.useDebugValue=function(){};ie.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};ie.useEffect=function(e,t){return dt.current.useEffect(e,t)};ie.useId=function(){return dt.current.useId()};ie.useImperativeHandle=function(e,t,n){return dt.current.useImperativeHandle(e,t,n)};ie.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};ie.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};ie.useMemo=function(e,t){return dt.current.useMemo(e,t)};ie.useReducer=function(e,t,n){return dt.current.useReducer(e,t,n)};ie.useRef=function(e){return dt.current.useRef(e)};ie.useState=function(e){return dt.current.useState(e)};ie.useSyncExternalStore=function(e,t,n){return dt.current.useSyncExternalStore(e,t,n)};ie.useTransition=function(){return dt.current.useTransition()};ie.version="18.3.1";fm.exports=ie;var k=fm.exports;const Ko=dm(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy=k,Xy=Symbol.for("react.element"),Zy=Symbol.for("react.fragment"),ev=Object.prototype.hasOwnProperty,tv=Yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nv={key:!0,ref:!0,__self:!0,__source:!0};function jm(e,t,n){var s,r={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)ev.call(t,s)&&!nv.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:Xy,type:e,key:a,ref:o,props:r,_owner:tv.current}}Go.Fragment=Zy;Go.jsx=jm;Go.jsxs=jm;hm.exports=Go;var i=hm.exports,wc={},Sm={exports:{}},Et={},Nm={exports:{}},km={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,F){var K=P.length;P.push(F);e:for(;0<K;){var U=K-1>>>1,Z=P[U];if(0<r(Z,F))P[U]=F,P[K]=Z,K=U;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var F=P[0],K=P.pop();if(K!==F){P[0]=K;e:for(var U=0,Z=P.length,Ie=Z>>>1;U<Ie;){var oe=2*(U+1)-1,Oe=P[oe],ke=oe+1,ft=P[ke];if(0>r(Oe,K))ke<Z&&0>r(ft,Oe)?(P[U]=ft,P[ke]=K,U=ke):(P[U]=Oe,P[oe]=K,U=oe);else if(ke<Z&&0>r(ft,K))P[U]=ft,P[ke]=K,U=ke;else break e}}return F}function r(P,F){var K=P.sortIndex-F.sortIndex;return K!==0?K:P.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var F=n(u);F!==null;){if(F.callback===null)s(u);else if(F.startTime<=P)s(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(u)}}function w(P){if(v=!1,y(P),!g)if(n(c)!==null)g=!0,G(N);else{var F=n(u);F!==null&&J(w,F.startTime-P)}}function N(P,F){g=!1,v&&(v=!1,x(S),S=-1),p=!0;var K=f;try{for(y(F),h=n(c);h!==null&&(!(h.expirationTime>F)||P&&!I());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var Z=U(h.expirationTime<=F);F=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&s(c),y(F)}else s(c);h=n(c)}if(h!==null)var Ie=!0;else{var oe=n(u);oe!==null&&J(w,oe.startTime-F),Ie=!1}return Ie}finally{h=null,f=K,p=!1}}var T=!1,E=null,S=-1,R=5,_=-1;function I(){return!(e.unstable_now()-_<R)}function L(){if(E!==null){var P=e.unstable_now();_=P;var F=!0;try{F=E(!0,P)}finally{F?M():(T=!1,E=null)}}else T=!1}var M;if(typeof m=="function")M=function(){m(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=L,M=function(){H.postMessage(null)}}else M=function(){b(L,0)};function G(P){E=P,T||(T=!0,M())}function J(P,F){S=b(function(){P(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,G(N))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var K=f;f=F;try{return P()}finally{f=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var K=f;f=P;try{return F()}finally{f=K}},e.unstable_scheduleCallback=function(P,F,K){var U=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?U+K:U):K=U,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=K+Z,P={id:d++,callback:F,priorityLevel:P,startTime:K,expirationTime:Z,sortIndex:-1},K>U?(P.sortIndex=K,t(u,P),n(c)===null&&P===n(u)&&(v?(x(S),S=-1):v=!0,J(w,K-U))):(P.sortIndex=Z,t(c,P),g||p||(g=!0,G(N))),P},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(P){var F=f;return function(){var K=f;f=F;try{return P.apply(this,arguments)}finally{f=K}}}})(km);Nm.exports=km;var sv=Nm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv=k,Tt=sv;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _m=new Set,wa={};function Es(e,t){Sr(e,t),Sr(e+"Capture",t)}function Sr(e,t){for(wa[e]=t,e=0;e<t.length;e++)_m.add(t[e])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=Object.prototype.hasOwnProperty,av=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vh={},bh={};function iv(e){return jc.call(bh,e)?!0:jc.call(vh,e)?!1:av.test(e)?bh[e]=!0:(vh[e]=!0,!1)}function ov(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lv(e,t,n,s){if(t===null||typeof t>"u"||ov(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ht(e,t,n,s,r,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tt[e]=new ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tt[t]=new ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tt[e]=new ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tt[e]=new ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tt[e]=new ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tt[e]=new ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tt[e]=new ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tt[e]=new ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tt[e]=new ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hu=/[\-:]([a-z])/g;function Wu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hu,Wu);tt[t]=new ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hu,Wu);tt[t]=new ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hu,Wu);tt[t]=new ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tt[e]=new ht(e,1,!1,e.toLowerCase(),null,!1,!1)});tt.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tt[e]=new ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gu(e,t,n,s){var r=tt.hasOwnProperty(t)?tt[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lv(t,n,r,s)&&(n=null),s||r===null?iv(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var wn=rv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mi=Symbol.for("react.element"),Ys=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),Sc=Symbol.for("react.profiler"),Pm=Symbol.for("react.provider"),Tm=Symbol.for("react.context"),Ju=Symbol.for("react.forward_ref"),Nc=Symbol.for("react.suspense"),kc=Symbol.for("react.suspense_list"),Qu=Symbol.for("react.memo"),_n=Symbol.for("react.lazy"),Cm=Symbol.for("react.offscreen"),wh=Symbol.iterator;function zr(e){return e===null||typeof e!="object"?null:(e=wh&&e[wh]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,kl;function Yr(e){if(kl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kl=t&&t[1]||""}return`
`+kl+e}var _l=!1;function Pl(e,t){if(!e||_l)return"";_l=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=s.stack.split(`
`),o=r.length-1,l=a.length-1;1<=o&&0<=l&&r[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==a[l]){var c=`
`+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{_l=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Yr(e):""}function cv(e){switch(e.tag){case 5:return Yr(e.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 2:case 15:return e=Pl(e.type,!1),e;case 11:return e=Pl(e.type.render,!1),e;case 1:return e=Pl(e.type,!0),e;default:return""}}function _c(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xs:return"Fragment";case Ys:return"Portal";case Sc:return"Profiler";case Ku:return"StrictMode";case Nc:return"Suspense";case kc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Tm:return(e.displayName||"Context")+".Consumer";case Pm:return(e._context.displayName||"Context")+".Provider";case Ju:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qu:return t=e.displayName||null,t!==null?t:_c(e.type)||"Memo";case _n:t=e._payload,e=e._init;try{return _c(e(t))}catch{}}return null}function uv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _c(t);case 8:return t===Ku?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Em(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dv(e){var t=Em(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gi(e){e._valueTracker||(e._valueTracker=dv(e))}function Am(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Em(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ao(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pc(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jh(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Hn(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rm(e,t){t=t.checked,t!=null&&Gu(e,"checked",t,!1)}function Tc(e,t){Rm(e,t);var n=Hn(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Cc(e,t.type,Hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Cc(e,t,n){(t!=="number"||ao(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Xr=Array.isArray;function mr(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Hn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Ec(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Xr(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Hn(n)}}function Im(e,t){var n=Hn(t.value),s=Hn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function kh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Om(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ac(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Om(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xi,Lm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xi=xi||document.createElement("div"),xi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ja(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hv=["Webkit","ms","Moz","O"];Object.keys(sa).forEach(function(e){hv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sa[t]=sa[e]})});function $m(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||sa.hasOwnProperty(e)&&sa[e]?(""+t).trim():t+"px"}function Dm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=$m(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var fv=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rc(e,t){if(t){if(fv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ic(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oc=null;function Yu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lc=null,gr=null,xr=null;function _h(e){if(e=ni(e)){if(typeof Lc!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Zo(t),Lc(e.stateNode,e.type,t))}}function Mm(e){gr?xr?xr.push(e):xr=[e]:gr=e}function zm(){if(gr){var e=gr,t=xr;if(xr=gr=null,_h(e),t)for(e=0;e<t.length;e++)_h(t[e])}}function Fm(e,t){return e(t)}function Um(){}var Tl=!1;function qm(e,t,n){if(Tl)return e(t,n);Tl=!0;try{return Fm(e,t,n)}finally{Tl=!1,(gr!==null||xr!==null)&&(Um(),zm())}}function Sa(e,t){var n=e.stateNode;if(n===null)return null;var s=Zo(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var $c=!1;if(gn)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){$c=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{$c=!1}function pv(e,t,n,s,r,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ra=!1,io=null,oo=!1,Dc=null,mv={onError:function(e){ra=!0,io=e}};function gv(e,t,n,s,r,a,o,l,c){ra=!1,io=null,pv.apply(mv,arguments)}function xv(e,t,n,s,r,a,o,l,c){if(gv.apply(this,arguments),ra){if(ra){var u=io;ra=!1,io=null}else throw Error(D(198));oo||(oo=!0,Dc=u)}}function As(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Vm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ph(e){if(As(e)!==e)throw Error(D(188))}function yv(e){var t=e.alternate;if(!t){if(t=As(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Ph(r),e;if(a===s)return Ph(r),t;a=a.sibling}throw Error(D(188))}if(n.return!==s.return)n=r,s=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=a;break}if(l===s){o=!0,s=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=r;break}if(l===s){o=!0,s=a,n=r;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==s)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Bm(e){return e=yv(e),e!==null?Hm(e):null}function Hm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Hm(e);if(t!==null)return t;e=e.sibling}return null}var Wm=Tt.unstable_scheduleCallback,Th=Tt.unstable_cancelCallback,vv=Tt.unstable_shouldYield,bv=Tt.unstable_requestPaint,Le=Tt.unstable_now,wv=Tt.unstable_getCurrentPriorityLevel,Xu=Tt.unstable_ImmediatePriority,Gm=Tt.unstable_UserBlockingPriority,lo=Tt.unstable_NormalPriority,jv=Tt.unstable_LowPriority,Km=Tt.unstable_IdlePriority,Jo=null,tn=null;function Sv(e){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Jo,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:_v,Nv=Math.log,kv=Math.LN2;function _v(e){return e>>>=0,e===0?32:31-(Nv(e)/kv|0)|0}var yi=64,vi=4194304;function Zr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function co(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?s=Zr(l):(a&=o,a!==0&&(s=Zr(a)))}else o=n&~r,o!==0?s=Zr(o):a!==0&&(s=Zr(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,a=t&-t,r>=a||r===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Kt(t),r=1<<n,s|=e[n],t&=~r;return s}function Pv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tv(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Kt(a),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=Pv(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Mc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jm(){var e=yi;return yi<<=1,!(yi&4194240)&&(yi=64),e}function Cl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ei(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=n}function Cv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Kt(n),a=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~a}}function Zu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Kt(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var fe=0;function Qm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ym,ed,Xm,Zm,eg,zc=!1,bi=[],Ln=null,$n=null,Dn=null,Na=new Map,ka=new Map,En=[],Ev="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ch(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Na.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(t.pointerId)}}function Ur(e,t,n,s,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[r]},t!==null&&(t=ni(t),t!==null&&ed(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Av(e,t,n,s,r){switch(t){case"focusin":return Ln=Ur(Ln,e,t,n,s,r),!0;case"dragenter":return $n=Ur($n,e,t,n,s,r),!0;case"mouseover":return Dn=Ur(Dn,e,t,n,s,r),!0;case"pointerover":var a=r.pointerId;return Na.set(a,Ur(Na.get(a)||null,e,t,n,s,r)),!0;case"gotpointercapture":return a=r.pointerId,ka.set(a,Ur(ka.get(a)||null,e,t,n,s,r)),!0}return!1}function tg(e){var t=gs(e.target);if(t!==null){var n=As(t);if(n!==null){if(t=n.tag,t===13){if(t=Vm(n),t!==null){e.blockedOn=t,eg(e.priority,function(){Xm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Oc=s,n.target.dispatchEvent(s),Oc=null}else return t=ni(n),t!==null&&ed(t),e.blockedOn=n,!1;t.shift()}return!0}function Eh(e,t,n){Wi(e)&&n.delete(t)}function Rv(){zc=!1,Ln!==null&&Wi(Ln)&&(Ln=null),$n!==null&&Wi($n)&&($n=null),Dn!==null&&Wi(Dn)&&(Dn=null),Na.forEach(Eh),ka.forEach(Eh)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,zc||(zc=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,Rv)))}function _a(e){function t(r){return qr(r,e)}if(0<bi.length){qr(bi[0],e);for(var n=1;n<bi.length;n++){var s=bi[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Ln!==null&&qr(Ln,e),$n!==null&&qr($n,e),Dn!==null&&qr(Dn,e),Na.forEach(t),ka.forEach(t),n=0;n<En.length;n++)s=En[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)tg(n),n.blockedOn===null&&En.shift()}var yr=wn.ReactCurrentBatchConfig,uo=!0;function Iv(e,t,n,s){var r=fe,a=yr.transition;yr.transition=null;try{fe=1,td(e,t,n,s)}finally{fe=r,yr.transition=a}}function Ov(e,t,n,s){var r=fe,a=yr.transition;yr.transition=null;try{fe=4,td(e,t,n,s)}finally{fe=r,yr.transition=a}}function td(e,t,n,s){if(uo){var r=Fc(e,t,n,s);if(r===null)zl(e,t,s,ho,n),Ch(e,s);else if(Av(r,e,t,n,s))s.stopPropagation();else if(Ch(e,s),t&4&&-1<Ev.indexOf(e)){for(;r!==null;){var a=ni(r);if(a!==null&&Ym(a),a=Fc(e,t,n,s),a===null&&zl(e,t,s,ho,n),a===r)break;r=a}r!==null&&s.stopPropagation()}else zl(e,t,s,null,n)}}var ho=null;function Fc(e,t,n,s){if(ho=null,e=Yu(s),e=gs(e),e!==null)if(t=As(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Vm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ho=e,null}function ng(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wv()){case Xu:return 1;case Gm:return 4;case lo:case jv:return 16;case Km:return 536870912;default:return 16}default:return 16}}var In=null,nd=null,Gi=null;function sg(){if(Gi)return Gi;var e,t=nd,n=t.length,s,r="value"in In?In.value:In.textContent,a=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===r[a-s];s++);return Gi=r.slice(e,1<s?1-s:void 0)}function Ki(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wi(){return!0}function Ah(){return!1}function At(e){function t(n,s,r,a,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?wi:Ah,this.isPropagationStopped=Ah,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),t}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sd=At(Or),ti=Ce({},Or,{view:0,detail:0}),Lv=At(ti),El,Al,Vr,Qo=Ce({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vr&&(Vr&&e.type==="mousemove"?(El=e.screenX-Vr.screenX,Al=e.screenY-Vr.screenY):Al=El=0,Vr=e),El)},movementY:function(e){return"movementY"in e?e.movementY:Al}}),Rh=At(Qo),$v=Ce({},Qo,{dataTransfer:0}),Dv=At($v),Mv=Ce({},ti,{relatedTarget:0}),Rl=At(Mv),zv=Ce({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=At(zv),Uv=Ce({},Or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qv=At(Uv),Vv=Ce({},Or,{data:0}),Ih=At(Vv),Bv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wv[e])?!!t[e]:!1}function rd(){return Gv}var Kv=Ce({},ti,{key:function(e){if(e.key){var t=Bv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ki(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rd,charCode:function(e){return e.type==="keypress"?Ki(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ki(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jv=At(Kv),Qv=Ce({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oh=At(Qv),Yv=Ce({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rd}),Xv=At(Yv),Zv=Ce({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),eb=At(Zv),tb=Ce({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nb=At(tb),sb=[9,13,27,32],ad=gn&&"CompositionEvent"in window,aa=null;gn&&"documentMode"in document&&(aa=document.documentMode);var rb=gn&&"TextEvent"in window&&!aa,rg=gn&&(!ad||aa&&8<aa&&11>=aa),Lh=" ",$h=!1;function ag(e,t){switch(e){case"keyup":return sb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ig(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zs=!1;function ab(e,t){switch(e){case"compositionend":return ig(t);case"keypress":return t.which!==32?null:($h=!0,Lh);case"textInput":return e=t.data,e===Lh&&$h?null:e;default:return null}}function ib(e,t){if(Zs)return e==="compositionend"||!ad&&ag(e,t)?(e=sg(),Gi=nd=In=null,Zs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rg&&t.locale!=="ko"?null:t.data;default:return null}}var ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ob[e.type]:t==="textarea"}function og(e,t,n,s){Mm(s),t=fo(t,"onChange"),0<t.length&&(n=new sd("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var ia=null,Pa=null;function lb(e){yg(e,0)}function Yo(e){var t=nr(e);if(Am(t))return e}function cb(e,t){if(e==="change")return t}var lg=!1;if(gn){var Il;if(gn){var Ol="oninput"in document;if(!Ol){var Mh=document.createElement("div");Mh.setAttribute("oninput","return;"),Ol=typeof Mh.oninput=="function"}Il=Ol}else Il=!1;lg=Il&&(!document.documentMode||9<document.documentMode)}function zh(){ia&&(ia.detachEvent("onpropertychange",cg),Pa=ia=null)}function cg(e){if(e.propertyName==="value"&&Yo(Pa)){var t=[];og(t,Pa,e,Yu(e)),qm(lb,t)}}function ub(e,t,n){e==="focusin"?(zh(),ia=t,Pa=n,ia.attachEvent("onpropertychange",cg)):e==="focusout"&&zh()}function db(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yo(Pa)}function hb(e,t){if(e==="click")return Yo(t)}function fb(e,t){if(e==="input"||e==="change")return Yo(t)}function pb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:pb;function Ta(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!jc.call(t,r)||!Qt(e[r],t[r]))return!1}return!0}function Fh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uh(e,t){var n=Fh(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fh(n)}}function ug(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ug(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dg(){for(var e=window,t=ao();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ao(e.document)}return t}function id(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mb(e){var t=dg(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ug(n.ownerDocument.documentElement,n)){if(s!==null&&id(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(s.start,r);s=s.end===void 0?a:Math.min(s.end,r),!e.extend&&a>s&&(r=s,s=a,a=r),r=Uh(n,a);var o=Uh(n,s);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gb=gn&&"documentMode"in document&&11>=document.documentMode,er=null,Uc=null,oa=null,qc=!1;function qh(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qc||er==null||er!==ao(s)||(s=er,"selectionStart"in s&&id(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),oa&&Ta(oa,s)||(oa=s,s=fo(Uc,"onSelect"),0<s.length&&(t=new sd("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=er)))}function ji(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tr={animationend:ji("Animation","AnimationEnd"),animationiteration:ji("Animation","AnimationIteration"),animationstart:ji("Animation","AnimationStart"),transitionend:ji("Transition","TransitionEnd")},Ll={},hg={};gn&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function Xo(e){if(Ll[e])return Ll[e];if(!tr[e])return e;var t=tr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hg)return Ll[e]=t[n];return e}var fg=Xo("animationend"),pg=Xo("animationiteration"),mg=Xo("animationstart"),gg=Xo("transitionend"),xg=new Map,Vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(e,t){xg.set(e,t),Es(t,[e])}for(var $l=0;$l<Vh.length;$l++){var Dl=Vh[$l],xb=Dl.toLowerCase(),yb=Dl[0].toUpperCase()+Dl.slice(1);Zn(xb,"on"+yb)}Zn(fg,"onAnimationEnd");Zn(pg,"onAnimationIteration");Zn(mg,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(gg,"onTransitionEnd");Sr("onMouseEnter",["mouseout","mouseover"]);Sr("onMouseLeave",["mouseout","mouseover"]);Sr("onPointerEnter",["pointerout","pointerover"]);Sr("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Bh(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,xv(s,t,void 0,e),e.currentTarget=null}function yg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&r.isPropagationStopped())break e;Bh(r,l,u),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&r.isPropagationStopped())break e;Bh(r,l,u),a=c}}}if(oo)throw e=Dc,oo=!1,Dc=null,e}function we(e,t){var n=t[Gc];n===void 0&&(n=t[Gc]=new Set);var s=e+"__bubble";n.has(s)||(vg(t,e,2,!1),n.add(s))}function Ml(e,t,n){var s=0;t&&(s|=4),vg(n,e,s,t)}var Si="_reactListening"+Math.random().toString(36).slice(2);function Ca(e){if(!e[Si]){e[Si]=!0,_m.forEach(function(n){n!=="selectionchange"&&(vb.has(n)||Ml(n,!1,e),Ml(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Si]||(t[Si]=!0,Ml("selectionchange",!1,t))}}function vg(e,t,n,s){switch(ng(t)){case 1:var r=Iv;break;case 4:r=Ov;break;default:r=td}n=r.bind(null,t,n,e),r=void 0,!$c||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function zl(e,t,n,s,r){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=gs(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}qm(function(){var u=a,d=Yu(n),h=[];e:{var f=xg.get(e);if(f!==void 0){var p=sd,g=e;switch(e){case"keypress":if(Ki(n)===0)break e;case"keydown":case"keyup":p=Jv;break;case"focusin":g="focus",p=Rl;break;case"focusout":g="blur",p=Rl;break;case"beforeblur":case"afterblur":p=Rl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Dv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Xv;break;case fg:case pg:case mg:p=Fv;break;case gg:p=eb;break;case"scroll":p=Lv;break;case"wheel":p=nb;break;case"copy":case"cut":case"paste":p=qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Oh}var v=(t&4)!==0,b=!v&&e==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var m=u,y;m!==null;){y=m;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,x!==null&&(w=Sa(m,x),w!=null&&v.push(Ea(m,w,y)))),b)break;m=m.return}0<v.length&&(f=new p(f,g,null,n,d),h.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Oc&&(g=n.relatedTarget||n.fromElement)&&(gs(g)||g[xn]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?gs(g):null,g!==null&&(b=As(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=Rh,w="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(v=Oh,w="onPointerLeave",x="onPointerEnter",m="pointer"),b=p==null?f:nr(p),y=g==null?f:nr(g),f=new v(w,m+"leave",p,n,d),f.target=b,f.relatedTarget=y,w=null,gs(d)===u&&(v=new v(x,m+"enter",g,n,d),v.target=y,v.relatedTarget=b,w=v),b=w,p&&g)t:{for(v=p,x=g,m=0,y=v;y;y=Us(y))m++;for(y=0,w=x;w;w=Us(w))y++;for(;0<m-y;)v=Us(v),m--;for(;0<y-m;)x=Us(x),y--;for(;m--;){if(v===x||x!==null&&v===x.alternate)break t;v=Us(v),x=Us(x)}v=null}else v=null;p!==null&&Hh(h,f,p,v,!1),g!==null&&b!==null&&Hh(h,b,g,v,!0)}}e:{if(f=u?nr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=cb;else if(Dh(f))if(lg)N=fb;else{N=db;var T=ub}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=hb);if(N&&(N=N(e,u))){og(h,N,n,d);break e}T&&T(e,f,u),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Cc(f,"number",f.value)}switch(T=u?nr(u):window,e){case"focusin":(Dh(T)||T.contentEditable==="true")&&(er=T,Uc=u,oa=null);break;case"focusout":oa=Uc=er=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,qh(h,n,d);break;case"selectionchange":if(gb)break;case"keydown":case"keyup":qh(h,n,d)}var E;if(ad)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Zs?ag(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(rg&&n.locale!=="ko"&&(Zs||S!=="onCompositionStart"?S==="onCompositionEnd"&&Zs&&(E=sg()):(In=d,nd="value"in In?In.value:In.textContent,Zs=!0)),T=fo(u,S),0<T.length&&(S=new Ih(S,e,null,n,d),h.push({event:S,listeners:T}),E?S.data=E:(E=ig(n),E!==null&&(S.data=E)))),(E=rb?ab(e,n):ib(e,n))&&(u=fo(u,"onBeforeInput"),0<u.length&&(d=new Ih("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}yg(h,t)})}function Ea(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fo(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=Sa(e,n),a!=null&&s.unshift(Ea(e,a,r)),a=Sa(e,t),a!=null&&s.push(Ea(e,a,r))),e=e.return}return s}function Us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hh(e,t,n,s,r){for(var a=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Sa(n,a),c!=null&&o.unshift(Ea(n,c,l))):r||(c=Sa(n,a),c!=null&&o.push(Ea(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var bb=/\r\n?/g,wb=/\u0000|\uFFFD/g;function Wh(e){return(typeof e=="string"?e:""+e).replace(bb,`
`).replace(wb,"")}function Ni(e,t,n){if(t=Wh(t),Wh(e)!==t&&n)throw Error(D(425))}function po(){}var Vc=null,Bc=null;function Hc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wc=typeof setTimeout=="function"?setTimeout:void 0,jb=typeof clearTimeout=="function"?clearTimeout:void 0,Gh=typeof Promise=="function"?Promise:void 0,Sb=typeof queueMicrotask=="function"?queueMicrotask:typeof Gh<"u"?function(e){return Gh.resolve(null).then(e).catch(Nb)}:Wc;function Nb(e){setTimeout(function(){throw e})}function Fl(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),_a(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);_a(t)}function Mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Lr=Math.random().toString(36).slice(2),en="__reactFiber$"+Lr,Aa="__reactProps$"+Lr,xn="__reactContainer$"+Lr,Gc="__reactEvents$"+Lr,kb="__reactListeners$"+Lr,_b="__reactHandles$"+Lr;function gs(e){var t=e[en];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[en]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Kh(e);e!==null;){if(n=e[en])return n;e=Kh(e)}return t}e=n,n=e.parentNode}return null}function ni(e){return e=e[en]||e[xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Zo(e){return e[Aa]||null}var Kc=[],sr=-1;function es(e){return{current:e}}function je(e){0>sr||(e.current=Kc[sr],Kc[sr]=null,sr--)}function xe(e,t){sr++,Kc[sr]=e.current,e.current=t}var Wn={},it=es(Wn),yt=es(!1),Ns=Wn;function Nr(e,t){var n=e.type.contextTypes;if(!n)return Wn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function vt(e){return e=e.childContextTypes,e!=null}function mo(){je(yt),je(it)}function Jh(e,t,n){if(it.current!==Wn)throw Error(D(168));xe(it,t),xe(yt,n)}function bg(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(D(108,uv(e)||"Unknown",r));return Ce({},n,s)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,Ns=it.current,xe(it,e),xe(yt,yt.current),!0}function Qh(e,t,n){var s=e.stateNode;if(!s)throw Error(D(169));n?(e=bg(e,t,Ns),s.__reactInternalMemoizedMergedChildContext=e,je(yt),je(it),xe(it,e)):je(yt),xe(yt,n)}var ln=null,el=!1,Ul=!1;function wg(e){ln===null?ln=[e]:ln.push(e)}function Pb(e){el=!0,wg(e)}function ts(){if(!Ul&&ln!==null){Ul=!0;var e=0,t=fe;try{var n=ln;for(fe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}ln=null,el=!1}catch(r){throw ln!==null&&(ln=ln.slice(e+1)),Wm(Xu,ts),r}finally{fe=t,Ul=!1}}return null}var rr=[],ar=0,xo=null,yo=0,$t=[],Dt=0,ks=null,un=1,dn="";function ls(e,t){rr[ar++]=yo,rr[ar++]=xo,xo=e,yo=t}function jg(e,t,n){$t[Dt++]=un,$t[Dt++]=dn,$t[Dt++]=ks,ks=e;var s=un;e=dn;var r=32-Kt(s)-1;s&=~(1<<r),n+=1;var a=32-Kt(t)+r;if(30<a){var o=r-r%5;a=(s&(1<<o)-1).toString(32),s>>=o,r-=o,un=1<<32-Kt(t)+r|n<<r|s,dn=a+e}else un=1<<a|n<<r|s,dn=e}function od(e){e.return!==null&&(ls(e,1),jg(e,1,0))}function ld(e){for(;e===xo;)xo=rr[--ar],rr[ar]=null,yo=rr[--ar],rr[ar]=null;for(;e===ks;)ks=$t[--Dt],$t[Dt]=null,dn=$t[--Dt],$t[Dt]=null,un=$t[--Dt],$t[Dt]=null}var _t=null,kt=null,Ne=!1,Gt=null;function Sg(e,t){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,kt=Mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,kt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ks!==null?{id:un,overflow:dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,_t=e,kt=null,!0):!1;default:return!1}}function Jc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qc(e){if(Ne){var t=kt;if(t){var n=t;if(!Yh(e,t)){if(Jc(e))throw Error(D(418));t=Mn(n.nextSibling);var s=_t;t&&Yh(e,t)?Sg(s,n):(e.flags=e.flags&-4097|2,Ne=!1,_t=e)}}else{if(Jc(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ne=!1,_t=e}}}function Xh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function ki(e){if(e!==_t)return!1;if(!Ne)return Xh(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hc(e.type,e.memoizedProps)),t&&(t=kt)){if(Jc(e))throw Ng(),Error(D(418));for(;t;)Sg(e,t),t=Mn(t.nextSibling)}if(Xh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kt=Mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kt=null}}else kt=_t?Mn(e.stateNode.nextSibling):null;return!0}function Ng(){for(var e=kt;e;)e=Mn(e.nextSibling)}function kr(){kt=_t=null,Ne=!1}function cd(e){Gt===null?Gt=[e]:Gt.push(e)}var Tb=wn.ReactCurrentBatchConfig;function Br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var s=n.stateNode}if(!s)throw Error(D(147,e));var r=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=r.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function _i(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zh(e){var t=e._init;return t(e._payload)}function kg(e){function t(x,m){if(e){var y=x.deletions;y===null?(x.deletions=[m],x.flags|=16):y.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function s(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function r(x,m){return x=qn(x,m),x.index=0,x.sibling=null,x}function a(x,m,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<m?(x.flags|=2,m):y):(x.flags|=2,m)):(x.flags|=1048576,m)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,m,y,w){return m===null||m.tag!==6?(m=Kl(y,x.mode,w),m.return=x,m):(m=r(m,y),m.return=x,m)}function c(x,m,y,w){var N=y.type;return N===Xs?d(x,m,y.props.children,w,y.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===_n&&Zh(N)===m.type)?(w=r(m,y.props),w.ref=Br(x,m,y),w.return=x,w):(w=to(y.type,y.key,y.props,null,x.mode,w),w.ref=Br(x,m,y),w.return=x,w)}function u(x,m,y,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Jl(y,x.mode,w),m.return=x,m):(m=r(m,y.children||[]),m.return=x,m)}function d(x,m,y,w,N){return m===null||m.tag!==7?(m=js(y,x.mode,w,N),m.return=x,m):(m=r(m,y),m.return=x,m)}function h(x,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Kl(""+m,x.mode,y),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case mi:return y=to(m.type,m.key,m.props,null,x.mode,y),y.ref=Br(x,null,m),y.return=x,y;case Ys:return m=Jl(m,x.mode,y),m.return=x,m;case _n:var w=m._init;return h(x,w(m._payload),y)}if(Xr(m)||zr(m))return m=js(m,x.mode,y,null),m.return=x,m;_i(x,m)}return null}function f(x,m,y,w){var N=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(x,m,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mi:return y.key===N?c(x,m,y,w):null;case Ys:return y.key===N?u(x,m,y,w):null;case _n:return N=y._init,f(x,m,N(y._payload),w)}if(Xr(y)||zr(y))return N!==null?null:d(x,m,y,w,null);_i(x,y)}return null}function p(x,m,y,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(y)||null,l(m,x,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mi:return x=x.get(w.key===null?y:w.key)||null,c(m,x,w,N);case Ys:return x=x.get(w.key===null?y:w.key)||null,u(m,x,w,N);case _n:var T=w._init;return p(x,m,y,T(w._payload),N)}if(Xr(w)||zr(w))return x=x.get(y)||null,d(m,x,w,N,null);_i(m,w)}return null}function g(x,m,y,w){for(var N=null,T=null,E=m,S=m=0,R=null;E!==null&&S<y.length;S++){E.index>S?(R=E,E=null):R=E.sibling;var _=f(x,E,y[S],w);if(_===null){E===null&&(E=R);break}e&&E&&_.alternate===null&&t(x,E),m=a(_,m,S),T===null?N=_:T.sibling=_,T=_,E=R}if(S===y.length)return n(x,E),Ne&&ls(x,S),N;if(E===null){for(;S<y.length;S++)E=h(x,y[S],w),E!==null&&(m=a(E,m,S),T===null?N=E:T.sibling=E,T=E);return Ne&&ls(x,S),N}for(E=s(x,E);S<y.length;S++)R=p(E,x,S,y[S],w),R!==null&&(e&&R.alternate!==null&&E.delete(R.key===null?S:R.key),m=a(R,m,S),T===null?N=R:T.sibling=R,T=R);return e&&E.forEach(function(I){return t(x,I)}),Ne&&ls(x,S),N}function v(x,m,y,w){var N=zr(y);if(typeof N!="function")throw Error(D(150));if(y=N.call(y),y==null)throw Error(D(151));for(var T=N=null,E=m,S=m=0,R=null,_=y.next();E!==null&&!_.done;S++,_=y.next()){E.index>S?(R=E,E=null):R=E.sibling;var I=f(x,E,_.value,w);if(I===null){E===null&&(E=R);break}e&&E&&I.alternate===null&&t(x,E),m=a(I,m,S),T===null?N=I:T.sibling=I,T=I,E=R}if(_.done)return n(x,E),Ne&&ls(x,S),N;if(E===null){for(;!_.done;S++,_=y.next())_=h(x,_.value,w),_!==null&&(m=a(_,m,S),T===null?N=_:T.sibling=_,T=_);return Ne&&ls(x,S),N}for(E=s(x,E);!_.done;S++,_=y.next())_=p(E,x,S,_.value,w),_!==null&&(e&&_.alternate!==null&&E.delete(_.key===null?S:_.key),m=a(_,m,S),T===null?N=_:T.sibling=_,T=_);return e&&E.forEach(function(L){return t(x,L)}),Ne&&ls(x,S),N}function b(x,m,y,w){if(typeof y=="object"&&y!==null&&y.type===Xs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mi:e:{for(var N=y.key,T=m;T!==null;){if(T.key===N){if(N=y.type,N===Xs){if(T.tag===7){n(x,T.sibling),m=r(T,y.props.children),m.return=x,x=m;break e}}else if(T.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===_n&&Zh(N)===T.type){n(x,T.sibling),m=r(T,y.props),m.ref=Br(x,T,y),m.return=x,x=m;break e}n(x,T);break}else t(x,T);T=T.sibling}y.type===Xs?(m=js(y.props.children,x.mode,w,y.key),m.return=x,x=m):(w=to(y.type,y.key,y.props,null,x.mode,w),w.ref=Br(x,m,y),w.return=x,x=w)}return o(x);case Ys:e:{for(T=y.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(x,m.sibling),m=r(m,y.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=Jl(y,x.mode,w),m.return=x,x=m}return o(x);case _n:return T=y._init,b(x,m,T(y._payload),w)}if(Xr(y))return g(x,m,y,w);if(zr(y))return v(x,m,y,w);_i(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(x,m.sibling),m=r(m,y),m.return=x,x=m):(n(x,m),m=Kl(y,x.mode,w),m.return=x,x=m),o(x)):n(x,m)}return b}var _r=kg(!0),_g=kg(!1),vo=es(null),bo=null,ir=null,ud=null;function dd(){ud=ir=bo=null}function hd(e){var t=vo.current;je(vo),e._currentValue=t}function Yc(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function vr(e,t){bo=e,ud=ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xt=!0),e.firstContext=null)}function Ft(e){var t=e._currentValue;if(ud!==e)if(e={context:e,memoizedValue:t,next:null},ir===null){if(bo===null)throw Error(D(308));ir=e,bo.dependencies={lanes:0,firstContext:e}}else ir=ir.next=e;return t}var xs=null;function fd(e){xs===null?xs=[e]:xs.push(e)}function Pg(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,fd(t)):(n.next=r.next,r.next=n),t.interleaved=n,yn(e,s)}function yn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pn=!1;function pd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ue&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,yn(e,n)}return r=s.interleaved,r===null?(t.next=t,fd(s)):(t.next=r.next,r.next=t),s.interleaved=t,yn(e,n)}function Ji(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Zu(e,n)}}function ef(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?r=a=t:a=a.next=t}else r=a=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function wo(e,t,n,s){var r=e.updateQueue;Pn=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=r.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,p=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(f=t,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Ce({},h,f);break e;case 2:Pn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else a===null&&(r.shared.lanes=0);Ps|=o,e.lanes=o,e.memoizedState=h}}function tf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(D(191,r));r.call(s)}}}var si={},nn=es(si),Ra=es(si),Ia=es(si);function ys(e){if(e===si)throw Error(D(174));return e}function md(e,t){switch(xe(Ia,t),xe(Ra,e),xe(nn,si),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ac(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ac(t,e)}je(nn),xe(nn,t)}function Pr(){je(nn),je(Ra),je(Ia)}function Cg(e){ys(Ia.current);var t=ys(nn.current),n=Ac(t,e.type);t!==n&&(xe(Ra,e),xe(nn,n))}function gd(e){Ra.current===e&&(je(nn),je(Ra))}var _e=es(0);function jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ql=[];function xd(){for(var e=0;e<ql.length;e++)ql[e]._workInProgressVersionPrimary=null;ql.length=0}var Qi=wn.ReactCurrentDispatcher,Vl=wn.ReactCurrentBatchConfig,_s=0,Te=null,Ve=null,Ke=null,So=!1,la=!1,Oa=0,Cb=0;function nt(){throw Error(D(321))}function yd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qt(e[n],t[n]))return!1;return!0}function vd(e,t,n,s,r,a){if(_s=a,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qi.current=e===null||e.memoizedState===null?Ib:Ob,e=n(s,r),la){a=0;do{if(la=!1,Oa=0,25<=a)throw Error(D(301));a+=1,Ke=Ve=null,t.updateQueue=null,Qi.current=Lb,e=n(s,r)}while(la)}if(Qi.current=No,t=Ve!==null&&Ve.next!==null,_s=0,Ke=Ve=Te=null,So=!1,t)throw Error(D(300));return e}function bd(){var e=Oa!==0;return Oa=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Te.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Ut(){if(Ve===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Ke===null?Te.memoizedState:Ke.next;if(t!==null)Ke=t,Ve=e;else{if(e===null)throw Error(D(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ke===null?Te.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function La(e,t){return typeof t=="function"?t(e):t}function Bl(e){var t=Ut(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var s=Ve,r=s.baseQueue,a=n.pending;if(a!==null){if(r!==null){var o=r.next;r.next=a.next,a.next=o}s.baseQueue=r=a,n.pending=null}if(r!==null){a=r.next,s=s.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((_s&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Te.lanes|=d,Ps|=d}u=u.next}while(u!==null&&u!==a);c===null?o=s:c.next=l,Qt(s,t.memoizedState)||(xt=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do a=r.lane,Te.lanes|=a,Ps|=a,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Hl(e){var t=Ut(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,a=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do a=e(a,o.action),o=o.next;while(o!==r);Qt(a,t.memoizedState)||(xt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function Eg(){}function Ag(e,t){var n=Te,s=Ut(),r=t(),a=!Qt(s.memoizedState,r);if(a&&(s.memoizedState=r,xt=!0),s=s.queue,wd(Og.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,$a(9,Ig.bind(null,n,s,r,t),void 0,null),Je===null)throw Error(D(349));_s&30||Rg(n,t,r)}return r}function Rg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ig(e,t,n,s){t.value=n,t.getSnapshot=s,Lg(t)&&$g(e)}function Og(e,t,n){return n(function(){Lg(t)&&$g(e)})}function Lg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qt(e,n)}catch{return!0}}function $g(e){var t=yn(e,1);t!==null&&Jt(t,e,1,-1)}function nf(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:e},t.queue=e,e=e.dispatch=Rb.bind(null,Te,e),[t.memoizedState,e]}function $a(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Dg(){return Ut().memoizedState}function Yi(e,t,n,s){var r=Zt();Te.flags|=e,r.memoizedState=$a(1|t,n,void 0,s===void 0?null:s)}function tl(e,t,n,s){var r=Ut();s=s===void 0?null:s;var a=void 0;if(Ve!==null){var o=Ve.memoizedState;if(a=o.destroy,s!==null&&yd(s,o.deps)){r.memoizedState=$a(t,n,a,s);return}}Te.flags|=e,r.memoizedState=$a(1|t,n,a,s)}function sf(e,t){return Yi(8390656,8,e,t)}function wd(e,t){return tl(2048,8,e,t)}function Mg(e,t){return tl(4,2,e,t)}function zg(e,t){return tl(4,4,e,t)}function Fg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ug(e,t,n){return n=n!=null?n.concat([e]):null,tl(4,4,Fg.bind(null,t,e),n)}function jd(){}function qg(e,t){var n=Ut();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&yd(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Vg(e,t){var n=Ut();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&yd(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Bg(e,t,n){return _s&21?(Qt(n,t)||(n=Jm(),Te.lanes|=n,Ps|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=n)}function Eb(e,t){var n=fe;fe=n!==0&&4>n?n:4,e(!0);var s=Vl.transition;Vl.transition={};try{e(!1),t()}finally{fe=n,Vl.transition=s}}function Hg(){return Ut().memoizedState}function Ab(e,t,n){var s=Un(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Wg(e))Gg(t,n);else if(n=Pg(e,t,n,s),n!==null){var r=ut();Jt(n,e,s,r),Kg(n,t,s)}}function Rb(e,t,n){var s=Un(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wg(e))Gg(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(r.hasEagerState=!0,r.eagerState=l,Qt(l,o)){var c=t.interleaved;c===null?(r.next=r,fd(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Pg(e,t,r,s),n!==null&&(r=ut(),Jt(n,e,s,r),Kg(n,t,s))}}function Wg(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function Gg(e,t){la=So=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kg(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Zu(e,n)}}var No={readContext:Ft,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Ib={readContext:Ft,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:sf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Yi(4194308,4,Fg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yi(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Zt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Ab.bind(null,Te,e),[s.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:nf,useDebugValue:jd,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=nf(!1),t=e[0];return e=Eb.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Te,r=Zt();if(Ne){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Je===null)throw Error(D(349));_s&30||Rg(s,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,sf(Og.bind(null,s,a,e),[e]),s.flags|=2048,$a(9,Ig.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=Zt(),t=Je.identifierPrefix;if(Ne){var n=dn,s=un;n=(s&~(1<<32-Kt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Oa++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Cb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ob={readContext:Ft,useCallback:qg,useContext:Ft,useEffect:wd,useImperativeHandle:Ug,useInsertionEffect:Mg,useLayoutEffect:zg,useMemo:Vg,useReducer:Bl,useRef:Dg,useState:function(){return Bl(La)},useDebugValue:jd,useDeferredValue:function(e){var t=Ut();return Bg(t,Ve.memoizedState,e)},useTransition:function(){var e=Bl(La)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Eg,useSyncExternalStore:Ag,useId:Hg,unstable_isNewReconciler:!1},Lb={readContext:Ft,useCallback:qg,useContext:Ft,useEffect:wd,useImperativeHandle:Ug,useInsertionEffect:Mg,useLayoutEffect:zg,useMemo:Vg,useReducer:Hl,useRef:Dg,useState:function(){return Hl(La)},useDebugValue:jd,useDeferredValue:function(e){var t=Ut();return Ve===null?t.memoizedState=e:Bg(t,Ve.memoizedState,e)},useTransition:function(){var e=Hl(La)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Eg,useSyncExternalStore:Ag,useId:Hg,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xc(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var nl={isMounted:function(e){return(e=e._reactInternals)?As(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ut(),r=Un(e),a=fn(s,r);a.payload=t,n!=null&&(a.callback=n),t=zn(e,a,r),t!==null&&(Jt(t,e,r,s),Ji(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ut(),r=Un(e),a=fn(s,r);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=zn(e,a,r),t!==null&&(Jt(t,e,r,s),Ji(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),s=Un(e),r=fn(n,s);r.tag=2,t!=null&&(r.callback=t),t=zn(e,r,s),t!==null&&(Jt(t,e,s,n),Ji(t,e,s))}};function rf(e,t,n,s,r,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,o):t.prototype&&t.prototype.isPureReactComponent?!Ta(n,s)||!Ta(r,a):!0}function Jg(e,t,n){var s=!1,r=Wn,a=t.contextType;return typeof a=="object"&&a!==null?a=Ft(a):(r=vt(t)?Ns:it.current,s=t.contextTypes,a=(s=s!=null)?Nr(e,r):Wn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function af(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function Zc(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},pd(e);var a=t.contextType;typeof a=="object"&&a!==null?r.context=Ft(a):(a=vt(t)?Ns:it.current,r.context=Nr(e,a)),r.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Xc(e,t,a,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&nl.enqueueReplaceState(r,r.state,null),wo(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Tr(e,t){try{var n="",s=t;do n+=cv(s),s=s.return;while(s);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:r,digest:null}}function Wl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var $b=typeof WeakMap=="function"?WeakMap:Map;function Qg(e,t,n){n=fn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){_o||(_o=!0,uu=s),eu(e,t)},n}function Yg(e,t,n){n=fn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){eu(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){eu(e,t),typeof s!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function of(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new $b;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=Qb.bind(null,e,t,n),t.then(e,e))}function lf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cf(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fn(-1,1),t.tag=2,zn(n,t,1))),n.lanes|=1),e)}var Db=wn.ReactCurrentOwner,xt=!1;function ct(e,t,n,s){t.child=e===null?_g(t,null,n,s):_r(t,e.child,n,s)}function uf(e,t,n,s,r){n=n.render;var a=t.ref;return vr(t,r),s=vd(e,t,n,s,a,r),n=bd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,vn(e,t,r)):(Ne&&n&&od(t),t.flags|=1,ct(e,t,s,r),t.child)}function df(e,t,n,s,r){if(e===null){var a=n.type;return typeof a=="function"&&!Ed(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Xg(e,t,a,s,r)):(e=to(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&r)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,s)&&e.ref===t.ref)return vn(e,t,r)}return t.flags|=1,e=qn(a,s),e.ref=t.ref,e.return=t,t.child=e}function Xg(e,t,n,s,r){if(e!==null){var a=e.memoizedProps;if(Ta(a,s)&&e.ref===t.ref)if(xt=!1,t.pendingProps=s=a,(e.lanes&r)!==0)e.flags&131072&&(xt=!0);else return t.lanes=e.lanes,vn(e,t,r)}return tu(e,t,n,s,r)}function Zg(e,t,n){var s=t.pendingProps,r=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(lr,Nt),Nt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(lr,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,xe(lr,Nt),Nt|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,xe(lr,Nt),Nt|=s;return ct(e,t,r,n),t.child}function ex(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function tu(e,t,n,s,r){var a=vt(n)?Ns:it.current;return a=Nr(t,a),vr(t,r),n=vd(e,t,n,s,a,r),s=bd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,vn(e,t,r)):(Ne&&s&&od(t),t.flags|=1,ct(e,t,n,r),t.child)}function hf(e,t,n,s,r){if(vt(n)){var a=!0;go(t)}else a=!1;if(vr(t,r),t.stateNode===null)Xi(e,t),Jg(t,n,s),Zc(t,n,s,r),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ft(u):(u=vt(n)?Ns:it.current,u=Nr(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&af(t,o,s,u),Pn=!1;var f=t.memoizedState;o.state=f,wo(t,s,o,r),c=t.memoizedState,l!==s||f!==c||yt.current||Pn?(typeof d=="function"&&(Xc(t,n,d,s),c=t.memoizedState),(l=Pn||rf(t,n,l,s,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Tg(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Bt(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ft(c):(c=vt(n)?Ns:it.current,c=Nr(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&af(t,o,s,c),Pn=!1,f=t.memoizedState,o.state=f,wo(t,s,o,r);var g=t.memoizedState;l!==h||f!==g||yt.current||Pn?(typeof p=="function"&&(Xc(t,n,p,s),g=t.memoizedState),(u=Pn||rf(t,n,u,s,f,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),o.props=s,o.state=g,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return nu(e,t,n,s,a,r)}function nu(e,t,n,s,r,a){ex(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return r&&Qh(t,n,!1),vn(e,t,a);s=t.stateNode,Db.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=_r(t,e.child,null,a),t.child=_r(t,null,l,a)):ct(e,t,l,a),t.memoizedState=s.state,r&&Qh(t,n,!0),t.child}function tx(e){var t=e.stateNode;t.pendingContext?Jh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jh(e,t.context,!1),md(e,t.containerInfo)}function ff(e,t,n,s,r){return kr(),cd(r),t.flags|=256,ct(e,t,n,s),t.child}var su={dehydrated:null,treeContext:null,retryLane:0};function ru(e){return{baseLanes:e,cachePool:null,transitions:null}}function nx(e,t,n){var s=t.pendingProps,r=_e.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),xe(_e,r&1),e===null)return Qc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=al(o,s,0,null),e=js(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ru(n),t.memoizedState=su,e):Sd(t,o));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Mb(e,t,o,s,l,r,n);if(a){a=s.fallback,o=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=qn(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?a=qn(l,a):(a=js(a,o,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=e.child.memoizedState,o=o===null?ru(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=su,s}return a=e.child,e=a.sibling,s=qn(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Sd(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pi(e,t,n,s){return s!==null&&cd(s),_r(t,e.child,null,n),e=Sd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mb(e,t,n,s,r,a,o){if(n)return t.flags&256?(t.flags&=-257,s=Wl(Error(D(422))),Pi(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,r=t.mode,s=al({mode:"visible",children:s.children},r,0,null),a=js(a,r,o,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&_r(t,e.child,null,o),t.child.memoizedState=ru(o),t.memoizedState=su,a);if(!(t.mode&1))return Pi(e,t,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(D(419)),s=Wl(a,s,void 0),Pi(e,t,o,s)}if(l=(o&e.childLanes)!==0,xt||l){if(s=Je,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,yn(e,r),Jt(s,e,r,-1))}return Cd(),s=Wl(Error(D(421))),Pi(e,t,o,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Yb.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,kt=Mn(r.nextSibling),_t=t,Ne=!0,Gt=null,e!==null&&($t[Dt++]=un,$t[Dt++]=dn,$t[Dt++]=ks,un=e.id,dn=e.overflow,ks=t),t=Sd(t,s.children),t.flags|=4096,t)}function pf(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Yc(e.return,t,n)}function Gl(e,t,n,s,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r)}function sx(e,t,n){var s=t.pendingProps,r=s.revealOrder,a=s.tail;if(ct(e,t,s.children,n),s=_e.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pf(e,n,t);else if(e.tag===19)pf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(xe(_e,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&jo(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Gl(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&jo(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Gl(t,!0,n,null,a);break;case"together":Gl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ps|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zb(e,t,n){switch(t.tag){case 3:tx(t),kr();break;case 5:Cg(t);break;case 1:vt(t.type)&&go(t);break;case 4:md(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;xe(vo,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(xe(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?nx(e,t,n):(xe(_e,_e.current&1),e=vn(e,t,n),e!==null?e.sibling:null);xe(_e,_e.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return sx(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xe(_e,_e.current),s)break;return null;case 22:case 23:return t.lanes=0,Zg(e,t,n)}return vn(e,t,n)}var rx,au,ax,ix;rx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};au=function(){};ax=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,ys(nn.current);var a=null;switch(n){case"input":r=Pc(e,r),s=Pc(e,s),a=[];break;case"select":r=Ce({},r,{value:void 0}),s=Ce({},s,{value:void 0}),a=[];break;case"textarea":r=Ec(e,r),s=Ec(e,s),a=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=po)}Rc(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wa.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&we("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};ix=function(e,t,n,s){n!==s&&(t.flags|=4)};function Hr(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Fb(e,t,n){var s=t.pendingProps;switch(ld(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return vt(t.type)&&mo(),st(t),null;case 3:return s=t.stateNode,Pr(),je(yt),je(it),xd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gt!==null&&(fu(Gt),Gt=null))),au(e,t),st(t),null;case 5:gd(t);var r=ys(Ia.current);if(n=t.type,e!==null&&t.stateNode!=null)ax(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(D(166));return st(t),null}if(e=ys(nn.current),ki(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[en]=t,s[Aa]=a,e=(t.mode&1)!==0,n){case"dialog":we("cancel",s),we("close",s);break;case"iframe":case"object":case"embed":we("load",s);break;case"video":case"audio":for(r=0;r<ea.length;r++)we(ea[r],s);break;case"source":we("error",s);break;case"img":case"image":case"link":we("error",s),we("load",s);break;case"details":we("toggle",s);break;case"input":jh(s,a),we("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},we("invalid",s);break;case"textarea":Nh(s,a),we("invalid",s)}Rc(n,a),r=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ni(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ni(s.textContent,l,e),r=["children",""+l]):wa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",s)}switch(n){case"input":gi(s),Sh(s,a,!0);break;case"textarea":gi(s),kh(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=po)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Om(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[en]=t,e[Aa]=s,rx(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ic(n,s),n){case"dialog":we("cancel",e),we("close",e),r=s;break;case"iframe":case"object":case"embed":we("load",e),r=s;break;case"video":case"audio":for(r=0;r<ea.length;r++)we(ea[r],e);r=s;break;case"source":we("error",e),r=s;break;case"img":case"image":case"link":we("error",e),we("load",e),r=s;break;case"details":we("toggle",e),r=s;break;case"input":jh(e,s),r=Pc(e,s),we("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=Ce({},s,{value:void 0}),we("invalid",e);break;case"textarea":Nh(e,s),r=Ec(e,s),we("invalid",e);break;default:r=s}Rc(n,r),l=r;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Dm(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lm(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ja(e,c):typeof c=="number"&&ja(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(wa.hasOwnProperty(a)?c!=null&&a==="onScroll"&&we("scroll",e):c!=null&&Gu(e,a,c,o))}switch(n){case"input":gi(e),Sh(e,s,!1);break;case"textarea":gi(e),kh(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Hn(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?mr(e,!!s.multiple,a,!1):s.defaultValue!=null&&mr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=po)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)ix(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(D(166));if(n=ys(Ia.current),ys(nn.current),ki(t)){if(s=t.stateNode,n=t.memoizedProps,s[en]=t,(a=s.nodeValue!==n)&&(e=_t,e!==null))switch(e.tag){case 3:Ni(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ni(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[en]=t,t.stateNode=s}return st(t),null;case 13:if(je(_e),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&kt!==null&&t.mode&1&&!(t.flags&128))Ng(),kr(),t.flags|=98560,a=!1;else if(a=ki(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(D(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(D(317));a[en]=t}else kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),a=!1}else Gt!==null&&(fu(Gt),Gt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Be===0&&(Be=3):Cd())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return Pr(),au(e,t),e===null&&Ca(t.stateNode.containerInfo),st(t),null;case 10:return hd(t.type._context),st(t),null;case 17:return vt(t.type)&&mo(),st(t),null;case 19:if(je(_e),a=t.memoizedState,a===null)return st(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)Hr(a,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=jo(e),o!==null){for(t.flags|=128,Hr(a,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(_e,_e.current&1|2),t.child}e=e.sibling}a.tail!==null&&Le()>Cr&&(t.flags|=128,s=!0,Hr(a,!1),t.lanes=4194304)}else{if(!s)if(e=jo(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ne)return st(t),null}else 2*Le()-a.renderingStartTime>Cr&&n!==1073741824&&(t.flags|=128,s=!0,Hr(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Le(),t.sibling=null,n=_e.current,xe(_e,s?n&1|2:n&1),t):(st(t),null);case 22:case 23:return Td(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Nt&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Ub(e,t){switch(ld(t),t.tag){case 1:return vt(t.type)&&mo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pr(),je(yt),je(it),xd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gd(t),null;case 13:if(je(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(_e),null;case 4:return Pr(),null;case 10:return hd(t.type._context),null;case 22:case 23:return Td(),null;case 24:return null;default:return null}}var Ti=!1,at=!1,qb=typeof WeakSet=="function"?WeakSet:Set,Q=null;function or(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Re(e,t,s)}else n.current=null}function iu(e,t,n){try{n()}catch(s){Re(e,t,s)}}var mf=!1;function Vb(e,t){if(Vc=uo,e=dg(),id(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||r!==0&&h.nodeType!==3||(l=o+r),h!==a||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=o),f===a&&++d===s&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bc={focusedElem:e,selectionRange:n},uo=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,b=g.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Bt(t.type,v),b);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){Re(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return g=mf,mf=!1,g}function ca(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,a!==void 0&&iu(t,n,a)}r=r.next}while(r!==s)}}function sl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ox(e){var t=e.alternate;t!==null&&(e.alternate=null,ox(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[en],delete t[Aa],delete t[Gc],delete t[kb],delete t[_b])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lx(e){return e.tag===5||e.tag===3||e.tag===4}function gf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=po));else if(s!==4&&(e=e.child,e!==null))for(lu(e,t,n),e=e.sibling;e!==null;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(cu(e,t,n),e=e.sibling;e!==null;)cu(e,t,n),e=e.sibling}var Ze=null,Ht=!1;function Nn(e,t,n){for(n=n.child;n!==null;)cx(e,t,n),n=n.sibling}function cx(e,t,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Jo,n)}catch{}switch(n.tag){case 5:at||or(n,t);case 6:var s=Ze,r=Ht;Ze=null,Nn(e,t,n),Ze=s,Ht=r,Ze!==null&&(Ht?(e=Ze,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Ht?(e=Ze,n=n.stateNode,e.nodeType===8?Fl(e.parentNode,n):e.nodeType===1&&Fl(e,n),_a(e)):Fl(Ze,n.stateNode));break;case 4:s=Ze,r=Ht,Ze=n.stateNode.containerInfo,Ht=!0,Nn(e,t,n),Ze=s,Ht=r;break;case 0:case 11:case 14:case 15:if(!at&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var a=r,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&iu(n,t,o),r=r.next}while(r!==s)}Nn(e,t,n);break;case 1:if(!at&&(or(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Re(n,t,l)}Nn(e,t,n);break;case 21:Nn(e,t,n);break;case 22:n.mode&1?(at=(s=at)||n.memoizedState!==null,Nn(e,t,n),at=s):Nn(e,t,n);break;default:Nn(e,t,n)}}function xf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new qb),t.forEach(function(s){var r=Xb.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function qt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,Ht=!1;break e;case 3:Ze=l.stateNode.containerInfo,Ht=!0;break e;case 4:Ze=l.stateNode.containerInfo,Ht=!0;break e}l=l.return}if(Ze===null)throw Error(D(160));cx(a,o,r),Ze=null,Ht=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Re(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ux(t,e),t=t.sibling}function ux(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qt(t,e),Xt(e),s&4){try{ca(3,e,e.return),sl(3,e)}catch(v){Re(e,e.return,v)}try{ca(5,e,e.return)}catch(v){Re(e,e.return,v)}}break;case 1:qt(t,e),Xt(e),s&512&&n!==null&&or(n,n.return);break;case 5:if(qt(t,e),Xt(e),s&512&&n!==null&&or(n,n.return),e.flags&32){var r=e.stateNode;try{ja(r,"")}catch(v){Re(e,e.return,v)}}if(s&4&&(r=e.stateNode,r!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Rm(r,a),Ic(l,o);var u=Ic(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Dm(r,h):d==="dangerouslySetInnerHTML"?Lm(r,h):d==="children"?ja(r,h):Gu(r,d,h,u)}switch(l){case"input":Tc(r,a);break;case"textarea":Im(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?mr(r,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?mr(r,!!a.multiple,a.defaultValue,!0):mr(r,!!a.multiple,a.multiple?[]:"",!1))}r[Aa]=a}catch(v){Re(e,e.return,v)}}break;case 6:if(qt(t,e),Xt(e),s&4){if(e.stateNode===null)throw Error(D(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(v){Re(e,e.return,v)}}break;case 3:if(qt(t,e),Xt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(t.containerInfo)}catch(v){Re(e,e.return,v)}break;case 4:qt(t,e),Xt(e);break;case 13:qt(t,e),Xt(e),r=e.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(_d=Le())),s&4&&xf(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(at=(u=at)||d,qt(t,e),at=u):qt(t,e),Xt(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Q=e,d=e.child;d!==null;){for(h=Q=d;Q!==null;){switch(f=Q,p=f.child,f.tag){case 0:case 11:case 14:case 15:ca(4,f,f.return);break;case 1:or(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Re(s,n,v)}}break;case 5:or(f,f.return);break;case 22:if(f.memoizedState!==null){vf(h);continue}}p!==null?(p.return=f,Q=p):vf(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$m("display",o))}catch(v){Re(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Re(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qt(t,e),Xt(e),s&4&&xf(e);break;case 21:break;default:qt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lx(n)){var s=n;break e}n=n.return}throw Error(D(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(ja(r,""),s.flags&=-33);var a=gf(e);cu(e,a,r);break;case 3:case 4:var o=s.stateNode.containerInfo,l=gf(e);lu(e,l,o);break;default:throw Error(D(161))}}catch(c){Re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bb(e,t,n){Q=e,dx(e)}function dx(e,t,n){for(var s=(e.mode&1)!==0;Q!==null;){var r=Q,a=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Ti;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||at;l=Ti;var u=at;if(Ti=o,(at=c)&&!u)for(Q=r;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?bf(r):c!==null?(c.return=o,Q=c):bf(r);for(;a!==null;)Q=a,dx(a),a=a.sibling;Q=r,Ti=l,at=u}yf(e)}else r.subtreeFlags&8772&&a!==null?(a.return=r,Q=a):yf(e)}}function yf(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:at||sl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!at)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&tf(t,a,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_a(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}at||t.flags&512&&ou(t)}catch(f){Re(t,t.return,f)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function vf(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function bf(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(c){Re(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){Re(t,r,c)}}var a=t.return;try{ou(t)}catch(c){Re(t,a,c)}break;case 5:var o=t.return;try{ou(t)}catch(c){Re(t,o,c)}}}catch(c){Re(t,t.return,c)}if(t===e){Q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Q=l;break}Q=t.return}}var Hb=Math.ceil,ko=wn.ReactCurrentDispatcher,Nd=wn.ReactCurrentOwner,zt=wn.ReactCurrentBatchConfig,ue=0,Je=null,ze=null,et=0,Nt=0,lr=es(0),Be=0,Da=null,Ps=0,rl=0,kd=0,ua=null,gt=null,_d=0,Cr=1/0,an=null,_o=!1,uu=null,Fn=null,Ci=!1,On=null,Po=0,da=0,du=null,Zi=-1,eo=0;function ut(){return ue&6?Le():Zi!==-1?Zi:Zi=Le()}function Un(e){return e.mode&1?ue&2&&et!==0?et&-et:Tb.transition!==null?(eo===0&&(eo=Jm()),eo):(e=fe,e!==0||(e=window.event,e=e===void 0?16:ng(e.type)),e):1}function Jt(e,t,n,s){if(50<da)throw da=0,du=null,Error(D(185));ei(e,n,s),(!(ue&2)||e!==Je)&&(e===Je&&(!(ue&2)&&(rl|=n),Be===4&&An(e,et)),bt(e,s),n===1&&ue===0&&!(t.mode&1)&&(Cr=Le()+500,el&&ts()))}function bt(e,t){var n=e.callbackNode;Tv(e,t);var s=co(e,e===Je?et:0);if(s===0)n!==null&&Th(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Th(n),t===1)e.tag===0?Pb(wf.bind(null,e)):wg(wf.bind(null,e)),Sb(function(){!(ue&6)&&ts()}),n=null;else{switch(Qm(s)){case 1:n=Xu;break;case 4:n=Gm;break;case 16:n=lo;break;case 536870912:n=Km;break;default:n=lo}n=vx(n,hx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hx(e,t){if(Zi=-1,eo=0,ue&6)throw Error(D(327));var n=e.callbackNode;if(br()&&e.callbackNode!==n)return null;var s=co(e,e===Je?et:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=To(e,s);else{t=s;var r=ue;ue|=2;var a=px();(Je!==e||et!==t)&&(an=null,Cr=Le()+500,ws(e,t));do try{Kb();break}catch(l){fx(e,l)}while(!0);dd(),ko.current=a,ue=r,ze!==null?t=0:(Je=null,et=0,t=Be)}if(t!==0){if(t===2&&(r=Mc(e),r!==0&&(s=r,t=hu(e,r))),t===1)throw n=Da,ws(e,0),An(e,s),bt(e,Le()),n;if(t===6)An(e,s);else{if(r=e.current.alternate,!(s&30)&&!Wb(r)&&(t=To(e,s),t===2&&(a=Mc(e),a!==0&&(s=a,t=hu(e,a))),t===1))throw n=Da,ws(e,0),An(e,s),bt(e,Le()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(D(345));case 2:cs(e,gt,an);break;case 3:if(An(e,s),(s&130023424)===s&&(t=_d+500-Le(),10<t)){if(co(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){ut(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Wc(cs.bind(null,e,gt,an),t);break}cs(e,gt,an);break;case 4:if(An(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-Kt(s);a=1<<o,o=t[o],o>r&&(r=o),s&=~a}if(s=r,s=Le()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Hb(s/1960))-s,10<s){e.timeoutHandle=Wc(cs.bind(null,e,gt,an),s);break}cs(e,gt,an);break;case 5:cs(e,gt,an);break;default:throw Error(D(329))}}}return bt(e,Le()),e.callbackNode===n?hx.bind(null,e):null}function hu(e,t){var n=ua;return e.current.memoizedState.isDehydrated&&(ws(e,t).flags|=256),e=To(e,t),e!==2&&(t=gt,gt=n,t!==null&&fu(t)),e}function fu(e){gt===null?gt=e:gt.push.apply(gt,e)}function Wb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],a=r.getSnapshot;r=r.value;try{if(!Qt(a(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~kd,t&=~rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),s=1<<n;e[n]=-1,t&=~s}}function wf(e){if(ue&6)throw Error(D(327));br();var t=co(e,0);if(!(t&1))return bt(e,Le()),null;var n=To(e,t);if(e.tag!==0&&n===2){var s=Mc(e);s!==0&&(t=s,n=hu(e,s))}if(n===1)throw n=Da,ws(e,0),An(e,t),bt(e,Le()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cs(e,gt,an),bt(e,Le()),null}function Pd(e,t){var n=ue;ue|=1;try{return e(t)}finally{ue=n,ue===0&&(Cr=Le()+500,el&&ts())}}function Ts(e){On!==null&&On.tag===0&&!(ue&6)&&br();var t=ue;ue|=1;var n=zt.transition,s=fe;try{if(zt.transition=null,fe=1,e)return e()}finally{fe=s,zt.transition=n,ue=t,!(ue&6)&&ts()}}function Td(){Nt=lr.current,je(lr)}function ws(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,jb(n)),ze!==null)for(n=ze.return;n!==null;){var s=n;switch(ld(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&mo();break;case 3:Pr(),je(yt),je(it),xd();break;case 5:gd(s);break;case 4:Pr();break;case 13:je(_e);break;case 19:je(_e);break;case 10:hd(s.type._context);break;case 22:case 23:Td()}n=n.return}if(Je=e,ze=e=qn(e.current,null),et=Nt=t,Be=0,Da=null,kd=rl=Ps=0,gt=ua=null,xs!==null){for(t=0;t<xs.length;t++)if(n=xs[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=r,s.next=o}n.pending=s}xs=null}return e}function fx(e,t){do{var n=ze;try{if(dd(),Qi.current=No,So){for(var s=Te.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}So=!1}if(_s=0,Ke=Ve=Te=null,la=!1,Oa=0,Nd.current=null,n===null||n.return===null){Be=1,Da=t,ze=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=lf(o);if(p!==null){p.flags&=-257,cf(p,o,l,a,t),p.mode&1&&of(a,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){of(a,u,t),Cd();break e}c=Error(D(426))}}else if(Ne&&l.mode&1){var b=lf(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),cf(b,o,l,a,t),cd(Tr(c,l));break e}}a=c=Tr(c,l),Be!==4&&(Be=2),ua===null?ua=[a]:ua.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=Qg(a,c,t);ef(a,x);break e;case 1:l=c;var m=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Fn===null||!Fn.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var w=Yg(a,l,t);ef(a,w);break e}}a=a.return}while(a!==null)}gx(n)}catch(N){t=N,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function px(){var e=ko.current;return ko.current=No,e===null?No:e}function Cd(){(Be===0||Be===3||Be===2)&&(Be=4),Je===null||!(Ps&268435455)&&!(rl&268435455)||An(Je,et)}function To(e,t){var n=ue;ue|=2;var s=px();(Je!==e||et!==t)&&(an=null,ws(e,t));do try{Gb();break}catch(r){fx(e,r)}while(!0);if(dd(),ue=n,ko.current=s,ze!==null)throw Error(D(261));return Je=null,et=0,Be}function Gb(){for(;ze!==null;)mx(ze)}function Kb(){for(;ze!==null&&!vv();)mx(ze)}function mx(e){var t=yx(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?gx(e):ze=t,Nd.current=null}function gx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ub(n,t),n!==null){n.flags&=32767,ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,ze=null;return}}else if(n=Fb(n,t,Nt),n!==null){ze=n;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);Be===0&&(Be=5)}function cs(e,t,n){var s=fe,r=zt.transition;try{zt.transition=null,fe=1,Jb(e,t,n,s)}finally{zt.transition=r,fe=s}return null}function Jb(e,t,n,s){do br();while(On!==null);if(ue&6)throw Error(D(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Cv(e,a),e===Je&&(ze=Je=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ci||(Ci=!0,vx(lo,function(){return br(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=zt.transition,zt.transition=null;var o=fe;fe=1;var l=ue;ue|=4,Nd.current=null,Vb(e,n),ux(n,e),mb(Bc),uo=!!Vc,Bc=Vc=null,e.current=n,Bb(n),bv(),ue=l,fe=o,zt.transition=a}else e.current=n;if(Ci&&(Ci=!1,On=e,Po=r),a=e.pendingLanes,a===0&&(Fn=null),Sv(n.stateNode),bt(e,Le()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(_o)throw _o=!1,e=uu,uu=null,e;return Po&1&&e.tag!==0&&br(),a=e.pendingLanes,a&1?e===du?da++:(da=0,du=e):da=0,ts(),null}function br(){if(On!==null){var e=Qm(Po),t=zt.transition,n=fe;try{if(zt.transition=null,fe=16>e?16:e,On===null)var s=!1;else{if(e=On,On=null,Po=0,ue&6)throw Error(D(331));var r=ue;for(ue|=4,Q=e.current;Q!==null;){var a=Q,o=a.child;if(Q.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:ca(8,d,a)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var f=d.sibling,p=d.return;if(ox(d),d===u){Q=null;break}if(f!==null){f.return=p,Q=f;break}Q=p}}}var g=a.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Q=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Q=o;else e:for(;Q!==null;){if(a=Q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ca(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,Q=x;break e}Q=a.return}}var m=e.current;for(Q=m;Q!==null;){o=Q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Q=y;else e:for(o=m;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(N){Re(l,l.return,N)}if(l===o){Q=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Q=w;break e}Q=l.return}}if(ue=r,ts(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Jo,e)}catch{}s=!0}return s}finally{fe=n,zt.transition=t}}return!1}function jf(e,t,n){t=Tr(n,t),t=Qg(e,t,1),e=zn(e,t,1),t=ut(),e!==null&&(ei(e,1,t),bt(e,t))}function Re(e,t,n){if(e.tag===3)jf(e,e,n);else for(;t!==null;){if(t.tag===3){jf(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fn===null||!Fn.has(s))){e=Tr(n,e),e=Yg(t,e,1),t=zn(t,e,1),e=ut(),t!==null&&(ei(t,1,e),bt(t,e));break}}t=t.return}}function Qb(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(et&n)===n&&(Be===4||Be===3&&(et&130023424)===et&&500>Le()-_d?ws(e,0):kd|=n),bt(e,t)}function xx(e,t){t===0&&(e.mode&1?(t=vi,vi<<=1,!(vi&130023424)&&(vi=4194304)):t=1);var n=ut();e=yn(e,t),e!==null&&(ei(e,t,n),bt(e,n))}function Yb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xx(e,n)}function Xb(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(D(314))}s!==null&&s.delete(t),xx(e,n)}var yx;yx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)xt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return xt=!1,zb(e,t,n);xt=!!(e.flags&131072)}else xt=!1,Ne&&t.flags&1048576&&jg(t,yo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xi(e,t),e=t.pendingProps;var r=Nr(t,it.current);vr(t,n),r=vd(null,t,s,e,r,n);var a=bd();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(s)?(a=!0,go(t)):a=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,pd(t),r.updater=nl,t.stateNode=r,r._reactInternals=t,Zc(t,s,e,n),t=nu(null,t,s,!0,a,n)):(t.tag=0,Ne&&a&&od(t),ct(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Xi(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=ew(s),e=Bt(s,e),r){case 0:t=tu(null,t,s,e,n);break e;case 1:t=hf(null,t,s,e,n);break e;case 11:t=uf(null,t,s,e,n);break e;case 14:t=df(null,t,s,Bt(s.type,e),n);break e}throw Error(D(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Bt(s,r),tu(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Bt(s,r),hf(e,t,s,r,n);case 3:e:{if(tx(t),e===null)throw Error(D(387));s=t.pendingProps,a=t.memoizedState,r=a.element,Tg(e,t),wo(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){r=Tr(Error(D(423)),t),t=ff(e,t,s,n,r);break e}else if(s!==r){r=Tr(Error(D(424)),t),t=ff(e,t,s,n,r);break e}else for(kt=Mn(t.stateNode.containerInfo.firstChild),_t=t,Ne=!0,Gt=null,n=_g(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kr(),s===r){t=vn(e,t,n);break e}ct(e,t,s,n)}t=t.child}return t;case 5:return Cg(t),e===null&&Qc(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,o=r.children,Hc(s,r)?o=null:a!==null&&Hc(s,a)&&(t.flags|=32),ex(e,t),ct(e,t,o,n),t.child;case 6:return e===null&&Qc(t),null;case 13:return nx(e,t,n);case 4:return md(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=_r(t,null,s,n):ct(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Bt(s,r),uf(e,t,s,r,n);case 7:return ct(e,t,t.pendingProps,n),t.child;case 8:return ct(e,t,t.pendingProps.children,n),t.child;case 12:return ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,xe(vo,s._currentValue),s._currentValue=o,a!==null)if(Qt(a.value,o)){if(a.children===r.children&&!yt.current){t=vn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=fn(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Yc(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Yc(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ct(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,vr(t,n),r=Ft(r),s=s(r),t.flags|=1,ct(e,t,s,n),t.child;case 14:return s=t.type,r=Bt(s,t.pendingProps),r=Bt(s.type,r),df(e,t,s,r,n);case 15:return Xg(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Bt(s,r),Xi(e,t),t.tag=1,vt(s)?(e=!0,go(t)):e=!1,vr(t,n),Jg(t,s,r),Zc(t,s,r,n),nu(null,t,s,!0,e,n);case 19:return sx(e,t,n);case 22:return Zg(e,t,n)}throw Error(D(156,t.tag))};function vx(e,t){return Wm(e,t)}function Zb(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,n,s){return new Zb(e,t,n,s)}function Ed(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ew(e){if(typeof e=="function")return Ed(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ju)return 11;if(e===Qu)return 14}return 2}function qn(e,t){var n=e.alternate;return n===null?(n=Mt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function to(e,t,n,s,r,a){var o=2;if(s=e,typeof e=="function")Ed(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Xs:return js(n.children,r,a,t);case Ku:o=8,r|=8;break;case Sc:return e=Mt(12,n,t,r|2),e.elementType=Sc,e.lanes=a,e;case Nc:return e=Mt(13,n,t,r),e.elementType=Nc,e.lanes=a,e;case kc:return e=Mt(19,n,t,r),e.elementType=kc,e.lanes=a,e;case Cm:return al(n,r,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pm:o=10;break e;case Tm:o=9;break e;case Ju:o=11;break e;case Qu:o=14;break e;case _n:o=16,s=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Mt(o,n,t,r),t.elementType=e,t.type=s,t.lanes=a,t}function js(e,t,n,s){return e=Mt(7,e,s,t),e.lanes=n,e}function al(e,t,n,s){return e=Mt(22,e,s,t),e.elementType=Cm,e.lanes=n,e.stateNode={isHidden:!1},e}function Kl(e,t,n){return e=Mt(6,e,null,t),e.lanes=n,e}function Jl(e,t,n){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tw(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cl(0),this.expirationTimes=Cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cl(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ad(e,t,n,s,r,a,o,l,c){return e=new tw(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Mt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pd(a),e}function nw(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ys,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function bx(e){if(!e)return Wn;e=e._reactInternals;e:{if(As(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(vt(n))return bg(e,n,t)}return t}function wx(e,t,n,s,r,a,o,l,c){return e=Ad(n,s,!0,e,r,a,o,l,c),e.context=bx(null),n=e.current,s=ut(),r=Un(n),a=fn(s,r),a.callback=t??null,zn(n,a,r),e.current.lanes=r,ei(e,r,s),bt(e,s),e}function il(e,t,n,s){var r=t.current,a=ut(),o=Un(r);return n=bx(n),t.context===null?t.context=n:t.pendingContext=n,t=fn(a,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=zn(r,t,o),e!==null&&(Jt(e,r,o,a),Ji(e,r,o)),o}function Co(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rd(e,t){Sf(e,t),(e=e.alternate)&&Sf(e,t)}function sw(){return null}var jx=typeof reportError=="function"?reportError:function(e){console.error(e)};function Id(e){this._internalRoot=e}ol.prototype.render=Id.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));il(e,t,null,null)};ol.prototype.unmount=Id.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ts(function(){il(null,e,null,null)}),t[xn]=null}};function ol(e){this._internalRoot=e}ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<En.length&&t!==0&&t<En[n].priority;n++);En.splice(n,0,e),n===0&&tg(e)}};function Od(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ll(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nf(){}function rw(e,t,n,s,r){if(r){if(typeof s=="function"){var a=s;s=function(){var u=Co(o);a.call(u)}}var o=wx(t,s,e,0,null,!1,!1,"",Nf);return e._reactRootContainer=o,e[xn]=o.current,Ca(e.nodeType===8?e.parentNode:e),Ts(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=Co(c);l.call(u)}}var c=Ad(e,0,!1,null,null,!1,!1,"",Nf);return e._reactRootContainer=c,e[xn]=c.current,Ca(e.nodeType===8?e.parentNode:e),Ts(function(){il(t,c,n,s)}),c}function cl(e,t,n,s,r){var a=n._reactRootContainer;if(a){var o=a;if(typeof r=="function"){var l=r;r=function(){var c=Co(o);l.call(c)}}il(t,o,e,r)}else o=rw(n,t,e,r,s);return Co(o)}Ym=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zr(t.pendingLanes);n!==0&&(Zu(t,n|1),bt(t,Le()),!(ue&6)&&(Cr=Le()+500,ts()))}break;case 13:Ts(function(){var s=yn(e,1);if(s!==null){var r=ut();Jt(s,e,1,r)}}),Rd(e,1)}};ed=function(e){if(e.tag===13){var t=yn(e,134217728);if(t!==null){var n=ut();Jt(t,e,134217728,n)}Rd(e,134217728)}};Xm=function(e){if(e.tag===13){var t=Un(e),n=yn(e,t);if(n!==null){var s=ut();Jt(n,e,t,s)}Rd(e,t)}};Zm=function(){return fe};eg=function(e,t){var n=fe;try{return fe=e,t()}finally{fe=n}};Lc=function(e,t,n){switch(t){case"input":if(Tc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=Zo(s);if(!r)throw Error(D(90));Am(s),Tc(s,r)}}}break;case"textarea":Im(e,n);break;case"select":t=n.value,t!=null&&mr(e,!!n.multiple,t,!1)}};Fm=Pd;Um=Ts;var aw={usingClientEntryPoint:!1,Events:[ni,nr,Zo,Mm,zm,Pd]},Wr={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iw={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bm(e),e===null?null:e.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||sw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ei.isDisabled&&Ei.supportsFiber)try{Jo=Ei.inject(iw),tn=Ei}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aw;Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(t))throw Error(D(200));return nw(e,t,null,n)};Et.createRoot=function(e,t){if(!Od(e))throw Error(D(299));var n=!1,s="",r=jx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Ad(e,1,!1,null,null,n,!1,s,r),e[xn]=t.current,Ca(e.nodeType===8?e.parentNode:e),new Id(t)};Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Bm(t),e=e===null?null:e.stateNode,e};Et.flushSync=function(e){return Ts(e)};Et.hydrate=function(e,t,n){if(!ll(t))throw Error(D(200));return cl(null,e,t,!0,n)};Et.hydrateRoot=function(e,t,n){if(!Od(e))throw Error(D(405));var s=n!=null&&n.hydratedSources||null,r=!1,a="",o=jx;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=wx(t,null,e,1,n??null,r,!1,a,o),e[xn]=t.current,Ca(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new ol(t)};Et.render=function(e,t,n){if(!ll(t))throw Error(D(200));return cl(null,e,t,!1,n)};Et.unmountComponentAtNode=function(e){if(!ll(e))throw Error(D(40));return e._reactRootContainer?(Ts(function(){cl(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0):!1};Et.unstable_batchedUpdates=Pd;Et.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!ll(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return cl(e,t,n,!1,s)};Et.version="18.3.1-next-f1338f8080-20240426";function Sx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sx)}catch(e){console.error(e)}}Sx(),Sm.exports=Et;var ow=Sm.exports,kf=ow;wc.createRoot=kf.createRoot,wc.hydrateRoot=kf.hydrateRoot;const Nx=k.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ul=k.createContext({}),dl=k.createContext(null),hl=typeof document<"u",Ld=hl?k.useLayoutEffect:k.useEffect,kx=k.createContext({strict:!1}),$d=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),lw="framerAppearId",_x="data-"+$d(lw);function cw(e,t,n,s){const{visualElement:r}=k.useContext(ul),a=k.useContext(kx),o=k.useContext(dl),l=k.useContext(Nx).reducedMotion,c=k.useRef();s=s||a.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;k.useInsertionEffect(()=>{u&&u.update(n,o)});const d=k.useRef(!!(n[_x]&&!window.HandoffComplete));return Ld(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),k.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function cr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function uw(e,t,n){return k.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):cr(n)&&(n.current=s))},[t])}function Ma(e){return typeof e=="string"||Array.isArray(e)}function fl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Dd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Md=["initial",...Dd];function pl(e){return fl(e.animate)||Md.some(t=>Ma(e[t]))}function Px(e){return!!(pl(e)||e.variants)}function dw(e,t){if(pl(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Ma(n)?n:void 0,animate:Ma(s)?s:void 0}}return e.inherit!==!1?t:{}}function hw(e){const{initial:t,animate:n}=dw(e,k.useContext(ul));return k.useMemo(()=>({initial:t,animate:n}),[_f(t),_f(n)])}function _f(e){return Array.isArray(e)?e.join(" "):e}const Pf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},za={};for(const e in Pf)za[e]={isEnabled:t=>Pf[e].some(n=>!!t[n])};function fw(e){for(const t in e)za[t]={...za[t],...e[t]}}const zd=k.createContext({}),Tx=k.createContext({}),pw=Symbol.for("motionComponentSymbol");function mw({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){e&&fw(e);function a(l,c){let u;const d={...k.useContext(Nx),...l,layoutId:gw(l)},{isStatic:h}=d,f=hw(l),p=s(l,h);if(!h&&hl){f.visualElement=cw(r,p,d,t);const g=k.useContext(Tx),v=k.useContext(kx).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,v,e,g))}return k.createElement(ul.Provider,{value:f},u&&f.visualElement?k.createElement(u,{visualElement:f.visualElement,...d}):null,n(r,l,uw(p,f.visualElement,c),p,h,f.visualElement))}const o=k.forwardRef(a);return o[pw]=r,o}function gw({layoutId:e}){const t=k.useContext(zd).id;return t&&e!==void 0?t+"-"+e:e}function xw(e){function t(s,r={}){return mw(e(s,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const yw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fd(e){return typeof e!="string"||e.includes("-")?!1:!!(yw.indexOf(e)>-1||/[A-Z]/.test(e))}const Eo={};function vw(e){Object.assign(Eo,e)}const ri=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rs=new Set(ri);function Cx(e,{layout:t,layoutId:n}){return Rs.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Eo[e]||e==="opacity")}const wt=e=>!!(e&&e.getVelocity),bw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ww=ri.length;function jw(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,r){let a="";for(let o=0;o<ww;o++){const l=ri[o];if(e[l]!==void 0){const c=bw[l]||l;a+=`${c}(${e[l]}) `}}return t&&!e.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(e,s?"":a):n&&s&&(a="none"),a}const Ex=e=>t=>typeof t=="string"&&t.startsWith(e),Ax=Ex("--"),pu=Ex("var(--"),Sw=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Nw=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Gn=(e,t,n)=>Math.min(Math.max(n,e),t),Is={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ha={...Is,transform:e=>Gn(0,1,e)},Ai={...Is,default:1},fa=e=>Math.round(e*1e5)/1e5,ml=/(-)?([\d]*\.?[\d])+/g,Rx=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,kw=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ai(e){return typeof e=="string"}const ii=e=>({test:t=>ai(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),kn=ii("deg"),sn=ii("%"),ne=ii("px"),_w=ii("vh"),Pw=ii("vw"),Tf={...sn,parse:e=>sn.parse(e)/100,transform:e=>sn.transform(e*100)},Cf={...Is,transform:Math.round},Ix={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,size:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,rotate:kn,rotateX:kn,rotateY:kn,rotateZ:kn,scale:Ai,scaleX:Ai,scaleY:Ai,scaleZ:Ai,skew:kn,skewX:kn,skewY:kn,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:ha,originX:Tf,originY:Tf,originZ:ne,zIndex:Cf,fillOpacity:ha,strokeOpacity:ha,numOctaves:Cf};function Ud(e,t,n,s){const{style:r,vars:a,transform:o,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(Ax(h)){a[h]=f;continue}const p=Ix[h],g=Nw(f,p);if(Rs.has(h)){if(c=!0,o[h]=g,!d)continue;f!==(p.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=g):r[h]=g}if(t.transform||(c||s?r.transform=jw(e.transform,n,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=l;r.transformOrigin=`${h} ${f} ${p}`}}const qd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ox(e,t,n){for(const s in t)!wt(t[s])&&!Cx(s,n)&&(e[s]=t[s])}function Tw({transformTemplate:e},t,n){return k.useMemo(()=>{const s=qd();return Ud(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function Cw(e,t,n){const s=e.style||{},r={};return Ox(r,s,e),Object.assign(r,Tw(e,t,n)),e.transformValues?e.transformValues(r):r}function Ew(e,t,n){const s={},r=Cw(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const Aw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ao(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Aw.has(e)}let Lx=e=>!Ao(e);function Rw(e){e&&(Lx=t=>t.startsWith("on")?!Ao(t):e(t))}try{Rw(require("@emotion/is-prop-valid").default)}catch{}function Iw(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(Lx(r)||n===!0&&Ao(r)||!t&&!Ao(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}function Ef(e,t,n){return typeof e=="string"?e:ne.transform(t+n*e)}function Ow(e,t,n){const s=Ef(t,e.x,e.width),r=Ef(n,e.y,e.height);return`${s} ${r}`}const Lw={offset:"stroke-dashoffset",array:"stroke-dasharray"},$w={offset:"strokeDashoffset",array:"strokeDasharray"};function Dw(e,t,n=1,s=0,r=!0){e.pathLength=1;const a=r?Lw:$w;e[a.offset]=ne.transform(-s);const o=ne.transform(t),l=ne.transform(n);e[a.array]=`${o} ${l}`}function Vd(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(Ud(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:v}=e;p.transform&&(v&&(g.transform=p.transform),delete p.transform),v&&(r!==void 0||a!==void 0||g.transform)&&(g.transformOrigin=Ow(v,r!==void 0?r:.5,a!==void 0?a:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),s!==void 0&&(p.scale=s),o!==void 0&&Dw(p,o,l,c,!1)}const $x=()=>({...qd(),attrs:{}}),Bd=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Mw(e,t,n,s){const r=k.useMemo(()=>{const a=$x();return Vd(a,t,{enableHardwareAcceleration:!1},Bd(s),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Ox(a,e.style,e),r.style={...a,...r.style}}return r}function zw(e=!1){return(n,s,r,{latestValues:a},o)=>{const c=(Fd(n)?Mw:Ew)(s,a,o,n),d={...Iw(s,typeof n=="string",e),...c,ref:r},{children:h}=s,f=k.useMemo(()=>wt(h)?h.get():h,[h]);return k.createElement(n,{...d,children:f})}}function Dx(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const a in n)e.style.setProperty(a,n[a])}const Mx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zx(e,t,n,s){Dx(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(Mx.has(r)?r:$d(r),t.attrs[r])}function Hd(e,t){const{style:n}=e,s={};for(const r in n)(wt(n[r])||t.style&&wt(t.style[r])||Cx(r,e))&&(s[r]=n[r]);return s}function Fx(e,t){const n=Hd(e,t);for(const s in e)if(wt(e[s])||wt(t[s])){const r=ri.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=e[s]}return n}function Wd(e,t,n,s={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),t}function Ux(e){const t=k.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ro=e=>Array.isArray(e),Fw=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Uw=e=>Ro(e)?e[e.length-1]||0:e;function no(e){const t=wt(e)?e.get():e;return Fw(t)?t.toValue():t}function qw({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,r,a){const o={latestValues:Vw(s,r,a,e),renderState:t()};return n&&(o.mount=l=>n(s,l,o)),o}const qx=e=>(t,n)=>{const s=k.useContext(ul),r=k.useContext(dl),a=()=>qw(e,t,s,r);return n?a():Ux(a)};function Vw(e,t,n,s){const r={},a=s(e,{});for(const f in a)r[f]=no(a[f]);let{initial:o,animate:l}=e;const c=pl(e),u=Px(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;return h&&typeof h!="boolean"&&!fl(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const g=Wd(e,p);if(!g)return;const{transitionEnd:v,transition:b,...x}=g;for(const m in x){let y=x[m];if(Array.isArray(y)){const w=d?y.length-1:0;y=y[w]}y!==null&&(r[m]=y)}for(const m in v)r[m]=v[m]}),r}const $e=e=>e;class Af{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Bw(e){let t=new Af,n=new Af,s=0,r=!1,a=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?t:n;return u&&o.add(c),f.add(c)&&h&&r&&(s=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(r){a=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let u=0;u<s;u++){const d=t.order[u];d(c),o.has(d)&&(l.schedule(d),e())}r=!1,a&&(a=!1,l.process(c))}};return l}const Ri=["prepare","read","update","preRender","render","postRender"],Hw=40;function Ww(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=Ri.reduce((h,f)=>(h[f]=Bw(()=>n=!0),h),{}),o=h=>a[h].process(r),l=()=>{const h=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,Hw),1),r.timestamp=h,r.isProcessing=!0,Ri.forEach(o),r.isProcessing=!1,n&&t&&(s=!1,e(l))},c=()=>{n=!0,s=!0,r.isProcessing||e(l)};return{schedule:Ri.reduce((h,f)=>{const p=a[f];return h[f]=(g,v=!1,b=!1)=>(n||c(),p.schedule(g,v,b)),h},{}),cancel:h=>Ri.forEach(f=>a[f].cancel(h)),state:r,steps:a}}const{schedule:ye,cancel:bn,state:rt,steps:Ql}=Ww(typeof requestAnimationFrame<"u"?requestAnimationFrame:$e,!0),Gw={useVisualState:qx({scrapeMotionValuesFromProps:Fx,createRenderState:$x,onMount:(e,t,{renderState:n,latestValues:s})=>{ye.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ye.render(()=>{Vd(n,s,{enableHardwareAcceleration:!1},Bd(t.tagName),e.transformTemplate),zx(t,n)})}})},Kw={useVisualState:qx({scrapeMotionValuesFromProps:Hd,createRenderState:qd})};function Jw(e,{forwardMotionProps:t=!1},n,s){return{...Fd(e)?Gw:Kw,preloadedFeatures:n,useRender:zw(t),createVisualElement:s,Component:e}}function hn(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const Vx=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function gl(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Qw=e=>t=>Vx(t)&&e(t,gl(t));function pn(e,t,n,s){return hn(e,t,Qw(n),s)}const Yw=(e,t)=>n=>t(e(n)),Vn=(...e)=>e.reduce(Yw);function Bx(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Rf=Bx("dragHorizontal"),If=Bx("dragVertical");function Hx(e){let t=!1;if(e==="y")t=If();else if(e==="x")t=Rf();else{const n=Rf(),s=If();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function Wx(){const e=Hx(!0);return e?(e(),!1):!0}class ns{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Of(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),r=(a,o)=>{if(a.pointerType==="touch"||Wx())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&ye.update(()=>l[s](a,o))};return pn(e.current,n,r,{passive:!e.getProps()[s]})}class Xw extends ns{mount(){this.unmount=Vn(Of(this.node,!0),Of(this.node,!1))}unmount(){}}class Zw extends ns{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vn(hn(this.node.current,"focus",()=>this.onFocus()),hn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Gx=(e,t)=>t?e===t?!0:Gx(e,t.parentElement):!1;function Yl(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,gl(n))}class e1 extends ns{constructor(){super(...arguments),this.removeStartListeners=$e,this.removeEndListeners=$e,this.removeAccessibleListeners=$e,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=pn(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();ye.update(()=>{!h&&!Gx(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=pn(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Vn(a,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Yl("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&ye.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=hn(this.node.current,"keyup",o),Yl("down",(l,c)=>{this.startPress(l,c)})},n=hn(this.node.current,"keydown",t),s=()=>{this.isPressing&&Yl("cancel",(a,o)=>this.cancelPress(a,o))},r=hn(this.node.current,"blur",s);this.removeAccessibleListeners=Vn(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&ye.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Wx()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&ye.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=pn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=hn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Vn(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const mu=new WeakMap,Xl=new WeakMap,t1=e=>{const t=mu.get(e.target);t&&t(e)},n1=e=>{e.forEach(t1)};function s1({root:e,...t}){const n=e||document;Xl.has(n)||Xl.set(n,{});const s=Xl.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(n1,{root:e,...t})),s[r]}function r1(e,t,n){const s=s1(t);return mu.set(e,n),s.observe(e),()=>{mu.delete(e),s.unobserve(e)}}const a1={some:0,all:1};class i1 extends ns{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:a1[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return r1(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(o1(t,n))&&this.startObserver()}unmount(){}}function o1({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const l1={inView:{Feature:i1},tap:{Feature:e1},focus:{Feature:Zw},hover:{Feature:Xw}};function Kx(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function c1(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function u1(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function xl(e,t,n){const s=e.getProps();return Wd(s,t,n!==void 0?n:s.custom,c1(e),u1(e))}let Gd=$e;const Ss=e=>e*1e3,mn=e=>e/1e3,d1={current:!1},Jx=e=>Array.isArray(e)&&typeof e[0]=="number";function Qx(e){return!!(!e||typeof e=="string"&&Yx[e]||Jx(e)||Array.isArray(e)&&e.every(Qx))}const ta=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,Yx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ta([0,.65,.55,1]),circOut:ta([.55,0,1,.45]),backIn:ta([.31,.01,.66,-.59]),backOut:ta([.33,1.53,.69,.99])};function Xx(e){if(e)return Jx(e)?ta(e):Array.isArray(e)?e.map(Xx):Yx[e]}function h1(e,t,n,{delay:s=0,duration:r,repeat:a=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=Xx(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function f1(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const Zx=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,p1=1e-7,m1=12;function g1(e,t,n,s,r){let a,o,l=0;do o=t+(n-t)/2,a=Zx(o,s,r)-e,a>0?n=o:t=o;while(Math.abs(a)>p1&&++l<m1);return o}function oi(e,t,n,s){if(e===t&&n===s)return $e;const r=a=>g1(a,0,1,e,n);return a=>a===0||a===1?a:Zx(r(a),t,s)}const x1=oi(.42,0,1,1),y1=oi(0,0,.58,1),e0=oi(.42,0,.58,1),v1=e=>Array.isArray(e)&&typeof e[0]!="number",t0=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,n0=e=>t=>1-e(1-t),Kd=e=>1-Math.sin(Math.acos(e)),s0=n0(Kd),b1=t0(Kd),r0=oi(.33,1.53,.69,.99),Jd=n0(r0),w1=t0(Jd),j1=e=>(e*=2)<1?.5*Jd(e):.5*(2-Math.pow(2,-10*(e-1))),S1={linear:$e,easeIn:x1,easeInOut:e0,easeOut:y1,circIn:Kd,circInOut:b1,circOut:s0,backIn:Jd,backInOut:w1,backOut:r0,anticipate:j1},Lf=e=>{if(Array.isArray(e)){Gd(e.length===4);const[t,n,s,r]=e;return oi(t,n,s,r)}else if(typeof e=="string")return S1[e];return e},Qd=(e,t)=>n=>!!(ai(n)&&kw.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),a0=(e,t,n)=>s=>{if(!ai(s))return s;const[r,a,o,l]=s.match(ml);return{[e]:parseFloat(r),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},N1=e=>Gn(0,255,e),Zl={...Is,transform:e=>Math.round(N1(e))},vs={test:Qd("rgb","red"),parse:a0("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Zl.transform(e)+", "+Zl.transform(t)+", "+Zl.transform(n)+", "+fa(ha.transform(s))+")"};function k1(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const gu={test:Qd("#"),parse:k1,transform:vs.transform},ur={test:Qd("hsl","hue"),parse:a0("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+sn.transform(fa(t))+", "+sn.transform(fa(n))+", "+fa(ha.transform(s))+")"},lt={test:e=>vs.test(e)||gu.test(e)||ur.test(e),parse:e=>vs.test(e)?vs.parse(e):ur.test(e)?ur.parse(e):gu.parse(e),transform:e=>ai(e)?e:e.hasOwnProperty("red")?vs.transform(e):ur.transform(e)},Pe=(e,t,n)=>-n*e+n*t+e;function ec(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _1({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,a=0,o=0;if(!t)r=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=ec(c,l,e+1/3),a=ec(c,l,e),o=ec(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}const tc=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},P1=[gu,vs,ur],T1=e=>P1.find(t=>t.test(e));function $f(e){const t=T1(e);let n=t.parse(e);return t===ur&&(n=_1(n)),n}const i0=(e,t)=>{const n=$f(e),s=$f(t),r={...n};return a=>(r.red=tc(n.red,s.red,a),r.green=tc(n.green,s.green,a),r.blue=tc(n.blue,s.blue,a),r.alpha=Pe(n.alpha,s.alpha,a),vs.transform(r))};function C1(e){var t,n;return isNaN(e)&&ai(e)&&(((t=e.match(ml))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Rx))===null||n===void 0?void 0:n.length)||0)>0}const o0={regex:Sw,countKey:"Vars",token:"${v}",parse:$e},l0={regex:Rx,countKey:"Colors",token:"${c}",parse:lt.parse},c0={regex:ml,countKey:"Numbers",token:"${n}",parse:Is.parse};function nc(e,{regex:t,countKey:n,token:s,parse:r}){const a=e.tokenised.match(t);a&&(e["num"+n]=a.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...a.map(r)))}function Io(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&nc(n,o0),nc(n,l0),nc(n,c0),n}function u0(e){return Io(e).values}function d0(e){const{values:t,numColors:n,numVars:s,tokenised:r}=Io(e),a=t.length;return o=>{let l=r;for(let c=0;c<a;c++)c<s?l=l.replace(o0.token,o[c]):c<s+n?l=l.replace(l0.token,lt.transform(o[c])):l=l.replace(c0.token,fa(o[c]));return l}}const E1=e=>typeof e=="number"?0:e;function A1(e){const t=u0(e);return d0(e)(t.map(E1))}const Kn={test:C1,parse:u0,createTransformer:d0,getAnimatableNone:A1},h0=(e,t)=>n=>`${n>0?t:e}`;function f0(e,t){return typeof e=="number"?n=>Pe(e,t,n):lt.test(e)?i0(e,t):e.startsWith("var(")?h0(e,t):m0(e,t)}const p0=(e,t)=>{const n=[...e],s=n.length,r=e.map((a,o)=>f0(a,t[o]));return a=>{for(let o=0;o<s;o++)n[o]=r[o](a);return n}},R1=(e,t)=>{const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=f0(e[r],t[r]));return r=>{for(const a in s)n[a]=s[a](r);return n}},m0=(e,t)=>{const n=Kn.createTransformer(t),s=Io(e),r=Io(t);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?Vn(p0(s.values,r.values),n):h0(e,t)},Fa=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Df=(e,t)=>n=>Pe(e,t,n);function I1(e){return typeof e=="number"?Df:typeof e=="string"?lt.test(e)?i0:m0:Array.isArray(e)?p0:typeof e=="object"?R1:Df}function O1(e,t,n){const s=[],r=n||I1(e[0]),a=e.length-1;for(let o=0;o<a;o++){let l=r(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||$e:t;l=Vn(c,l)}s.push(l)}return s}function g0(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const a=e.length;if(Gd(a===t.length),a===1)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=O1(t,s,r),l=o.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=Fa(e[d],e[d+1],u);return o[d](h)};return n?u=>c(Gn(e[0],e[a-1],u)):c}function L1(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=Fa(0,t,s);e.push(Pe(n,1,r))}}function $1(e){const t=[0];return L1(t,e.length-1),t}function D1(e,t){return e.map(n=>n*t)}function M1(e,t){return e.map(()=>t||e0).splice(0,e.length-1)}function Oo({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=v1(s)?s.map(Lf):Lf(s),a={done:!1,value:t[0]},o=D1(n&&n.length===t.length?n:$1(t),e),l=g0(o,t,{ease:Array.isArray(r)?r:M1(t,r)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}function x0(e,t){return t?e*(1e3/t):0}const z1=5;function y0(e,t,n){const s=Math.max(t-z1,0);return x0(n-e(s),t-s)}const sc=.001,F1=.01,U1=10,q1=.05,V1=1;function B1({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let r,a,o=1-t;o=Gn(q1,V1,o),e=Gn(F1,U1,mn(e)),o<1?(r=u=>{const d=u*o,h=d*e,f=d-n,p=xu(u,o),g=Math.exp(-h);return sc-f/p*g},a=u=>{const h=u*o*e,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-h),v=xu(Math.pow(u,2),o);return(-r(u)+sc>0?-1:1)*((f-p)*g)/v}):(r=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-sc+d*h},a=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=W1(r,a,l);if(e=Ss(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:e}}}const H1=12;function W1(e,t,n){let s=n;for(let r=1;r<H1;r++)s=s-e(s)/t(s);return s}function xu(e,t){return e*Math.sqrt(1-t*t)}const G1=["duration","bounce"],K1=["stiffness","damping","mass"];function Mf(e,t){return t.some(n=>e[n]!==void 0)}function J1(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Mf(e,K1)&&Mf(e,G1)){const n=B1(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function v0({keyframes:e,restDelta:t,restSpeed:n,...s}){const r=e[0],a=e[e.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=J1({...s,velocity:-mn(s.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*u)),v=a-r,b=mn(Math.sqrt(l/u)),x=Math.abs(v)<5;n||(n=x?.01:2),t||(t=x?.005:.5);let m;if(g<1){const y=xu(b,g);m=w=>{const N=Math.exp(-g*b*w);return a-N*((p+g*b*v)/y*Math.sin(y*w)+v*Math.cos(y*w))}}else if(g===1)m=y=>a-Math.exp(-b*y)*(v+(p+b*v)*y);else{const y=b*Math.sqrt(g*g-1);m=w=>{const N=Math.exp(-g*b*w),T=Math.min(y*w,300);return a-N*((p+g*b*v)*Math.sinh(T)+y*v*Math.cosh(T))/y}}return{calculatedDuration:f&&d||null,next:y=>{const w=m(y);if(f)o.done=y>=d;else{let N=p;y!==0&&(g<1?N=y0(m,y,w):N=0);const T=Math.abs(N)<=n,E=Math.abs(a-w)<=t;o.done=T&&E}return o.value=o.done?a:w,o}}}function zf({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=S=>l!==void 0&&S<l||c!==void 0&&S>c,g=S=>l===void 0?c:c===void 0||Math.abs(l-S)<Math.abs(c-S)?l:c;let v=n*t;const b=h+v,x=o===void 0?b:o(b);x!==b&&(v=x-h);const m=S=>-v*Math.exp(-S/s),y=S=>x+m(S),w=S=>{const R=m(S),_=y(S);f.done=Math.abs(R)<=u,f.value=f.done?x:_};let N,T;const E=S=>{p(f.value)&&(N=S,T=v0({keyframes:[f.value,g(f.value)],velocity:y0(y,S,f.value),damping:r,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:S=>{let R=!1;return!T&&N===void 0&&(R=!0,w(S),E(S)),N!==void 0&&S>N?T.next(S-N):(!R&&w(S),f)}}}const Q1=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ye.update(t,!0),stop:()=>bn(t),now:()=>rt.isProcessing?rt.timestamp:performance.now()}},Ff=2e4;function Uf(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Ff;)t+=n,s=e.next(t);return t>=Ff?1/0:t}const Y1={decay:zf,inertia:zf,tween:Oo,keyframes:Oo,spring:v0};function Lo({autoplay:e=!0,delay:t=0,driver:n=Q1,keyframes:s,type:r="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let p=1,g=!1,v,b;const x=()=>{b=new Promise(U=>{v=U})};x();let m;const y=Y1[r]||Oo;let w;y!==Oo&&typeof s[0]!="number"&&(w=g0([0,100],s,{clamp:!1}),s=[0,100]);const N=y({...f,keyframes:s});let T;l==="mirror"&&(T=y({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let E="idle",S=null,R=null,_=null;N.calculatedDuration===null&&a&&(N.calculatedDuration=Uf(N));const{calculatedDuration:I}=N;let L=1/0,M=1/0;I!==null&&(L=I+o,M=L*(a+1)-o);let z=0;const H=U=>{if(R===null)return;p>0&&(R=Math.min(R,U)),p<0&&(R=Math.min(U-M/p,R)),S!==null?z=S:z=Math.round(U-R)*p;const Z=z-t*(p>=0?1:-1),Ie=p>=0?Z<0:Z>M;z=Math.max(Z,0),E==="finished"&&S===null&&(z=M);let oe=z,Oe=N;if(a){const rn=Math.min(z,M)/L;let j=Math.floor(rn),O=rn%1;!O&&rn>=1&&(O=1),O===1&&j--,j=Math.min(j,a+1),!!(j%2)&&(l==="reverse"?(O=1-O,o&&(O-=o/L)):l==="mirror"&&(Oe=T)),oe=Gn(0,1,O)*L}const ke=Ie?{done:!1,value:s[0]}:Oe.next(oe);w&&(ke.value=w(ke.value));let{done:ft}=ke;!Ie&&I!==null&&(ft=p>=0?z>=M:z<=0);const ss=S===null&&(E==="finished"||E==="running"&&ft);return h&&h(ke.value),ss&&P(),ke},G=()=>{m&&m.stop(),m=void 0},J=()=>{E="idle",G(),v(),x(),R=_=null},P=()=>{E="finished",d&&d(),G(),v()},F=()=>{if(g)return;m||(m=n(H));const U=m.now();c&&c(),S!==null?R=U-S:(!R||E==="finished")&&(R=U),E==="finished"&&x(),_=R,S=null,E="running",m.start()};e&&F();const K={then(U,Z){return b.then(U,Z)},get time(){return mn(z)},set time(U){U=Ss(U),z=U,S!==null||!m||p===0?S=U:R=m.now()-U/p},get duration(){const U=N.calculatedDuration===null?Uf(N):N.calculatedDuration;return mn(U)},get speed(){return p},set speed(U){U===p||!m||(p=U,K.time=mn(z))},get state(){return E},play:F,pause:()=>{E="paused",S=z},stop:()=>{g=!0,E!=="idle"&&(E="idle",u&&u(),J())},cancel:()=>{_!==null&&H(_),J()},complete:()=>{E="finished"},sample:U=>(R=0,H(U))};return K}function X1(e){let t;return()=>(t===void 0&&(t=e()),t)}const Z1=X1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ej=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ii=10,tj=2e4,nj=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Qx(t.ease);function sj(e,t,{onUpdate:n,onComplete:s,...r}){if(!(Z1()&&ej.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(y=>{l=y})};d();let{keyframes:h,duration:f=300,ease:p,times:g}=r;if(nj(t,r)){const y=Lo({...r,repeat:0,delay:0});let w={done:!1,value:h[0]};const N=[];let T=0;for(;!w.done&&T<tj;)w=y.sample(T),N.push(w.value),T+=Ii;g=void 0,h=N,f=T-Ii,p="linear"}const v=h1(e.owner.current,t,h,{...r,duration:f,ease:p,times:g}),b=()=>{u=!1,v.cancel()},x=()=>{u=!0,ye.update(b),l(),d()};return v.onfinish=()=>{u||(e.set(f1(h,r)),s&&s(),x())},{then(y,w){return c.then(y,w)},attachTimeline(y){return v.timeline=y,v.onfinish=null,$e},get time(){return mn(v.currentTime||0)},set time(y){v.currentTime=Ss(y)},get speed(){return v.playbackRate},set speed(y){v.playbackRate=y},get duration(){return mn(f)},play:()=>{o||(v.play(),bn(b))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:y}=v;if(y){const w=Lo({...r,autoplay:!1});e.setWithVelocity(w.sample(y-Ii).value,w.sample(y).value,Ii)}x()},complete:()=>{u||v.finish()},cancel:x}}function rj({keyframes:e,delay:t,onUpdate:n,onComplete:s}){const r=()=>(n&&n(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:$e,pause:$e,stop:$e,then:a=>(a(),Promise.resolve()),cancel:$e,complete:$e});return t?Lo({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const aj={type:"spring",stiffness:500,damping:25,restSpeed:10},ij=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),oj={type:"keyframes",duration:.8},lj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cj=(e,{keyframes:t})=>t.length>2?oj:Rs.has(e)?e.startsWith("scale")?ij(t[1]):aj:lj,yu=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Kn.test(t)||t==="0")&&!t.startsWith("url(")),uj=new Set(["brightness","contrast","saturate","opacity"]);function dj(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(ml)||[];if(!s)return e;const r=n.replace(s,"");let a=uj.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+r+")"}const hj=/([a-z-]*)\(.*?\)/g,vu={...Kn,getAnimatableNone:e=>{const t=e.match(hj);return t?t.map(dj).join(" "):e}},fj={...Ix,color:lt,backgroundColor:lt,outlineColor:lt,fill:lt,stroke:lt,borderColor:lt,borderTopColor:lt,borderRightColor:lt,borderBottomColor:lt,borderLeftColor:lt,filter:vu,WebkitFilter:vu},Yd=e=>fj[e];function b0(e,t){let n=Yd(e);return n!==vu&&(n=Kn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const w0=e=>/^0[^.\s]+$/.test(e);function pj(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||w0(e)}function mj(e,t,n,s){const r=yu(t,n);let a;Array.isArray(n)?a=[...n]:a=[null,n];const o=s.from!==void 0?s.from:e.get();let l;const c=[];for(let u=0;u<a.length;u++)a[u]===null&&(a[u]=u===0?o:a[u-1]),pj(a[u])&&c.push(u),typeof a[u]=="string"&&a[u]!=="none"&&a[u]!=="0"&&(l=a[u]);if(r&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];a[d]=b0(t,l)}return a}function gj({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Xd(e,t){return e[t]||e.default||e}const xj={skipAnimations:!1},Zd=(e,t,n,s={})=>r=>{const a=Xd(s,e)||{},o=a.delay||s.delay||0;let{elapsed:l=0}=s;l=l-Ss(o);const c=mj(t,e,n,a),u=c[0],d=c[c.length-1],h=yu(e,u),f=yu(e,d);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...a,delay:-l,onUpdate:g=>{t.set(g),a.onUpdate&&a.onUpdate(g)},onComplete:()=>{r(),a.onComplete&&a.onComplete()}};if(gj(a)||(p={...p,...cj(e,p)}),p.duration&&(p.duration=Ss(p.duration)),p.repeatDelay&&(p.repeatDelay=Ss(p.repeatDelay)),!h||!f||d1.current||a.type===!1||xj.skipAnimations)return rj(p);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=sj(t,e,p);if(g)return g}return Lo(p)};function $o(e){return!!(wt(e)&&e.add)}const j0=e=>/^\-?\d*\.?\d+$/.test(e);function eh(e,t){e.indexOf(t)===-1&&e.push(t)}function th(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class nh{constructor(){this.subscriptions=[]}add(t){return eh(this.subscriptions,t),()=>th(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let a=0;a<r;a++){const o=this.subscriptions[a];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yj=e=>!isNaN(parseFloat(e));class vj{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:a,timestamp:o}=rt;this.lastUpdated!==o&&(this.timeDelta=a,this.lastUpdated=o,ye.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ye.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=yj(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new nh);const s=this.events[t].add(n);return t==="change"?()=>{s(),ye.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?x0(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Er(e,t){return new vj(e,t)}const S0=e=>t=>t.test(e),bj={test:e=>e==="auto",parse:e=>e},N0=[Is,ne,sn,kn,Pw,_w,bj],Gr=e=>N0.find(S0(e)),wj=[...N0,lt,Kn],jj=e=>wj.find(S0(e));function Sj(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Er(n))}function Nj(e,t){const n=xl(e,t);let{transitionEnd:s={},transition:r={},...a}=n?e.makeTargetAnimatable(n,!1):{};a={...a,...s};for(const o in a){const l=Uw(a[o]);Sj(e,o,l)}}function kj(e,t,n){var s,r;const a=Object.keys(t).filter(l=>!e.hasValue(l)),o=a.length;if(o)for(let l=0;l<o;l++){const c=a[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=n[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&r!==void 0?r:t[c]),d!=null&&(typeof d=="string"&&(j0(d)||w0(d))?d=parseFloat(d):!jj(d)&&Kn.test(u)&&(d=b0(c,u)),e.addValue(c,Er(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function _j(e,t){return t?(t[e]||t.default||t).from:void 0}function Pj(e,t,n){const s={};for(const r in e){const a=_j(r,t);if(a!==void 0)s[r]=a;else{const o=n.getValue(r);o&&(s[r]=o.get())}}return s}function Tj({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function Cj(e,t){const n=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}else return n!==t}function k0(e,t,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(a=s);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const f=e.getValue(h),p=l[h];if(!f||p===void 0||d&&Tj(d,h))continue;const g={delay:n,elapsed:0,...Xd(a||{},h)};if(window.HandoffAppearAnimations){const x=e.getProps()[_x];if(x){const m=window.HandoffAppearAnimations(x,h,f,ye);m!==null&&(g.elapsed=m,g.isHandoff=!0)}}let v=!g.isHandoff&&!Cj(f,p);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(Zd(h,f,p,e.shouldReduceMotion&&Rs.has(h)?{type:!1}:g));const b=f.animation;$o(c)&&(c.add(h),b.then(()=>c.remove(h))),u.push(b)}return o&&Promise.all(u).then(()=>{o&&Nj(e,o)}),u}function bu(e,t,n={}){const s=xl(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const a=s?()=>Promise.all(k0(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return Ej(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(n.delay)])}function Ej(e,t,n=0,s=0,r=1,a){const o=[],l=(e.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(e.variantChildren).sort(Aj).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(bu(u,t,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Aj(e,t){return e.sortNodePosition(t)}function Rj(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(a=>bu(e,a,n));s=Promise.all(r)}else if(typeof t=="string")s=bu(e,t,n);else{const r=typeof t=="function"?xl(e,t,n.custom):t;s=Promise.all(k0(e,r,n))}return s.then(()=>e.notify("AnimationComplete",t))}const Ij=[...Dd].reverse(),Oj=Dd.length;function Lj(e){return t=>Promise.all(t.map(({animation:n,options:s})=>Rj(e,n,s)))}function $j(e){let t=Lj(e);const n=Mj();let s=!0;const r=(c,u)=>{const d=xl(e,u);if(d){const{transition:h,transitionEnd:f,...p}=d;c={...c,...p,...f}}return c};function a(c){t=c(e)}function o(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],p=new Set;let g={},v=1/0;for(let x=0;x<Oj;x++){const m=Ij[x],y=n[m],w=d[m]!==void 0?d[m]:h[m],N=Ma(w),T=m===u?y.isActive:null;T===!1&&(v=x);let E=w===h[m]&&w!==d[m]&&N;if(E&&s&&e.manuallyAnimateOnMount&&(E=!1),y.protectedKeys={...g},!y.isActive&&T===null||!w&&!y.prevProp||fl(w)||typeof w=="boolean")continue;let R=Dj(y.prevProp,w)||m===u&&y.isActive&&!E&&N||x>v&&N,_=!1;const I=Array.isArray(w)?w:[w];let L=I.reduce(r,{});T===!1&&(L={});const{prevResolvedValues:M={}}=y,z={...M,...L},H=G=>{R=!0,p.has(G)&&(_=!0,p.delete(G)),y.needsAnimating[G]=!0};for(const G in z){const J=L[G],P=M[G];if(g.hasOwnProperty(G))continue;let F=!1;Ro(J)&&Ro(P)?F=!Kx(J,P):F=J!==P,F?J!==void 0?H(G):p.add(G):J!==void 0&&p.has(G)?H(G):y.protectedKeys[G]=!0}y.prevProp=w,y.prevResolvedValues=L,y.isActive&&(g={...g,...L}),s&&e.blockInitialAnimation&&(R=!1),R&&(!E||_)&&f.push(...I.map(G=>({animation:G,options:{type:m,...c}})))}if(p.size){const x={};p.forEach(m=>{const y=e.getBaseTarget(m);y!==void 0&&(x[m]=y)}),f.push({animation:x})}let b=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(b=!1),s=!1,b?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),n[c].isActive=u;const f=o(d,c);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n}}function Dj(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Kx(t,e):!1}function as(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Mj(){return{animate:as(!0),whileInView:as(),whileHover:as(),whileTap:as(),whileDrag:as(),whileFocus:as(),exit:as()}}class zj extends ns{constructor(t){super(t),t.animationState||(t.animationState=$j(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),fl(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Fj=0;class Uj extends ns{constructor(){super(...arguments),this.id=Fj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&a.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const qj={animation:{Feature:zj},exit:{Feature:Uj}},qf=(e,t)=>Math.abs(e-t);function Vj(e,t){const n=qf(e.x,t.x),s=qf(e.y,t.y);return Math.sqrt(n**2+s**2)}class _0{constructor(t,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ac(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=Vj(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=h,{timestamp:v}=rt;this.history.push({...g,timestamp:v});const{onStart:b,onMove:x}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=rc(f,this.transformPagePoint),ye.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=ac(h.type==="pointercancel"?this.lastMoveEventInfo:rc(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,b),g&&g(h,b)},!Vx(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const o=gl(t),l=rc(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=rt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,ac(l,this.history)),this.removeListeners=Vn(pn(this.contextWindow,"pointermove",this.handlePointerMove),pn(this.contextWindow,"pointerup",this.handlePointerUp),pn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),bn(this.updatePoint)}}function rc(e,t){return t?{point:t(e.point)}:e}function Vf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ac({point:e},t){return{point:e,delta:Vf(e,P0(t)),offset:Vf(e,Bj(t)),velocity:Hj(t,.1)}}function Bj(e){return e[0]}function P0(e){return e[e.length-1]}function Hj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=P0(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>Ss(t)));)n--;if(!s)return{x:0,y:0};const a=mn(r.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(r.x-s.x)/a,y:(r.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ct(e){return e.max-e.min}function wu(e,t=0,n=.01){return Math.abs(e-t)<=n}function Bf(e,t,n,s=.5){e.origin=s,e.originPoint=Pe(t.min,t.max,e.origin),e.scale=Ct(n)/Ct(t),(wu(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Pe(n.min,n.max,e.origin)-e.originPoint,(wu(e.translate)||isNaN(e.translate))&&(e.translate=0)}function pa(e,t,n,s){Bf(e.x,t.x,n.x,s?s.originX:void 0),Bf(e.y,t.y,n.y,s?s.originY:void 0)}function Hf(e,t,n){e.min=n.min+t.min,e.max=e.min+Ct(t)}function Wj(e,t,n){Hf(e.x,t.x,n.x),Hf(e.y,t.y,n.y)}function Wf(e,t,n){e.min=t.min-n.min,e.max=e.min+Ct(t)}function ma(e,t,n){Wf(e.x,t.x,n.x),Wf(e.y,t.y,n.y)}function Gj(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Pe(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Pe(n,e,s.max):Math.min(e,n)),e}function Gf(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Kj(e,{top:t,left:n,bottom:s,right:r}){return{x:Gf(e.x,n,r),y:Gf(e.y,t,s)}}function Kf(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function Jj(e,t){return{x:Kf(e.x,t.x),y:Kf(e.y,t.y)}}function Qj(e,t){let n=.5;const s=Ct(e),r=Ct(t);return r>s?n=Fa(t.min,t.max-s,e.min):s>r&&(n=Fa(e.min,e.max-r,t.min)),Gn(0,1,n)}function Yj(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const ju=.35;function Xj(e=ju){return e===!1?e=0:e===!0&&(e=ju),{x:Jf(e,"left","right"),y:Jf(e,"top","bottom")}}function Jf(e,t,n){return{min:Qf(e,t),max:Qf(e,n)}}function Qf(e,t){return typeof e=="number"?e:e[t]||0}const Yf=()=>({translate:0,scale:1,origin:0,originPoint:0}),dr=()=>({x:Yf(),y:Yf()}),Xf=()=>({min:0,max:0}),De=()=>({x:Xf(),y:Xf()});function Lt(e){return[e("x"),e("y")]}function T0({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function Zj({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function e2(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function ic(e){return e===void 0||e===1}function Su({scale:e,scaleX:t,scaleY:n}){return!ic(e)||!ic(t)||!ic(n)}function us(e){return Su(e)||C0(e)||e.z||e.rotate||e.rotateX||e.rotateY}function C0(e){return Zf(e.x)||Zf(e.y)}function Zf(e){return e&&e!=="0%"}function Do(e,t,n){const s=e-n,r=t*s;return n+r}function ep(e,t,n,s,r){return r!==void 0&&(e=Do(e,r,s)),Do(e,n,s)+t}function Nu(e,t=0,n=1,s,r){e.min=ep(e.min,t,n,s,r),e.max=ep(e.max,t,n,s,r)}function E0(e,{x:t,y:n}){Nu(e.x,t.translate,t.scale,t.originPoint),Nu(e.y,n.translate,n.scale,n.originPoint)}function t2(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let a,o;for(let l=0;l<r;l++){a=n[l],o=a.projectionDelta;const c=a.instance;c&&c.style&&c.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&hr(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,E0(e,o)),s&&us(a.latestValues)&&hr(e,a.latestValues))}t.x=tp(t.x),t.y=tp(t.y)}function tp(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Tn(e,t){e.min=e.min+t,e.max=e.max+t}function np(e,t,[n,s,r]){const a=t[r]!==void 0?t[r]:.5,o=Pe(e.min,e.max,a);Nu(e,t[n],t[s],o,t.scale)}const n2=["x","scaleX","originX"],s2=["y","scaleY","originY"];function hr(e,t){np(e.x,t,n2),np(e.y,t,s2)}function A0(e,t){return T0(e2(e.getBoundingClientRect(),t))}function r2(e,t,n){const s=A0(e,n),{scroll:r}=t;return r&&(Tn(s.x,r.offset.x),Tn(s.y,r.offset.y)),s}const R0=({current:e})=>e?e.ownerDocument.defaultView:null,a2=new WeakMap;class i2{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=De(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gl(d,"page").point)},a=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Hx(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lt(b=>{let x=this.getAxisMotionValue(b).get()||0;if(sn.test(x)){const{projection:m}=this.visualElement;if(m&&m.layout){const y=m.layout.layoutBox[b];y&&(x=Ct(y)*(parseFloat(x)/100))}}this.originPoint[b]=x}),g&&ye.update(()=>g(d,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=h;if(p&&this.currentDirection===null){this.currentDirection=o2(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),v&&v(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Lt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new _0(t,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:R0(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&ye.update(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!Oi(t,r,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=Gj(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&cr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=Kj(r.layoutBox,n):this.constraints=!1,this.elastic=Xj(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Lt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Yj(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!cr(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=r2(s,r.root,this.visualElement.getTransformPagePoint());let o=Jj(r.layout.layoutBox,a);if(n){const l=n(Zj(o));this.hasMutatedConstraints=!!l,l&&(o=T0(l))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Lt(d=>{if(!Oi(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,p=r?40:1e7,g={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(Zd(t,s,0,n))}stopAnimation(){Lt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Lt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Lt(n=>{const{drag:s}=this.getProps();if(!Oi(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[n];a.set(t[n]-Pe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!cr(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Lt(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();r[o]=Qj({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Lt(o=>{if(!Oi(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Pe(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;a2.set(this.visualElement,this);const t=this.visualElement.current,n=pn(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();cr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const o=hn(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Lt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:o=ju,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Oi(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function o2(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class l2 extends ns{constructor(t){super(t),this.removeGroupControls=$e,this.removeListeners=$e,this.controls=new i2(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$e}unmount(){this.removeGroupControls(),this.removeListeners()}}const sp=e=>(t,n)=>{e&&ye.update(()=>e(t,n))};class c2 extends ns{constructor(){super(...arguments),this.removePointerDownListener=$e}onPointerDown(t){this.session=new _0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:R0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:sp(t),onStart:sp(n),onMove:s,onEnd:(a,o)=>{delete this.session,r&&ye.update(()=>r(a,o))}}}mount(){this.removePointerDownListener=pn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function u2(){const e=k.useContext(dl);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=k.useId();return k.useEffect(()=>s(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const so={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rp(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Kr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ne.test(e))e=parseFloat(e);else return e;const n=rp(e,t.target.x),s=rp(e,t.target.y);return`${n}% ${s}%`}},d2={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=Kn.parse(e);if(r.length>5)return s;const a=Kn.createTransformer(e),o=typeof r[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;r[0+o]/=l,r[1+o]/=c;const u=Pe(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),a(r)}};class h2 extends Ko.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:a}=t;vw(f2),a&&(n.group&&n.group.add(a),s&&s.register&&r&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),so.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:a}=this.props,o=s.projection;return o&&(o.isPresent=a,r||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||ye.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function I0(e){const[t,n]=u2(),s=k.useContext(zd);return Ko.createElement(h2,{...e,layoutGroup:s,switchLayoutGroup:k.useContext(Tx),isPresent:t,safeToRemove:n})}const f2={borderRadius:{...Kr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kr,borderTopRightRadius:Kr,borderBottomLeftRadius:Kr,borderBottomRightRadius:Kr,boxShadow:d2},O0=["TopLeft","TopRight","BottomLeft","BottomRight"],p2=O0.length,ap=e=>typeof e=="string"?parseFloat(e):e,ip=e=>typeof e=="number"||ne.test(e);function m2(e,t,n,s,r,a){r?(e.opacity=Pe(0,n.opacity!==void 0?n.opacity:1,g2(s)),e.opacityExit=Pe(t.opacity!==void 0?t.opacity:1,0,x2(s))):a&&(e.opacity=Pe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<p2;o++){const l=`border${O0[o]}Radius`;let c=op(t,l),u=op(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||ip(c)===ip(u)?(e[l]=Math.max(Pe(ap(c),ap(u),s),0),(sn.test(u)||sn.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Pe(t.rotate||0,n.rotate||0,s))}function op(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const g2=L0(0,.5,s0),x2=L0(.5,.95,$e);function L0(e,t,n){return s=>s<e?0:s>t?1:n(Fa(e,t,s))}function lp(e,t){e.min=t.min,e.max=t.max}function Ot(e,t){lp(e.x,t.x),lp(e.y,t.y)}function cp(e,t,n,s,r){return e-=t,e=Do(e,1/n,s),r!==void 0&&(e=Do(e,1/r,s)),e}function y2(e,t=0,n=1,s=.5,r,a=e,o=e){if(sn.test(t)&&(t=parseFloat(t),t=Pe(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Pe(a.min,a.max,s);e===a&&(l-=t),e.min=cp(e.min,t,n,l,r),e.max=cp(e.max,t,n,l,r)}function up(e,t,[n,s,r],a,o){y2(e,t[n],t[s],t[r],t.scale,a,o)}const v2=["x","scaleX","originX"],b2=["y","scaleY","originY"];function dp(e,t,n,s){up(e.x,t,v2,n?n.x:void 0,s?s.x:void 0),up(e.y,t,b2,n?n.y:void 0,s?s.y:void 0)}function hp(e){return e.translate===0&&e.scale===1}function $0(e){return hp(e.x)&&hp(e.y)}function w2(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function D0(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function fp(e){return Ct(e.x)/Ct(e.y)}class j2{constructor(){this.members=[]}add(t){eh(this.members,t),t.scheduleRender()}remove(t){if(th(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pp(e,t,n){let s="";const r=e.x.translate/t.x,a=e.y.translate/t.y;if((r||a)&&(s=`translate3d(${r}px, ${a}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const S2=(e,t)=>e.depth-t.depth;class N2{constructor(){this.children=[],this.isDirty=!1}add(t){eh(this.children,t),this.isDirty=!0}remove(t){th(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(S2),this.isDirty=!1,this.children.forEach(t)}}function k2(e,t){const n=performance.now(),s=({timestamp:r})=>{const a=r-n;a>=t&&(bn(s),e(a-t))};return ye.read(s,!0),()=>bn(s)}function _2(e){window.MotionDebug&&window.MotionDebug.record(e)}function P2(e){return e instanceof SVGElement&&e.tagName!=="svg"}function T2(e,t,n){const s=wt(e)?e:Er(e);return s.start(Zd("",s,t,n)),s.animation}const mp=["","X","Y","Z"],C2={visibility:"hidden"},gp=1e3;let E2=0;const ds={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function M0({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},l=t==null?void 0:t()){this.id=E2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ds.totalNodes=ds.resolvedTargetDeltas=ds.recalculatedProjection=0,this.nodes.forEach(I2),this.nodes.forEach(M2),this.nodes.forEach(z2),this.nodes.forEach(O2),_2(ds)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new N2)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new nh),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=P2(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=k2(f,250),so.hasAnimatedSinceResize&&(so.hasAnimatedSinceResize=!1,this.nodes.forEach(yp))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||B2,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=d.getProps(),m=!this.targetLayout||!D0(this.targetLayout,g)||p,y=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const w={...Xd(v,"layout"),onPlay:b,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||yp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,bn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(F2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xp);return}this.isUpdating||this.nodes.forEach($2),this.isUpdating=!1,this.nodes.forEach(D2),this.nodes.forEach(A2),this.nodes.forEach(R2),this.clearAllSnapshots();const l=performance.now();rt.delta=Gn(0,1e3/60,l-rt.timestamp),rt.timestamp=l,rt.isProcessing=!0,Ql.update.process(rt),Ql.preRender.process(rt),Ql.render.process(rt),rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(L2),this.sharedNodes.forEach(U2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=De(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!$0(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||us(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),H2(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return De();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Tn(l.x,c.offset.x),Tn(l.y,c.offset.y)),l}removeElementScroll(o){const l=De();Ot(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){Ot(l,o);const{scroll:f}=this.root;f&&(Tn(l.x,-f.offset.x),Tn(l.y,-f.offset.y))}Tn(l.x,d.offset.x),Tn(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=De();Ot(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&hr(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),us(d.latestValues)&&hr(c,d.latestValues)}return us(this.latestValues)&&hr(c,this.latestValues),c}removeTransform(o){const l=De();Ot(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!us(u.latestValues))continue;Su(u.latestValues)&&u.updateSnapshot();const d=De(),h=u.measurePageBox();Ot(d,h),dp(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return us(this.latestValues)&&dp(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=rt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),ma(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=De(),this.targetWithTransforms=De()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Wj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ot(this.target,this.layout.layoutBox),E0(this.target,this.targetDelta)):Ot(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),ma(this.relativeTargetOrigin,this.target,p.target),Ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ds.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Su(this.parent.latestValues)||C0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===rt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ot(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;t2(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=dr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=dr(),this.projectionDeltaWithTransform=dr());const v=this.projectionTransform;pa(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=pp(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),ds.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=dr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=De(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,b=this.getStack(),x=!b||b.members.length<=1,m=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(V2));this.animationProgress=0;let y;this.mixTargetDelta=w=>{const N=w/1e3;vp(h.x,o.x,N),vp(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ma(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),q2(this.relativeTarget,this.relativeTargetOrigin,f,N),y&&w2(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=De()),Ot(y,this.relativeTarget)),v&&(this.animationValues=d,m2(d,u,this.latestValues,N,m,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(bn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ye.update(()=>{so.hasAnimatedSinceResize=!0,this.currentAnimation=T2(0,gp,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gp),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&z0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||De();const h=Ct(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Ct(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ot(l,c),hr(l,d),pa(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new j2),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<mp.length;d++){const h="rotate"+mp[d];c[h]&&(u[h]=c[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return C2;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=no(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=no(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!us(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=pp(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y:g}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Eo){if(f[v]===void 0)continue;const{correct:b,applyTo:x}=Eo[v],m=u.transform==="none"?f[v]:b(f[v],h);if(x){const y=x.length;for(let w=0;w<y;w++)u[x[w]]=m}else u[v]=m}return this.options.layoutId&&(u.pointerEvents=h===this?no(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(xp),this.root.sharedNodes.clear()}}}function A2(e){e.updateLayout()}function R2(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:a}=e.options,o=n.source!==e.layout.source;a==="size"?Lt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=Ct(f);f.min=s[h].min,f.max=f.min+p}):z0(a,n.layoutBox,s)&&Lt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=Ct(s[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=dr();pa(l,s,n.layoutBox);const c=dr();o?pa(c,e.applyTransform(r,!0),n.measuredBox):pa(c,s,n.layoutBox);const u=!$0(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=De();ma(g,n.layoutBox,f.layoutBox);const v=De();ma(v,s,p.layoutBox),D0(g,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function I2(e){ds.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function O2(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function L2(e){e.clearSnapshot()}function xp(e){e.clearMeasurements()}function $2(e){e.isLayoutDirty=!1}function D2(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function yp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function M2(e){e.resolveTargetDelta()}function z2(e){e.calcProjection()}function F2(e){e.resetRotation()}function U2(e){e.removeLeadSnapshot()}function vp(e,t,n){e.translate=Pe(t.translate,0,n),e.scale=Pe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bp(e,t,n,s){e.min=Pe(t.min,n.min,s),e.max=Pe(t.max,n.max,s)}function q2(e,t,n,s){bp(e.x,t.x,n.x,s),bp(e.y,t.y,n.y,s)}function V2(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const B2={duration:.45,ease:[.4,0,.1,1]},wp=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),jp=wp("applewebkit/")&&!wp("chrome/")?Math.round:$e;function Sp(e){e.min=jp(e.min),e.max=jp(e.max)}function H2(e){Sp(e.x),Sp(e.y)}function z0(e,t,n){return e==="position"||e==="preserve-aspect"&&!wu(fp(t),fp(n),.2)}const W2=M0({attachResizeListener:(e,t)=>hn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),oc={current:void 0},F0=M0({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!oc.current){const e=new W2({});e.mount(window),e.setOptions({layoutScroll:!0}),oc.current=e}return oc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),G2={pan:{Feature:c2},drag:{Feature:l2,ProjectionNode:F0,MeasureLayout:I0}},K2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function J2(e){const t=K2.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function ku(e,t,n=1){const[s,r]=J2(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const o=a.trim();return j0(o)?parseFloat(o):o}else return pu(r)?ku(r,t,n+1):r}function Q2(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const a=r.get();if(!pu(a))return;const o=ku(a,s);o&&r.set(o)});for(const r in t){const a=t[r];if(!pu(a))continue;const o=ku(a,s);o&&(t[r]=o,n||(n={}),n[r]===void 0&&(n[r]=a))}return{target:t,transitionEnd:n}}const Y2=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),U0=e=>Y2.has(e),X2=e=>Object.keys(e).some(U0),Np=e=>e===Is||e===ne,kp=(e,t)=>parseFloat(e.split(", ")[t]),_p=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return kp(r[1],t);{const a=s.match(/^matrix\((.+)\)$/);return a?kp(a[1],e):0}},Z2=new Set(["x","y","z"]),eS=ri.filter(e=>!Z2.has(e));function tS(e){const t=[];return eS.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ar={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:_p(4,13),y:_p(5,14)};Ar.translateX=Ar.x;Ar.translateY=Ar.y;const nS=(e,t,n)=>{const s=t.measureViewportBox(),r=t.current,a=getComputedStyle(r),{display:o}=a,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=Ar[u](s,a)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=Ar[u](c,a)}),e},sS=(e,t,n={},s={})=>{t={...t},s={...s};const r=Object.keys(t).filter(U0);let a=[],o=!1;const l=[];if(r.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=Gr(d);const f=t[c];let p;if(Ro(f)){const g=f.length,v=f[0]===null?1:0;d=f[v],h=Gr(d);for(let b=v;b<g&&f[b]!==null;b++)p?Gd(Gr(f[b])===p):p=Gr(f[b])}else p=Gr(f);if(h!==p)if(Np(h)&&Np(p)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&p===ne&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(d===0||f===0)?d===0?u.set(p.transform(d)):t[c]=h.transform(f):(o||(a=tS(e),o=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=nS(t,e,l);return a.length&&a.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),hl&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:t,transitionEnd:s}};function rS(e,t,n,s){return X2(t)?sS(e,t,n,s):{target:t,transitionEnd:s}}const aS=(e,t,n,s)=>{const r=Q2(e,t,s);return t=r.target,s=r.transitionEnd,rS(e,t,n,s)},_u={current:null},q0={current:!1};function iS(){if(q0.current=!0,!!hl)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_u.current=e.matches;e.addListener(t),t()}else _u.current=!1}function oS(e,t,n){const{willChange:s}=t;for(const r in t){const a=t[r],o=n[r];if(wt(a))e.addValue(r,a),$o(s)&&s.add(r);else if(wt(o))e.addValue(r,Er(a,{owner:e})),$o(s)&&s.remove(r);else if(o!==a)if(e.hasValue(r)){const l=e.getValue(r);!l.hasAnimated&&l.set(a)}else{const l=e.getStaticValue(r);e.addValue(r,Er(l!==void 0?l:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Pp=new WeakMap,V0=Object.keys(za),lS=V0.length,Tp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cS=Md.length;class uS{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ye.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=pl(n),this.isVariantNode=Px(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&wt(f)&&(f.set(l[h],!1),$o(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Pp.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),q0.current||iS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_u.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Pp.delete(this.current),this.projection&&this.projection.unmount(),bn(this.notifyUpdate),bn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=Rs.has(t),r=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ye.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),a()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,r,a){let o,l;for(let c=0;c<lS;c++){const u=V0[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:p}=za[u];f&&(o=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&cr(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:a,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):De()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Tp.length;s++){const r=Tp[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a=t["on"+r];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=oS(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<cS;s++){const r=Md[s],a=this.props[r];(Ma(a)||a===!1)&&(n[r]=a)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Er(n,{owner:this}),this.addValue(t,s)),s}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(n=Wd(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!wt(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new nh),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class B0 extends uS{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:r},a){let o=Pj(s,t||{},this);if(r&&(n&&(n=r(n)),s&&(s=r(s)),o&&(o=r(o))),a){kj(this,s,o);const l=aS(this,s,o,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function dS(e){return window.getComputedStyle(e)}class hS extends B0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Rs.has(n)){const s=Yd(n);return s&&s.default||0}else{const s=dS(t),r=(Ax(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return A0(t,n)}build(t,n,s,r){Ud(t,n,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Hd(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;wt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,r){Dx(t,n,s,r)}}class fS extends B0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Rs.has(n)){const s=Yd(n);return s&&s.default||0}return n=Mx.has(n)?n:$d(n),t.getAttribute(n)}measureInstanceViewportBox(){return De()}scrapeMotionValuesFromProps(t,n){return Fx(t,n)}build(t,n,s,r){Vd(t,n,s,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,s,r){zx(t,n,s,r)}mount(t){this.isSVGTag=Bd(t.tagName),super.mount(t)}}const pS=(e,t)=>Fd(e)?new fS(t,{enableHardwareAcceleration:!1}):new hS(t,{enableHardwareAcceleration:!0}),mS={layout:{ProjectionNode:F0,MeasureLayout:I0}},gS={...qj,...l1,...G2,...mS},$=xw((e,t)=>Jw(e,t,gS,pS));function H0(){const e=k.useRef(!1);return Ld(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function xS(){const e=H0(),[t,n]=k.useState(0),s=k.useCallback(()=>{e.current&&n(t+1)},[t]);return[k.useCallback(()=>ye.postRender(s),[s]),t]}class yS extends k.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function vS({children:e,isPresent:t}){const n=k.useId(),s=k.useRef(null),r=k.useRef({width:0,height:0,top:0,left:0});return k.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(t||!s.current||!a||!o)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),k.createElement(yS,{isPresent:t,childRef:s,sizeRef:r},k.cloneElement(e,{ref:s}))}const lc=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:a,mode:o})=>{const l=Ux(bS),c=k.useId(),u=k.useMemo(()=>({id:c,initial:t,isPresent:n,custom:r,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;s&&s()},register:d=>(l.set(d,!1),()=>l.delete(d))}),a?void 0:[n]);return k.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),k.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(e=k.createElement(vS,{isPresent:n},e)),k.createElement(dl.Provider,{value:u},e)};function bS(){return new Map}function wS(e){return k.useEffect(()=>()=>e(),[])}const hs=e=>e.key||"";function jS(e,t){e.forEach(n=>{const s=hs(n);t.set(s,n)})}function SS(e){const t=[];return k.Children.forEach(e,n=>{k.isValidElement(n)&&t.push(n)}),t}const Qe=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=k.useContext(zd).forceRender||xS()[0],c=H0(),u=SS(e);let d=u;const h=k.useRef(new Map).current,f=k.useRef(d),p=k.useRef(new Map).current,g=k.useRef(!0);if(Ld(()=>{g.current=!1,jS(u,p),f.current=d}),wS(()=>{g.current=!0,p.clear(),h.clear()}),g.current)return k.createElement(k.Fragment,null,d.map(m=>k.createElement(lc,{key:hs(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:a,mode:o},m)));d=[...d];const v=f.current.map(hs),b=u.map(hs),x=v.length;for(let m=0;m<x;m++){const y=v[m];b.indexOf(y)===-1&&!h.has(y)&&h.set(y,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((m,y)=>{if(b.indexOf(y)!==-1)return;const w=p.get(y);if(!w)return;const N=v.indexOf(y);let T=m;if(!T){const E=()=>{h.delete(y);const S=Array.from(p.keys()).filter(R=>!b.includes(R));if(S.forEach(R=>p.delete(R)),f.current=u.filter(R=>{const _=hs(R);return _===y||S.includes(_)}),!h.size){if(c.current===!1)return;l(),s&&s()}};T=k.createElement(lc,{key:hs(w),isPresent:!1,onExitComplete:E,custom:t,presenceAffectsLayout:a,mode:o},w),h.set(y,T)}d.splice(N,0,T)}),d=d.map(m=>{const y=m.key;return h.has(y)?m:k.createElement(lc,{key:hs(m),isPresent:!0,presenceAffectsLayout:a,mode:o},m)}),k.createElement(k.Fragment,null,h.size?d:d.map(m=>k.cloneElement(m)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),V=(e,t)=>{const n=k.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>k.createElement("svg",{ref:d,...NS,width:r,height:r,stroke:s,strokeWidth:o?Number(a)*24/Number(r):a,className:["lucide",`lucide-${kS(e)}`,l].join(" "),...u},[...t.map(([h,f])=>k.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=V("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=V("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=V("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=V("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=V("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=V("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=V("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=V("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=V("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=V("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=V("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=V("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=V("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=V("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=V("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=V("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=V("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=V("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=V("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=V("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=V("Egg",[["path",{d:"M12 22c6.23-.05 7.87-5.57 7.5-10-.36-4.34-3.95-9.96-7.5-10-3.55.04-7.14 5.66-7.5 10-.37 4.43 1.27 9.95 7.5 10z",key:"1c39pg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=V("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=V("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=V("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=V("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=V("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=V("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=V("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=V("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=V("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=V("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=V("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=V("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=V("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=V("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=V("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=V("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=V("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=V("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=V("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=V("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=V("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=V("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=V("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=V("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=V("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=V("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=V("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=V("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=V("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=V("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=V("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=V("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=V("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=V("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=V("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),JS={},Op=e=>{let t;const n=new Set,s=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const p=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,p))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(JS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},QS=e=>e?Op(e):Op;var ny={exports:{}},sy={},ry={exports:{}},ay={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=k;function YS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var XS=typeof Object.is=="function"?Object.is:YS,ZS=Rr.useState,eN=Rr.useEffect,tN=Rr.useLayoutEffect,nN=Rr.useDebugValue;function sN(e,t){var n=t(),s=ZS({inst:{value:n,getSnapshot:t}}),r=s[0].inst,a=s[1];return tN(function(){r.value=n,r.getSnapshot=t,uc(r)&&a({inst:r})},[e,n,t]),eN(function(){return uc(r)&&a({inst:r}),e(function(){uc(r)&&a({inst:r})})},[e]),nN(n),n}function uc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!XS(e,n)}catch{return!0}}function rN(e,t){return t()}var aN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rN:sN;ay.useSyncExternalStore=Rr.useSyncExternalStore!==void 0?Rr.useSyncExternalStore:aN;ry.exports=ay;var iN=ry.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=k,oN=iN;function lN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cN=typeof Object.is=="function"?Object.is:lN,uN=oN.useSyncExternalStore,dN=yl.useRef,hN=yl.useEffect,fN=yl.useMemo,pN=yl.useDebugValue;sy.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var a=dN(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=fN(function(){function c(p){if(!u){if(u=!0,d=p,p=s(p),r!==void 0&&o.hasValue){var g=o.value;if(r(g,p))return h=g}return h=p}if(g=h,cN(d,p))return g;var v=s(p);return r!==void 0&&r(g,v)?(d=p,g):(d=p,h=v)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=uN(e,a[0],a[1]);return hN(function(){o.hasValue=!0,o.value=l},[l]),pN(l),l};ny.exports=sy;var mN=ny.exports;const gN=dm(mN),iy={},{useDebugValue:xN}=Ko,{useSyncExternalStoreWithSelector:yN}=gN;let Lp=!1;const vN=e=>e;function bN(e,t=vN,n){(iy?"production":void 0)!=="production"&&n&&!Lp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Lp=!0);const s=yN(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return xN(s),s}const $p=e=>{(iy?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?QS(e):e,n=(s,r)=>bN(t,s,r);return Object.assign(n,t),n},wN=e=>e?$p(e):$p,jN={};function SN(e,t){let n;try{n=e()}catch{return}return{getItem:r=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=n.getItem(r))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,void 0)),removeItem:r=>n.removeItem(r)}}const Wa=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return Wa(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Wa(s)(n)}}}},NN=(e,t)=>(n,s,r)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,x)=>({...x,...b}),...t},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},s,r);const d=Wa(a.serialize),h=()=>{const b=a.partialize({...s()});let x;const m=d({state:b,version:a.version}).then(y=>u.setItem(a.name,y)).catch(y=>{x=y});if(x)throw x;return m},f=r.setState;r.setState=(b,x)=>{f(b,x),h()};const p=e((...b)=>{n(...b),h()},s,r);let g;const v=()=>{var b;if(!u)return;o=!1,l.forEach(m=>m(s()));const x=((b=a.onRehydrateStorage)==null?void 0:b.call(a,s()))||void 0;return Wa(u.getItem.bind(u))(a.name).then(m=>{if(m)return a.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==a.version){if(a.migrate)return a.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var y;return g=a.merge(m,(y=s())!=null?y:p),n(g,!0),h()}).then(()=>{x==null||x(g,void 0),o=!0,c.forEach(m=>m(g))}).catch(m=>{x==null||x(void 0,m)})};return r.persist={setOptions:b=>{a={...a,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},v(),g||p},kN=(e,t)=>(n,s,r)=>{let a={storage:SN(()=>localStorage),partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...t},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...v)},s,r);const d=()=>{const v=a.partialize({...s()});return u.setItem(a.name,{state:v,version:a.version})},h=r.setState;r.setState=(v,b)=>{h(v,b),d()};const f=e((...v)=>{n(...v),d()},s,r);r.getInitialState=()=>f;let p;const g=()=>{var v,b;if(!u)return;o=!1,l.forEach(m=>{var y;return m((y=s())!=null?y:f)});const x=((b=a.onRehydrateStorage)==null?void 0:b.call(a,(v=s())!=null?v:f))||void 0;return Wa(u.getItem.bind(u))(a.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==a.version){if(a.migrate)return[!0,a.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var y;const[w,N]=m;if(p=a.merge(N,(y=s())!=null?y:f),n(p,!0),w)return d()}).then(()=>{x==null||x(p,void 0),p=s(),o=!0,c.forEach(m=>m(p))}).catch(m=>{x==null||x(void 0,m)})};return r.persist={setOptions:v=>{a={...a,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},a.skipHydration||g(),p||f},_N=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((jN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),NN(e,t)):kN(e,t),PN=_N;function vl(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function TN(e,t,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})}const CN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ah extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}}class EN extends ah{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dp extends ah{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Mp extends ah{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cu||(Cu={}));class AN{constructor(t,{headers:n={},customFetch:s,region:r=Cu.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=CN(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return TN(this,arguments,void 0,function*(n,s={}){var r;let a,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=s;let f={},{region:p}=s;p||(p=this.region);const g=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let v;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let b=d;h&&(o=new AbortController,a=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:v,signal:b}).catch(N=>{throw new EN(N)}),m=x.headers.get("x-relay-error");if(m&&m==="true")throw new Dp(x);if(!x.ok)throw new Mp(x);let y=((r=x.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield x.json():y==="application/octet-stream"||y==="application/pdf"?w=yield x.blob():y==="text/event-stream"?w=x:y==="multipart/form-data"?w=yield x.formData():w=yield x.text(),{data:w,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof Mp||l instanceof Dp?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var RN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},IN=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,l=null,c=null,u=a.status,d=a.statusText;if(a.ok){var h,f;if(n.method!=="HEAD"){var p;const x=await a.text();x===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const v=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&b&&b.length>1&&(c=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const v=await a.text();try{o=JSON.parse(v),Array.isArray(o)&&a.status===404&&(l=[],o=null,u=200,d="OK")}catch{a.status===404&&v===""?(u=204,d="No Content"):o={message:v}}if(o&&n.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new RN(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(r=r.catch(a=>{var o;let l="";const c=a==null?void 0:a.cause;if(c){var u,d,h,f;const g=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",v=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=a==null?void 0:a.name)!==null&&h!==void 0?h:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${g}`,v&&(l+=` (${v})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var p;l=(p=a==null?void 0:a.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},ON=class extends IN{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const a=r?`${r}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const r=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const zp=new RegExp("[,()]");var Ks=class extends ON{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&zp.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&zp.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let r="";s==="plain"?r="pl":s==="phrase"?r="ph":s==="websearch"&&(r="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},LN=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:s}=t??{},r=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),s&&c.append("Prefer",`count=${s}`),new Ks({method:r,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var s;const r="POST",{url:a,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),n||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new Ks({method:r,url:a,headers:o,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){var a;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),s&&c.append("Prefer",`count=${s}`),r||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new Ks({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const s="PATCH",{url:r,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Ks({method:s,url:r,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:s,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new Ks({method:n,url:s,headers:r,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},$N=class oy{constructor(t,{headers:n={},schema:s,fetch:r}={}){this.url=t,this.headers=new Headers(n),this.schemaName=s,this.fetch=r}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new LN(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new oy(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:s=!1,get:r=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),h=s&&Object.values(n).some(d);h?(l="POST",u=n):s||r?(l=s?"HEAD":"GET",Object.entries(n).filter(([p,g])=>g!==void 0).map(([p,g])=>[p,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([p,g])=>{c.searchParams.append(p,g)})):(l="POST",u=n);const f=new Headers(this.headers);return h?f.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&f.set("Prefer",`count=${a}`),new Ks({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class DN{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const s=n.versions;if(s&&s.node){const r=s.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const s=this.getWebSocketConstructor();return new s(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const MN="2.93.1",zN=`realtime-js/${MN}`,FN="1.0.0",ly="2.0.0",Fp=ly,Eu=1e4,UN=1e3,qN=100;var Cn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Cn||(Cn={}));var qe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(qe||(qe={}));var Wt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Wt||(Wt={}));var Au;(function(e){e.websocket="websocket"})(Au||(Au={}));var ps;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ps||(ps={}));class VN{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,s;const r=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(t){var n,s;const r=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,s){var r,a;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(p),v=0;g.setUint8(v++,this.KINDS.userBroadcastPush),g.setUint8(v++,c.length),g.setUint8(v++,l.length),g.setUint8(v++,o.length),g.setUint8(v++,u.length),g.setUint8(v++,h.length),g.setUint8(v++,n),Array.from(c,x=>g.setUint8(v++,x.charCodeAt(0))),Array.from(l,x=>g.setUint8(v++,x.charCodeAt(0))),Array.from(o,x=>g.setUint8(v++,x.charCodeAt(0))),Array.from(u,x=>g.setUint8(v++,x.charCodeAt(0))),Array.from(h,x=>g.setUint8(v++,x.charCodeAt(0)));var b=new Uint8Array(p.byteLength+s.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(s),p.byteLength),b.buffer}decode(t,n){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return n(s)}if(typeof t=="string"){const s=JSON.parse(t),[r,a,o,l,c]=s;return n({join_ref:r,ref:a,topic:o,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),s=n.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,r)}}_decodeUserBroadcast(t,n,s){const r=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=s.decode(t.slice(c,c+r));c=c+r;const d=s.decode(t.slice(c,c+a));c=c+a;const h=s.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,g={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>n.includes(s)))}}class cy{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ge;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ge||(ge={}));const Up=(e,t,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=BN(o,e,t,r),a),{}):{}},BN=(e,t,n,s)=>{const r=t.find(l=>l.name===e),a=r==null?void 0:r.type,o=n[e];return a&&!s.includes(a)?uy(a,o):Ru(o)},uy=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return KN(t,n)}switch(e){case ge.bool:return HN(t);case ge.float4:case ge.float8:case ge.int2:case ge.int4:case ge.int8:case ge.numeric:case ge.oid:return WN(t);case ge.json:case ge.jsonb:return GN(t);case ge.timestamp:return JN(t);case ge.abstime:case ge.date:case ge.daterange:case ge.int4range:case ge.int8range:case ge.money:case ge.reltime:case ge.text:case ge.time:case ge.timestamptz:case ge.timetz:case ge.tsrange:case ge.tstzrange:return Ru(t);default:return Ru(t)}},Ru=e=>e,HN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},WN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},GN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},KN=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>uy(t,l))}return e},JN=e=>typeof e=="string"?e.replace(" ","T"):e,dy=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class dc{constructor(t,n,s={},r=Eu){this.channel=t,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(qp||(qp={}));class va{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=va.syncState(this.state,r,a,o),this.pendingDiffs.forEach(c=>{this.state=va.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=va.syncDiff(this.state,r,a,o),l())}),this.onJoin((r,a,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:o})}),this.onLeave((r,a,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,r){const a=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),g=d.filter(b=>p.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},s,r)}static syncDiff(t,n,s,r){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}s(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,r(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const r=t[s];return"metas"in r?n[s]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[s]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Vp||(Vp={}));var ba;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ba||(ba={}));var on;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(on||(on={}));class pr{constructor(t,n={config:{}},s){var r,a;if(this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dc(this,Wt.join,this.params,this.timeout),this.rejoinTimer=new cy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qe.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new va(this),this.broadcastEndpointURL=dy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var s,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==qe.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[ba.PRESENCE]&&this.bindings[ba.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(on.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(on.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(on.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,x=[];for(let m=0;m<b;m++){const y=v[m],{filter:{event:w,schema:N,table:T,filter:E}}=y,S=p&&p[m];if(S&&S.event===w&&pr.isFilterValueEqual(S.schema,N)&&pr.isFilterValueEqual(S.table,T)&&pr.isFilterValueEqual(S.filter,E))x.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=qe.errored,t==null||t(on.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(on.SUBSCRIBED);return}}).receive("error",p=>{this.state=qe.errored,t==null||t(on.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(on.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this.state===qe.joined&&t===ba.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,s)}async httpSend(t,n,s={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var s,r;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=qe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new dc(this,Wt.leave,{},t),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qe.closed,this.bindings={}}async _fetchWithTimeout(t,n,s){const r=new AbortController,a=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(a),o}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new dc(this,t,n,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>qN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var r,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Wt;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,n,s);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var g,v,b;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,s)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var g,v,b,x,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,N=(g=p.filter)===null||g===void 0?void 0:g.event;return w&&((v=n.ids)===null||v===void 0?void 0:v.includes(w))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(m=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:v,table:b,commit_timestamp:x,type:m,errors:y}=g;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:x,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(g))}p.callback(f,s)})}_isClosed(){return this.state===qe.closed}_isJoined(){return this.state===qe.joined}_isJoining(){return this.state===qe.joining}_isLeaving(){return this.state===qe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const r=t.toLocaleLowerCase(),a={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&pr.isEqual(r.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Wt.close,{},t)}_onError(t){this._on(Wt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Up(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Up(t.columns,t.old_record)),n}}const hc=()=>{},$i={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QN=[1e3,2e3,5e3,1e4],YN=1e4,XN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZN{constructor(t,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Eu,this.transport=null,this.heartbeatIntervalMs=$i.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hc,this.ref=0,this.reconnectTimer=null,this.vsn=Fp,this.logger=hc,this.conn=null,this.sendBuffer=[],this.serializer=new VN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...a)=>r(...a):(...a)=>fetch(...a),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Au.websocket}`,this.httpEndpoint=dy(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=DN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Cn.connecting:return ps.Connecting;case Cn.open:return ps.Open;case Cn.closing:return ps.Closing;default:return ps.Closed}}isConnected(){return this.connectionState()===ps.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const s=`realtime:${t}`,r=this.getChannels().find(a=>a.topic===s);if(r)return r;{const a=new pr(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:s,payload:r,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${s} (${a})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(UN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$i.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:r,payload:a,ref:o}=n,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${r} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Cn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Cn.open||this.conn.readyState===Cn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Wt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${s}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([XN],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,s=!1;if(t)n=t,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:zN};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Wt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(n)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new cy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$i.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,s,r,a,o,l,c,u,d,h,f,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Eu,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:$i.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:hc,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Fp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>QN[g-1]||YN,this.vsn){case FN:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,v)=>v(JSON.stringify(g)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(g,v)=>v(JSON.parse(g));break;case ly:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ga=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ek(e,t,n){const s=new URL(t,e);if(n)for(const[r,a]of Object.entries(n))a!==void 0&&s.searchParams.set(r,a);return s.toString()}async function tk(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function nk(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:r,body:a,headers:o}){const l=ek(e.baseUrl,s,r),c=await tk(e.auth),u=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...c,...o},body:a?JSON.stringify(a):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const p=h?f:void 0,g=p==null?void 0:p.error;throw new Ga((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function Di(e){return e.join("")}var sk=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Di(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Di(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Di(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Di(e.namespace)}`}),!0}catch(t){if(t instanceof Ga&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Ga&&n.status===409)return;throw n}}};function qs(e){return e.join("")}var rk=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qs(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qs(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qs(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qs(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qs(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qs(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Ga&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Ga&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},ak=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=nk({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new sk(this.client,t),this.tableOps=new rk(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},bl=class extends Error{constructor(e,t="storage",n,s){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=s}};function wl(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Mi=class extends bl{constructor(e,t,n,s="storage"){super(e,s,t,n),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},hy=class extends bl{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const ik=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ok=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Iu=e=>{if(Array.isArray(e))return e.map(n=>Iu(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[r]=Iu(s)}),t},lk=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Ka(e){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(e)}function ck(e,t){if(Ka(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ka(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uk(e){var t=ck(e,"string");return Ka(t)=="symbol"?t:t+""}function dk(e,t,n){return(t=uk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bp(Object(n),!0).forEach(function(s){dk(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const Hp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},hk=async(e,t,n,s)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e,a=r.status||500;if(typeof r.json=="function")r.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";t(new Mi(Hp(o),a,l,s))}).catch(()=>{if(s==="vectors"){const o=a+"";t(new Mi(r.statusText||`HTTP ${a} error`,a,o,s))}else{const o=a+"";t(new Mi(r.statusText||`HTTP ${a} error`,a,o,s))}});else{const o=a+"";t(new Mi(r.statusText||`HTTP ${a} error`,a,o,s))}}else t(new hy(Hp(e),e,s))},fk=(e,t,n,s)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!s?se(se({},r),n):(ok(s)?(r.headers=se({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(s)):r.body=s,t!=null&&t.duplex&&(r.duplex=t.duplex),se(se({},r),n))};async function Jr(e,t,n,s,r,a,o){return new Promise((l,c)=>{e(n,fk(t,s,r,a)).then(u=>{if(!u.ok)throw u;if(s!=null&&s.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>hk(u,c,s,o))})}function pk(e="storage"){return{get:async(t,n,s,r)=>Jr(t,"GET",n,s,r,void 0,e),post:async(t,n,s,r,a)=>Jr(t,"POST",n,r,a,s,e),put:async(t,n,s,r,a)=>Jr(t,"PUT",n,r,a,s,e),head:async(t,n,s,r)=>Jr(t,"HEAD",n,se(se({},s),{},{noResolveJson:!0}),r,void 0,e),remove:async(t,n,s,r,a)=>Jr(t,"DELETE",n,r,a,s,e)}}const mk=pk("storage"),{get:Ja,post:Se,put:Ou,head:gk,remove:ih}=mk;var Dr=class{constructor(e,t={},n,s="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=ik(n),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(wl(n))return{data:null,error:n};throw n}}},xk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wl(t))return{data:null,error:t};throw t}}};let fy;fy=Symbol.toStringTag;var yk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[fy]="BlobDownloadBuilder",this.promise=null}asStream(){return new xk(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wl(t))return{data:null,error:t};throw t}}};const vk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var bk=class extends Dr{constructor(e,t={},n,s){super(e,t,s,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,s){var r=this;return r.handleOperation(async()=>{let a;const o=se(se({},Wp),s);let l=se(se({},r.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",r.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),c&&!a.has("metadata")&&a.append("metadata",r.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=r.toBase64(r.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=se(se({},l),s.headers));const u=r._removeEmptyFolders(t),d=r._getFinalPath(u),h=await(e=="PUT"?Ou:Se)(r.fetch,`${r.url}/object/${d}`,a,se({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:h.Id,fullPath:h.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,s){var r=this;const a=r._removeEmptyFolders(e),o=r._getFinalPath(a),l=new URL(r.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),r.handleOperation(async()=>{let c;const u=se({upsert:Wp.upsert},s),d=se(se({},r.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:a,fullPath:(await Ou(r.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e);const r=se({},n.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const a=await Se(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(n.url+a.url),l=o.searchParams.get("token");if(!l)throw new bl("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var s=this;return s.handleOperation(async()=>await Se(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}))}async copy(e,t,n){var s=this;return s.handleOperation(async()=>({path:(await Se(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(e,t,n){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(e),a=await Se(s.fetch,`${s.url}/object/sign/${r}`,se({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${s.url}${a.signedURL}${o}`)}})}async createSignedUrls(e,t,n){var s=this;return s.handleOperation(async()=>{const r=await Se(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(o=>se(se({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${a}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),r=s?`?${s}`:"",a=this._getFinalPath(e),o=()=>Ja(this.fetch,`${this.url}/${n}/${a}${r}`,{headers:this.headers,noResolveJson:!0});return new yk(o,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>Iu(await Ja(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await gk(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(wl(s)&&s instanceof hy){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&s.push(r);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&s.push(o);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await ih(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var s=this;return s.handleOperation(async()=>{const r=se(se(se({},vk),t),{},{prefix:e||""});return await Se(s.fetch,`${s.url}/object/list/${s.bucketId}`,r,{headers:s.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const s=se({},e);return await Se(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const wk="2.93.1",li={"X-Client-Info":`storage-js/${wk}`};var jk=class extends Dr{constructor(e,t={},n,s){const r=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const a=r.href.replace(/\/$/,""),o=se(se({},li),t);super(a,o,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await Ja(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Ja(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Se(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Ou(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ih(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Sk=class extends Dr{constructor(e,t={},n){const s=e.replace(/\/$/,""),r=se(se({},li),t);super(s,r,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const s=n.toString(),r=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return await Ja(t.fetch,r,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ih(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!lk(e))throw new bl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new ak({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(r,a){const o=r[a];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(r,l),error:null}}catch(c){if(s)throw c;return{data:null,error:c}}}}})}},Nk=class extends Dr{constructor(e,t={},n){const s=e.replace(/\/$/,""),r=se(se({},li),{},{"Content-Type":"application/json"},t);super(s,r,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Se(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Se(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},kk=class extends Dr{constructor(e,t={},n){const s=e.replace(/\/$/,""),r=se(se({},li),{},{"Content-Type":"application/json"},t);super(s,r,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},_k=class extends Dr{constructor(e,t={},n){const s=e.replace(/\/$/,""),r=se(se({},li),{},{"Content-Type":"application/json"},t);super(s,r,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Se(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},Pk=class extends _k{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Tk(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Tk=class extends Nk{constructor(e,t,n,s){super(e,t,s),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,se(se({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,se(se({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new Ck(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Ck=class extends kk{constructor(e,t,n,s,r){super(e,t,r),this.vectorBucketName=n,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,se(se({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,se(se({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,se(se({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,se(se({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,se(se({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Ek=class extends jk{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new bk(this.url,this.headers,e,this.fetch)}get vectors(){return new Pk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Sk(this.url+"/iceberg",this.headers,this.fetch)}};const py="2.93.1",Js=30*1e3,Lu=3,fc=Lu*Js,Ak="http://localhost:9999",Rk="supabase.auth.token",Ik={"X-Client-Info":`gotrue-js/${py}`},$u="X-Supabase-Api-Version",my={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ok=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lk=10*60*1e3;class Qa extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function X(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class $k extends Qa{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function Dk(e){return X(e)&&e.name==="AuthApiError"}class ms extends Qa{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class jn extends Qa{constructor(t,n,s,r){super(t,s,r),this.name=n,this.status=s}}class St extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pc(e){return X(e)&&e.name==="AuthSessionMissingError"}class Vs extends jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zi extends jn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fi extends jn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Mk(e){return X(e)&&e.name==="AuthImplicitGrantRedirectError"}class Gp extends jn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zk extends jn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Du extends jn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function mc(e){return X(e)&&e.name==="AuthRetryableFetchError"}class Kp extends jn{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Mu extends jn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jp=` 	
\r=`.split(""),Fk=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Jp.length;t+=1)e[Jp[t].charCodeAt(0)]=-2;for(let t=0;t<Bo.length;t+=1)e[Bo[t].charCodeAt(0)]=t;return e})();function Qp(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Bo[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Bo[s]),t.queuedBits-=6}}function gy(e,t,n){const s=Fk[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yp(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=o=>{Vk(o,s,n)};for(let o=0;o<e.length;o+=1)gy(e.charCodeAt(o),r,a);return t.join("")}function Uk(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function qk(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}Uk(s,t)}}function Vk(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function jr(e){const t=[],n={queue:0,queuedBits:0},s=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)gy(e.charCodeAt(r),n,s);return new Uint8Array(t)}function Bk(e){const t=[];return qk(e,n=>t.push(n)),new Uint8Array(t)}function bs(e){const t=[],n={queue:0,queuedBits:0},s=r=>{t.push(r)};return e.forEach(r=>Qp(r,n,s)),Qp(null,n,s),t.join("")}function Hk(e){return Math.round(Date.now()/1e3)+e}function Wk(){return Symbol("auth-callback")}const Xe=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},xy=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function Gk(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,a)=>{t[a]=r})}catch{}return n.searchParams.forEach((s,r)=>{t[r]=s}),t}const yy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Kk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Qs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},os=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ye=async(e,t)=>{await e.removeItem(t)};class jl{constructor(){this.promise=new jl.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}jl.promiseConstructor=Promise;function Ui(e){const t=e.split(".");if(t.length!==3)throw new Mu("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Ok.test(t[s]))throw new Mu("JWT not in base64url format");return{header:JSON.parse(Yp(t[0])),payload:JSON.parse(Yp(t[1])),signature:jr(t[2]),raw:{header:t[0],payload:t[1]}}}async function Jk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Qk(e,t){return new Promise((s,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){s(o);return}}catch(o){if(!t(a,o)){r(o);return}}})()})}function Yk(e){return("0"+e.toString(16)).substr(-2)}function Xk(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let a=0;a<56;a++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(t),Array.from(t,Yk).join("")}async function Zk(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function e_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Zk(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bs(e,t,n=!1){const s=Xk();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Qs(e,`${t}-code-verifier`,r);const a=await e_(s);return[a,s===a?"plain":"s256"]}const t_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n_(e){const t=e.headers.get($u);if(!t||!t.match(t_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function s_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function r_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hs(e){if(!a_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gc(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function i_(e,t){return new Proxy(e,{get:(n,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,r)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,s,r)}})}function Xp(e){return JSON.parse(JSON.stringify(e))}const fs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),o_=[502,503,504];async function Zp(e){var t;if(!Kk(e))throw new Du(fs(e),0);if(o_.includes(e.status))throw new Du(fs(e),e.status);let n;try{n=await e.json()}catch(a){throw new ms(fs(a),a)}let s;const r=n_(e);if(r&&r.getTime()>=my["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Kp(fs(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new St}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Kp(fs(n),e.status,n.weak_password.reasons);throw new $k(fs(n),e.status||500,s)}const l_=(e,t,n,s)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function te(e,t,n,s){var r;const a=Object.assign({},s==null?void 0:s.headers);a[$u]||(a[$u]=my["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await c_(e,t,n+l,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function c_(e,t,n,s,r,a){const o=l_(t,s,r,a);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Du(fs(c),0)}if(l.ok||await Zp(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await Zp(c)}}function Vt(e){var t;let n=null;h_(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Hk(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function em(e){const t=Vt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function u_(e){return{data:e,error:null}}function d_(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a}=e,o=vl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function tm(e){return e}function h_(e){return e.access_token&&e.refresh_token&&e.expires_in}const xc=["global","local","others"];class f_{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=yy(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=xc[0]){if(xc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xc.join(", ")}`);try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rn})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=vl(t,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:d_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(X(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rn})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,r,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:tm});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(X(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Hs(t);try{return await te(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rn})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Hs(t);try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Rn})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){Hs(t);try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rn})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Hs(t.userId);try{const{data:n,error:s}=await te(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Hs(t.userId),Hs(t.id);try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,s,r,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:tm});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(X(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}}function nm(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ws={debug:!!(globalThis&&xy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class p_ extends vy{}async function m_(e,t,n){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new p_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ws.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function g_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function by(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function x_(e){return parseInt(e,16)}function y_(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function v_(e){var t;const{chainId:n,domain:s,expirationTime:r,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=by(e.address),g=d?`${d}://${s}`:s,v=e.statement?`${e.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${p}

${v}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(r&&(x+=`
Expiration Time: ${r.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let m=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);m+=`
- ${y}`}x+=m}return`${b}
${x}`}class Me extends Error{constructor({message:t,code:n,cause:s,name:r}){var a;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=r??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Ho extends Me{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function b_({error:e,options:t}){var n,s,r;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Me({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Me({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Me({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Me({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Me({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Me({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Me({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Me({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(wy(o)){if(a.rp.id!==o)return new Me({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Me({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Me({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Me({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Me({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function w_({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Me({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Me({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(wy(s)){if(n.rpId!==s)return new Me({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Me({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Me({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Me({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class j_{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const S_=new j_;function N_(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:s}=e,r=vl(e,["challenge","user","excludeCredentials"]),a=jr(t).buffer,o=Object.assign(Object.assign({},n),{id:jr(n.id).buffer}),l=Object.assign(Object.assign({},r),{challenge:a,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:jr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function k_(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,s=vl(e,["challenge","allowCredentials"]),r=jr(t).buffer,a=Object.assign(Object.assign({},s),{challenge:r});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:jr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function __(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:bs(new Uint8Array(e.response.attestationObject)),clientDataJSON:bs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function P_(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,s=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:bs(new Uint8Array(r.authenticatorData)),clientDataJSON:bs(new Uint8Array(r.clientDataJSON)),signature:bs(new Uint8Array(r.signature)),userHandle:r.userHandle?bs(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function wy(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function sm(){var e,t;return!!(Xe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function T_(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ho("Browser returned unexpected credential type",t)}:{data:null,error:new Ho("Empty credential response",t)}}catch(t){return{data:null,error:b_({error:t,options:e})}}}async function C_(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ho("Browser returned unexpected credential type",t)}:{data:null,error:new Ho("Empty credential response",t)}}catch(t){return{data:null,error:w_({error:t,options:e})}}}const E_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},A_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Wo(...e){const t=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of e)if(r)for(const a in r){const o=r[a];if(o!==void 0)if(Array.isArray(o))s[a]=o;else if(n(o))s[a]=o;else if(t(o)){const l=s[a];t(l)?s[a]=Wo(l,o):s[a]=Wo(o)}else s[a]=o}return s}function R_(e,t){return Wo(E_,e,t||{})}function I_(e,t){return Wo(A_,e,t||{})}class O_{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:s,signal:r},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const c=r??S_.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=R_(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:h}=await T_({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=I_(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:h}=await C_(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new ms("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},a){if(!n)return{data:null,error:new Qa("rpId is required for WebAuthn authentication")};try{if(!sm())return{data:null,error:new ms("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:s},signal:r},{request:a});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new ms("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},a){if(!n)return{data:null,error:new Qa("rpId is required for WebAuthn registration")};try{if(!sm())return{data:null,error:new ms("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:r},{create:a});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new ms("Unexpected error in register",o)}}}}g_();const L_={url:Ak,storageKey:Rk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ik,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function rm(e,t,n){return await n()}const Gs={};class Ya{get jwks(){var t,n;return(n=(t=Gs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Gs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{cachedAt:t})}constructor(t){var n,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},L_),t);if(this.storageKey=a.storageKey,this.instanceID=(n=Ya.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ya.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Xe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new f_({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yy(a.fetch),this.lock=a.lock||rm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Xe()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=m_:this.lock=rm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new O_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:xy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=nm(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${py}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},s="none";if(Xe()&&(n=Gk(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),Xe()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:a}=await this._getSessionFromURL(n,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Mk(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return X(n)?this._returnResult({error:n}):this._returnResult({error:new ms("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,r;try{const a=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Vt}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(X(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,s,r;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Bs(this.storage,this.storageKey)),a=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:Vt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vt})}else throw new zi("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await Ye(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:em})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:em})}else throw new zi("You must provide either an email or phone number and a password");const{data:s,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const a=new Vs;return this._returnResult({data:{user:null,session:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,s,r,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,s,r,a,o,l,c,u,d,h,f;let p,g;if("message"in t)p=t.message,g=t.signature;else{const{chain:v,wallet:b,statement:x,options:m}=t;let y;if(Xe())if(typeof b=="object")y=b;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")y=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=b}const w=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href),N=await y.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=by(N[0]);let E=(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!E){const R=await y.request({method:"eth_chainId"});E=x_(R)}const S={domain:w.host,address:T,statement:x,uri:w.href,version:"1",chainId:E,nonce:(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=v_(S),g=await y.request({method:"personal_sign",params:[y_(p),T]})}try{const{data:v,error:b}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Vt});if(b)throw b;if(!v||!v.session||!v.user){const x=new Vs;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(X(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var n,s,r,a,o,l,c,u,d,h,f,p;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:b,wallet:x,statement:m,options:y}=t;let w;if(Xe())if(typeof x=="object")w=x;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))w=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const N=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const T=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),m?{statement:m}:null));let E;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")E=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)E=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(r=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const T=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=T}}try{const{data:b,error:x}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:bs(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Vt});if(x)throw x;if(!b||!b.session||!b.user){const m=new Vs;return this._returnResult({data:{user:null,session:null},error:m})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:x})}catch(b){if(X(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const n=await os(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new zk;const{data:a,error:o}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Vt});if(await Ye(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new Vs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:o})}catch(a){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:s,token:r,access_token:a,nonce:o}=t,l=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Vt}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Vs;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,s,r,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Bs(this.storage,this.storageKey));const{error:h}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new zi("You must provide either an email or phone number.")}catch(l){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),X(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,s;try{let r,a;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Vt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(t){var n,s,r,a,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Bs(this.storage,this.storageKey));const u=await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:u_});return!((a=u.data)===null||a===void 0)&&a.url&&Xe()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),X(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new St;const{error:r}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(t){if(X(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:r,options:a}=t,{error:o}=await te(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:s,type:r,options:a}=t,{data:o,error:l}=await te(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new zi("You must provide either an email or phone number and a type")}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<fc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await os(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=gc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=i_(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rn}):await this._useSession(async n=>{var s,r,a;const{data:o,error:l}=n;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new St}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:Rn})})}catch(n){if(X(n))return pc(n)&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new St;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bs(this.storage,this.storageKey));const{data:u,error:d}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),X(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new St;const n=Date.now()/1e3;let s=n,r=!0,a=null;const{payload:o}=Ui(t.access_token);if(o.exp&&(s=o.exp,r=s<=n),r){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(X(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new St;const{data:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Xe())throw new Fi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Gp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Gp("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new Fi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:v,error:b}=await this._getUser(a);if(b)throw b;const x={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(s){if(X(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await os(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:a}=n;if(a&&!pc(a))return this._returnResult({error:a});const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Dk(l)&&(l.status===404||l.status===401||l.status===403)||pc(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Wk(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,r;try{const{data:{session:a},error:o}=n;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Bs(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:s,error:r}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return Xe()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(X(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var s;try{const{error:r,data:{session:a}}=n;if(r)throw r;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a==null?void 0:a.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Vt}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Vs}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(r){if(await Ye(this.storage,`${this.storageKey}-code-verifier`),X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,r;const{data:a,error:o}=n;if(o)throw o;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await Qk(async r=>(r>0&&await Jk(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Vt})),(r,a)=>{const o=200*Math.pow(2,r);return a&&mc(a)&&Date.now()+o-s<Js})}catch(s){if(this._debug(n,"error",s),X(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),Xe()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await os(this.storage,this.storageKey);if(r&&this.userStorage){let o=await os(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Qs(this.userStorage,this.storageKey+"-user",o)),r.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:gc()}else if(r&&!r.user&&!r.user){const o=await os(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await Ye(this.storage,this.storageKey+"-user"),await Qs(this.storage,this.storageKey,r)):r.user=gc()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const a=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fc;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${fc}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),mc(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new St;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new jl;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new St;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(r,"error",a),X(a)){const o={data:null,error:a};return mc(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,s=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ye(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Qs(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const a=Xp(r);await Qs(this.storage,this.storageKey,a)}else{const r=Xp(n);await Qs(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ye(this.storage,this.storageKey),await Ye(this.storage,this.storageKey+"-code-verifier"),await Ye(this.storage,this.storageKey+"-user"),this.userStorage&&await Ye(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-t)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Js}ms, refresh threshold is ${Lu} ticks`),r<=Lu&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,o]=await Bs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);r.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:r,error:a}=n;return a?this._returnResult({data:null,error:a}):await te(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,r;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await te(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?__(t.webauthn.credential_response):P_(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await te(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await te(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:N_(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:k_(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])r.all.push(a),a.status==="verified"&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,s,r,a;if(t)try{const{payload:p}=Ui(t);let g=null;p.aal&&(g=p.aal);let v=g;const{data:{user:b},error:x}=await this.getUser(t);if(x)return this._returnResult({data:null,error:x});((s=(n=b==null?void 0:b.factors)===null||n===void 0?void 0:n.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(v="aal2");const y=p.amr||[];return{data:{currentLevel:g,nextLevel:v,currentAuthenticationMethods:y},error:null}}catch(p){if(X(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Ui(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((a=(r=o.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const f=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?await te(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new St})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:r},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new St});const o=await te(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Xe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:r},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new St});const o=await te(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Xe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await te(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new St})})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?(await te(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new St})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(l=>l.kid===t);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+Lk>r)return s;const{data:a,error:o}=await te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=r,s=a.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});s=p.session.access_token}const{header:r,payload:a,signature:o,raw:{header:l,payload:c}}=Ui(s);n!=null&&n.allowExpired||s_(a.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:a,header:r,signature:o},error:null}}const d=r_(r.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Bk(`${l}.${c}`)))throw new Mu("Invalid JWT signature");return{data:{claims:a,header:r,signature:o},error:null}}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}}Ya.nextInstanceID={};const $_=Ya,D_="2.93.1";let na="";typeof Deno<"u"?na="deno":typeof document<"u"?na="web":typeof navigator<"u"&&navigator.product==="ReactNative"?na="react-native":na="node";function M_(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function z_(){const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node&&typeof window>"u")try{const n=globalThis.require;if(n)return n("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function F_(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}function U_(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}function q_(){const e={"X-Client-Info":`supabase-js-${na}/${D_}`},t=M_();t&&(e["X-Supabase-Client-Platform"]=t);const n=z_();n&&(e["X-Supabase-Client-Platform-Version"]=n);const s=F_();s&&(e["X-Supabase-Client-Runtime"]=s);const r=U_();return r&&(e["X-Supabase-Client-Runtime-Version"]=r),e}const V_=q_(),B_={headers:V_},H_={schema:"public"},W_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},G_={};function Xa(e){"@babel/helpers - typeof";return Xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xa(e)}function K_(e,t){if(Xa(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Xa(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J_(e){var t=K_(e,"string");return Xa(t)=="symbol"?t:t+""}function Q_(e,t,n){return(t=J_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?am(Object(n),!0).forEach(function(s){Q_(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):am(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const Y_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),X_=()=>Headers,Z_=(e,t,n)=>{const s=Y_(n),r=X_();return async(a,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(a,Ae(Ae({},o),{},{headers:u}))}};function eP(e){return e.endsWith("/")?e:e+"/"}function tP(e,t){var n,s;const{db:r,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Ae(Ae({},c),r),auth:Ae(Ae({},u),a),realtime:Ae(Ae({},d),o),storage:{},global:Ae(Ae(Ae({},h),l),{},{headers:Ae(Ae({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function nP(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eP(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var sP=class extends $_{constructor(e){super(e)}},rP=class{constructor(e,t,n){var s,r;this.supabaseUrl=e,this.supabaseKey=t;const a=nP(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:H_,realtime:G_,auth:Ae(Ae({},W_),{},{storageKey:o}),global:B_},c=tP(n??{},l);if(this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=c.global.headers)!==null&&r!==void 0?r:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Z_(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Ae({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new $N(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Ek(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new AN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:r,storageKey:a,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sP({url:this.authUrl.href,headers:Ae(Ae({},f),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:r,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ZN(this.realtimeUrl.href,Ae(Ae({},e),{},{params:Ae(Ae({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const aP=(e,t,n)=>new rP(e,t,n);function iP(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}iP()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let qi=null;const oP=(e,t)=>!e||!t?null:((!qi||qi.supabaseUrl!==e)&&(qi=aP(e,t,{auth:{persistSession:!1}})),qi),lP=async(e,t)=>{if(!e||!t.length)return{success:!0};try{const n=t.map(r=>({id:r.id,name:r.name,content:r.content,mode:r.mode,execution_time:r.executionTime,capital:r.capital,leverage:r.leverage,ai_model:r.aiModel,min_ipe:r.minIpe,num_results:r.numResults,status:r.status,parent_prompt:r.parentPrompt,trades:r.trades||0,win_rate:r.winRate||0,profit_factor:r.profitFactor||0,total_pnl:r.totalPnl||0,max_drawdown:r.maxDrawdown||0,created_at:r.createdAt,updated_at:r.updatedAt})),{error:s}=await e.from("prompts").upsert(n,{onConflict:"id"});if(s)throw s;return{success:!0}}catch(n){return console.error("Sync prompts error:",n),{success:!1,error:n.message}}},cP=async(e,t)=>{if(!e||!t.length)return{success:!0};try{const n=t.map(r=>({id:r.id,prompt_id:r.promptId,prompt_name:r.promptName,asset:r.asset,strategy:r.strategy,entry:r.entry,take_profit:r.takeProfit,stop_loss:r.stopLoss,ipe:r.ipe,explanation:r.explanation,insights:r.insights,status:r.status,result:r.result,pnl:r.pnl,created_at:r.createdAt})),{error:s}=await e.from("signals").upsert(n,{onConflict:"id"});if(s)throw s;return{success:!0}}catch(n){return console.error("Sync signals error:",n),{success:!1,error:n.message}}},uP=async(e,t)=>{if(!e)return{success:!0};try{const{error:n}=await e.from("settings").upsert({id:1,ai_provider:t.aiProvider,ai_model:t.aiModel,system_prompt:t.systemPrompt,updated_at:new Date().toISOString()},{onConflict:"id"});if(n)throw n;return{success:!0}}catch(n){return console.error("Sync settings error:",n),{success:!1,error:n.message}}},dP=async e=>{if(!e)return{success:!1,data:[]};try{const{data:t,error:n}=await e.from("prompts").select("*").order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(t||[]).map(r=>({id:r.id,name:r.name,content:r.content,mode:r.mode,executionTime:r.execution_time,capital:r.capital,leverage:r.leverage,aiModel:r.ai_model,minIpe:r.min_ipe,numResults:r.num_results,status:r.status,parentPrompt:r.parent_prompt,trades:r.trades,winRate:r.win_rate,profitFactor:r.profit_factor,totalPnl:r.total_pnl,maxDrawdown:r.max_drawdown,createdAt:r.created_at,updatedAt:r.updated_at}))}}catch(t){return console.error("Load prompts error:",t),{success:!1,data:[],error:t.message}}},hP=async e=>{if(!e)return{success:!1,data:[]};try{const{data:t,error:n}=await e.from("signals").select("*").order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(t||[]).map(r=>({id:r.id,promptId:r.prompt_id,promptName:r.prompt_name,asset:r.asset,strategy:r.strategy,entry:r.entry,takeProfit:r.take_profit,stopLoss:r.stop_loss,ipe:r.ipe,explanation:r.explanation,insights:r.insights,status:r.status,result:r.result,pnl:r.pnl,createdAt:r.created_at}))}}catch(t){return console.error("Load signals error:",t),{success:!1,data:[],error:t.message}}},fP=async e=>{if(!e)return{success:!1,data:null};try{const{data:t,error:n}=await e.from("settings").select("*").eq("id",1).single();if(n&&n.code!=="PGRST116")throw n;return t?{success:!0,data:{aiProvider:t.ai_provider,aiModel:t.ai_model,systemPrompt:t.system_prompt}}:{success:!0,data:null}}catch(t){return console.error("Load settings error:",t),{success:!1,data:null,error:t.message}}},jy=e=>{const t=e.promptName||"Unnamed Strategy",n=e.config||{};return`Estrategia: ${t}

Configuracin:
- Modo: ${n.mode||"auto"}
- Ejecucin: ${n.executionTime||"target"}
- Capital: $${n.capital||1e3}
- Apalancamiento: ${n.leverage||5}x
- Objetivo: +${n.targetPct||10}%
- IPE Mnimo: ${n.minIpe||80}%`},Sy=e=>{const t=e.promptName||"Unknown",n=e.promptContent||"No content available",s=e.config||{},r=e.trades||[];return`[AI Prompt Reconstructed]

Strategy: ${t}
Content: ${n}
Trades: ${r.length} trades
Capital: $${s.capital||1e3}
Leverage: ${s.leverage||5}x
Target: ${s.targetPct||10}%
Min IPE: ${s.minIpe||80}%
Execution: ${s.executionTime||"target"}
AI Model: ${s.aiModel||"gemini"}

Note: Original AI prompt was not captured.`},zu=e=>{const t={capital:1e3,leverage:5,executionTime:"target",aiModel:"gemini",aiProvider:"google",minIpe:80,numResults:3,mode:"auto",targetPct:10};return!e||typeof e!="object"||Object.keys(e).length===0?t:{...t,...e}},pP=async e=>{if(!e)return{success:!1,error:"No Supabase client"};try{console.log("[repairEggsData] Starting repair of eggs with empty fields...");const{data:t,error:n}=await e.from("eggs").select("*");if(n)throw n;if(!t||t.length===0)return console.log("[repairEggsData] No eggs found in database"),{success:!0,repaired:0,total:0};console.log(`[repairEggsData] Found ${t.length} eggs to check`);let s=0;const r=[];for(const o of t){let l=!1;const c={...o};if(!o.prompt_content||o.prompt_content.trim()===""){const u=jy({promptName:o.prompt_name,config:o.config});c.prompt_content=u,l=!0,console.log(`[repairEggsData] Repairing prompt_content for egg ${o.id}`)}if(!o.full_ai_prompt||o.full_ai_prompt.trim()===""){const u=Sy({promptName:o.prompt_name,promptContent:c.prompt_content,config:o.config,trades:o.trades});c.full_ai_prompt=u,l=!0,console.log(`[repairEggsData] Repairing full_ai_prompt for egg ${o.id}`)}if(!o.config||typeof o.config!="object"||Object.keys(o.config).length===0)c.config=zu(o.config),l=!0,console.log(`[repairEggsData] Repairing config for egg ${o.id}`);else{const u=zu(o.config);JSON.stringify(u)!==JSON.stringify(o.config)&&(c.config=u,l=!0,console.log(`[repairEggsData] Filling missing config fields for egg ${o.id}`))}l&&(s++,r.push(c))}if(r.length===0)return console.log("[repairEggsData] No eggs needed repair"),{success:!0,repaired:0,total:t.length};console.log(`[repairEggsData] Updating ${r.length} eggs in Supabase...`);const{error:a}=await e.from("eggs").upsert(r,{onConflict:"id"});if(a)throw a;return console.log(`[repairEggsData] Successfully repaired ${s} eggs`),{success:!0,repaired:s,total:t.length,repairedIds:r.map(o=>o.id)}}catch(t){return console.error("[repairEggsData] Error:",t),{success:!1,error:t.message}}},mP=async(e,t)=>{if(!e||!t.length)return{success:!0};try{const n=t.map(r=>{let a=r.promptContent;(!a||typeof a=="string"&&a.trim()==="")&&(a=jy(r),console.warn(`[syncEggs] Empty prompt_content detected for egg ${r.id}, using fallback`));let o=r.fullAIPrompt;(!o||typeof o=="string"&&o.trim()==="")&&(o=Sy(r),console.warn(`[syncEggs] Empty full_ai_prompt detected for egg ${r.id}, using fallback`));const l=zu(r.config);return(!r.config||Object.keys(r.config).length===0)&&console.warn(`[syncEggs] Empty config detected for egg ${r.id}, using defaults`),{id:r.id,prompt_id:r.promptId,prompt_name:r.promptName||"Unnamed Strategy",prompt_content:a,full_ai_prompt:o,config:l,status:r.status||"incubating",trades:r.trades||[],total_capital:r.totalCapital||0,execution_time:r.executionTime||"target",expires_at:r.expiresAt,hatched_at:r.hatchedAt,results:r.results,created_at:r.createdAt||new Date().toISOString()}}),{error:s}=await e.from("eggs").upsert(n,{onConflict:"id"});if(s)throw s;return{success:!0}}catch(n){return console.error("Sync eggs error:",n),{success:!1,error:n.message}}},gP=async e=>{if(!e)return{success:!1,data:[]};try{const{data:t,error:n}=await e.from("eggs").select("*").order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(t||[]).map(r=>({id:r.id,promptId:r.prompt_id,promptName:r.prompt_name,promptContent:r.prompt_content,fullAIPrompt:r.full_ai_prompt,config:r.config,status:r.status,trades:r.trades||[],totalCapital:r.total_capital,executionTime:r.execution_time,expiresAt:r.expires_at,hatchedAt:r.hatched_at,results:r.results,createdAt:r.created_at}))}}catch(t){return console.error("Load eggs error:",t),{success:!1,data:[],error:t.message}}},xP=async(e,t)=>{if(!e)return{success:!0};try{const{error:n}=await e.from("prompts").delete().eq("id",t);if(n)throw n;return{success:!0}}catch(n){return console.error("Delete prompt error:",n),{success:!1,error:n.message}}},yP=async(e,t)=>{if(!e||!t.length)return{success:!0};try{const n=t.map(r=>({id:r.id,name:r.name,preset:r.preset,prompts:r.prompts,schedule:r.schedule,capital:r.capital,eggs:r.eggs,variations:r.variations,is_active:r.isActive,last_run:r.lastRun,created_at:r.createdAt})),{error:s}=await e.from("health_checks").upsert(n,{onConflict:"id"});if(s)throw s;return{success:!0}}catch(n){return console.error("Sync health checks error:",n),{success:!1,error:n.message}}},vP=async e=>{if(!e)return{success:!1,data:[]};try{const{data:t,error:n}=await e.from("health_checks").select("*").order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:(t||[]).map(r=>({id:r.id,name:r.name,preset:r.preset,prompts:r.prompts,schedule:r.schedule,capital:r.capital,eggs:r.eggs,variations:r.variations,isActive:r.is_active,lastRun:r.last_run,createdAt:r.created_at}))}}catch(t){return console.error("Load health checks error:",t),{success:!1,data:[],error:t.message}}},bP=async(e,t)=>{if(!e)return{success:!0};try{const{error:n}=await e.from("health_checks").delete().eq("id",t);if(n)throw n;return{success:!0}}catch(n){return console.error("Delete health check error:",n),{success:!1,error:n.message}}},Ny="https://api.binance.com/api/v3",wP="https://scanner.tradingview.com/crypto/scan",ky=e=>e.replace("/","").toUpperCase(),jP=e=>`BINANCE:${e.replace("/","").toUpperCase()}`,_y=async e=>{try{const t=await fetch(`${Ny}/ticker/price`);if(!t.ok)throw new Error(`Binance API error: ${t.status}`);const n=await t.json(),s={};n.forEach(a=>{s[a.symbol]=parseFloat(a.price)});const r={};return e.forEach(a=>{const o=ky(a);s[o]&&(r[a]={symbol:a,price:s[o],source:"binance",timestamp:Date.now()})}),r}catch(t){throw console.error("Binance bulk fetch error:",t),t}},SP=async e=>{try{const t=ky(e),n=await fetch(`${Ny}/ticker/24hr?symbol=${t}`);if(!n.ok)throw new Error(`Binance API error: ${n.status}`);const s=await n.json();return{symbol:e,price:parseFloat(s.lastPrice),priceChange:parseFloat(s.priceChange),priceChangePercent:parseFloat(s.priceChangePercent),high24h:parseFloat(s.highPrice),low24h:parseFloat(s.lowPrice),volume24h:parseFloat(s.volume),quoteVolume24h:parseFloat(s.quoteVolume),source:"binance",timestamp:Date.now()}}catch(t){throw console.error(`Binance 24h stats error for ${e}:`,t),t}},NP=async e=>{try{const t=e.map(a=>jP(a)),n=await fetch(wP,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:{tickers:t,query:{types:[]}},columns:["close","change","change_abs","high","low","volume"]})});if(!n.ok)throw new Error(`TradingView API error: ${n.status}`);const s=await n.json(),r={};return s.data&&s.data.forEach((a,o)=>{const l=e[o],[c,u,d,h,f,p]=a.d;r[l]={symbol:l,price:c,priceChangePercent:u,priceChange:d,high24h:h,low24h:f,volume24h:p,source:"tradingview",timestamp:Date.now()}}),r}catch(t){throw console.error("TradingView bulk fetch error:",t),t}},kP=async(e,t="binance",n="tradingview")=>{const s={binance:_y,tradingview:NP};try{const r=s[t];if(r)return{prices:await r(e),source:t,error:null}}catch(r){console.warn(`Primary platform (${t}) failed:`,r);try{const a=s[n];if(a)return{prices:await a(e),source:n,error:null,fallbackUsed:!0}}catch(a){return console.error(`Fallback platform (${n}) also failed:`,a),{prices:{},source:null,error:`Both platforms failed. Primary: ${r.message}, Fallback: ${a.message}`}}}return{prices:{},source:null,error:"No valid platform configured"}},_P=(e,t)=>{if(!t||!e.entry)return{status:"pending",pnlPercent:0};const n=parseFloat(e.entry),s=parseFloat(e.takeProfit),r=parseFloat(e.stopLoss),a=t;return e.strategy==="LONG"?a>=s?{status:"win",pnlPercent:(s-n)/n*100,exitPrice:s}:a<=r?{status:"loss",pnlPercent:(r-n)/n*100,exitPrice:r}:{status:"active",pnlPercent:(a-n)/n*100,currentPrice:a}:a<=s?{status:"win",pnlPercent:(n-s)/n*100,exitPrice:s}:a>=r?{status:"loss",pnlPercent:(n-r)/n*100,exitPrice:r}:{status:"active",pnlPercent:(n-a)/n*100,currentPrice:a}},PP=(e,t,n,s)=>{const r=parseFloat(e),a=parseFloat(t),o=parseFloat(n);let l,c;return s==="LONG"?(l=a-r,c=r-o):(l=r-a,c=o-r),c<=0?0:l/c},TP=["BTC/USDT","ETH/USDT","SOL/USDT","BNB/USDT","XRP/USDT","ADA/USDT","AVAX/USDT","DOT/USDT","MATIC/USDT","LINK/USDT","ATOM/USDT","UNI/USDT","LTC/USDT","NEAR/USDT","APT/USDT"],CP=(e,t)=>t>=1e3||t>=1?2:t>=.01?4:6,EP=async e=>{try{const t=await _y(e),n={};for(const s of e)t[s]&&(n[s]=t[s].price);return n}catch(t){return console.error("Failed to fetch real prices:",t),null}},AP=(e,t,n,s)=>{const r=Object.entries(n).map(([a,o])=>`- ${a}: $${o.toLocaleString()}`).join(`
`);return`You are a quantitative trading analyst. Based on the user's trading strategy and current market prices, generate ${s.numResults||3} specific trade signals.

## USER'S TRADING STRATEGY:
${e.content}

## CURRENT MARKET PRICES (Real-time from Binance):
${r}

## CONFIGURATION:
- Capital: $${s.capital||1e3}
- Leverage: ${s.leverage||5}x
- Target Profit: ${s.targetPct||10}% on capital
- Execution Mode: ${s.executionTime||"target"}
- Minimum IPE Score: ${s.minIpe||80}%

## REQUIRED OUTPUT FORMAT:
You MUST respond with ONLY a valid JSON array. No markdown, no explanations outside the JSON.
Each trade must have this exact structure:

[
  {
    "asset": "BTC/USDT",
    "strategy": "LONG",
    "entry": 95000.00,
    "takeProfit": 97000.00,
    "stopLoss": 94000.00,
    "ipe": 85,
    "summary": "One line explaining the main reason for this trade (max 80 chars)",
    "reasoning": {
      "whyAsset": "Why this specific asset was chosen from the available options",
      "whyDirection": "Why LONG or SHORT based on the user's strategy criteria",
      "whyEntry": "How the entry price was determined (current price adjustment, support/resistance)",
      "whyLevels": "How TP and SL were calculated (risk/reward, key levels)"
    },
    "criteriaMatched": [
      {"criterion": "RSI < 30", "value": "28", "passed": true},
      {"criterion": "Near support", "value": "2.1% away", "passed": true},
      {"criterion": "Volume increasing", "value": "+45%", "passed": true}
    ],
    "confidenceFactors": [
      {"factor": "Technical Signal", "weight": 35, "score": 90, "contribution": 31.5},
      {"factor": "Support Level", "weight": 25, "score": 85, "contribution": 21.3},
      {"factor": "Volume Confirm", "weight": 20, "score": 95, "contribution": 19.0},
      {"factor": "Market Context", "weight": 20, "score": 50, "contribution": 10.0}
    ]
  }
]

## RULES:
1. Use ONLY the assets from the provided price list
2. Entry price should be very close to current price (within 0.5%)
3. For target-based trades: TP distance = (target% / leverage) from entry
4. Risk:Reward ratio must be at least 2:1
5. IPE score (Investment Potential Estimate) should be 70-95 based on setup quality
6. Reasoning must explain HOW the user's strategy applies to this specific trade
7. Strategy must be either "LONG" or "SHORT"
8. All prices must be numbers (not strings)

Generate ${s.numResults||3} trades now:`},RP=(e,t,n)=>{try{let s=e.trim();s.startsWith("```json")?s=s.replace(/^```json\s*/,"").replace(/\s*```$/,""):s.startsWith("```")&&(s=s.replace(/^```\s*/,"").replace(/\s*```$/,""));const r=s.match(/\[[\s\S]*\]/);r&&(s=r[0]);const a=JSON.parse(s);if(!Array.isArray(a))throw new Error("Response is not an array");return a.map((o,l)=>{var E;const c=o.asset,u=t[c];if(!u)return console.warn(`AI suggested unknown asset: ${c}`),null;const d=CP(c,u),h=parseFloat(o.entry)||u,f=parseFloat(o.takeProfit),p=parseFloat(o.stopLoss),g=((E=o.strategy)==null?void 0:E.toUpperCase())==="SHORT"?"SHORT":"LONG",v=PP(h,f,p,g);let b,x;g==="LONG"?(x=(f-h)/h*100,b=(h-p)/h*100):(x=(h-f)/h*100,b=(p-h)/h*100);const m=o.reasoning||{},y=o.criteriaMatched||[],w=o.confidenceFactors||[],N=[{criterion:"Price analysis",value:"Evaluated",passed:!0},{criterion:"Risk/Reward",value:`1:${v.toFixed(1)}`,passed:v>=2},{criterion:"Strategy match",value:"Applied",passed:!0}],T=[{factor:"Technical Analysis",weight:40,score:75+Math.round(Math.random()*20),contribution:0},{factor:"Risk Management",weight:30,score:v>=2?85:60,contribution:0},{factor:"Market Context",weight:30,score:70+Math.round(Math.random()*15),contribution:0}];return T.forEach(S=>{S.contribution=S.weight*S.score/100}),{id:`trade-${Date.now()}-${l}-${Math.random().toString(36).substr(2,9)}`,promptId:n.promptId,promptName:n.promptName,asset:c,strategy:g,entry:h.toFixed(d),takeProfit:f.toFixed(d),stopLoss:p.toFixed(d),currentPrice:u.toFixed(d),riskRewardRatio:v.toFixed(2),riskPercent:b.toFixed(2),rewardPercent:x.toFixed(2),targetPct:n.targetPct||null,ipe:Math.min(95,Math.max(70,parseInt(o.ipe)||80)),summary:o.summary||`${g} based on strategy criteria match`,reasoning:{whyAsset:m.whyAsset||`Selected from ${Object.keys(n).length} candidates based on strategy fit`,whyDirection:m.whyDirection||`${g} signal based on user strategy analysis`,whyEntry:m.whyEntry||`Entry at ${h.toFixed(d)} based on current price ${u.toFixed(d)}`,whyLevels:m.whyLevels||`TP/SL calculated for ${v.toFixed(1)}:1 R:R ratio`},criteriaMatched:y.length>0?y:N,confidenceFactors:w.length>0?w:T,explanation:o.summary||(typeof o.reasoning=="string"?o.reasoning:"AI-generated trade"),insights:o.insights||Object.values(m).filter(Boolean).slice(0,3),executionTime:n.executionTime,leverage:n.leverage||5,capital:n.capital/(n.numResults||3),createdAt:new Date().toISOString(),status:"pending",selected:!1}}).filter(Boolean)}catch(s){throw console.error("Failed to parse AI response:",s),console.error("Raw response:",e),new Error(`Failed to parse AI response: ${s.message}`)}},IP=async(e,t,n="claude-sonnet-4-20250514")=>{var o,l,c;console.log("Calling Claude API...");const s=JSON.stringify({model:n,max_tokens:4096,system:"You are a quantitative trading analyst. Always respond with valid JSON only. No markdown, no explanations outside the JSON array.",messages:[{role:"user",content:e}]}),r=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:s});if(!r.ok){let u=`Claude API error: ${r.status}`;try{u=((o=(await r.json()).error)==null?void 0:o.message)||u}catch{}throw new Error(u)}const a=await r.json();if(!((c=(l=a.content)==null?void 0:l[0])!=null&&c.text))throw new Error("No response from Claude");return a.content[0].text},OP=async(e,t,n="gemini-1.5-flash")=>{var a,o,l,c,u,d;console.log(`Calling Gemini API with model: ${n}`);const s=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${n}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}})});if(!s.ok){let h=`Gemini API error: ${s.status}`;try{h=((a=(await s.json()).error)==null?void 0:a.message)||h}catch{}throw new Error(h)}const r=await s.json();if(!((d=(u=(c=(l=(o=r.candidates)==null?void 0:o[0])==null?void 0:l.content)==null?void 0:c.parts)==null?void 0:u[0])!=null&&d.text))throw new Error("No response from Gemini");return r.candidates[0].content.parts[0].text},LP=async(e,t,n="gpt-4")=>{var o,l,c,u;console.log(`Calling OpenAI API with model: ${n}`);const s=JSON.stringify({model:n,messages:[{role:"system",content:"You are a quantitative trading analyst. Always respond with valid JSON only."},{role:"user",content:e}],temperature:.7,max_tokens:2048});let r;try{r=await fetch("/api/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:s})}catch{r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:s})}if(!r.ok){let d=`OpenAI API error: ${r.status}`;try{d=((o=(await r.json()).error)==null?void 0:o.message)||d}catch{}throw new Error(d)}const a=await r.json();if(!((u=(c=(l=a.choices)==null?void 0:l[0])==null?void 0:c.message)!=null&&u.content))throw new Error("No response from OpenAI");return a.choices[0].message.content},$P=async(e,t)=>{var a,o,l,c;console.log("Calling Grok API...");const n=JSON.stringify({model:"grok-beta",messages:[{role:"system",content:"You are a quantitative trading analyst. Always respond with valid JSON only."},{role:"user",content:e}],temperature:.7,max_tokens:2048});let s;try{s=await fetch("/api/xai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:n})}catch{s=await fetch("https://api.x.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:n})}if(!s.ok){let u=`Grok API error: ${s.status}`;try{u=((a=(await s.json()).error)==null?void 0:a.message)||u}catch{}throw new Error(u)}const r=await s.json();if(!((c=(l=(o=r.choices)==null?void 0:o[0])==null?void 0:l.message)!=null&&c.content))throw new Error("No response from Grok");return r.choices[0].message.content},DP=async(e,t,n=3)=>{var g;console.log("Generating trades with AI..."),console.log("Prompt:",e.name);const s=e.aiModel||t.aiProvider||"google";console.log("AI Provider:",s);const r=(g=t.apiKeys)==null?void 0:g[s];if(!r)throw new Error(`No API key configured for ${s}. Please add your API key in Settings.`);const o=[...TP].sort(()=>Math.random()-.5).slice(0,Math.min(n*2,10));console.log("Fetching real prices from Binance for:",o);const l=await EP(o);if(!l||Object.keys(l).length===0)throw new Error("Failed to fetch real-time prices from Binance. Please try again.");console.log("Real prices fetched:",l);const c={promptId:e.id,promptName:e.name,capital:e.capital||1e3,leverage:e.leverage||5,targetPct:e.targetPct||10,executionTime:e.executionTime||"target",minIpe:e.minIpe||80,numResults:n},u=AP(e,t,l,c);console.log("AI Prompt built, calling API...");let d;try{switch(s){case"anthropic":d=await IP(u,r,"claude-sonnet-4-20250514");break;case"google":d=await OP(u,r,"gemini-1.5-flash");break;case"openai":d=await LP(u,r,"gpt-4");break;case"xai":d=await $P(u,r);break;default:throw new Error(`Unknown AI provider: ${s}`)}}catch(v){throw console.error("AI API call failed:",v),new Error(`AI API call failed: ${v.message}`)}console.log("AI Response received:",d.substring(0,200)+"...");const h=RP(d,l,c);if(h.length===0)throw new Error("AI did not generate any valid trades. Please try again.");const f=h.filter(v=>v.ipe>=(e.minIpe||70));if(f.length===0)throw new Error("No trades met the minimum IPE threshold. Try lowering the minimum IPE.");return console.log(`Generated ${f.length} trades from AI`),f.slice(0,n).map((v,b)=>({...v,...b===0?{fullAIPrompt:u}:{}}))},MP=async(e,t)=>{var n,s,r,a;console.log(`Testing connection for ${e}...`);try{switch(e){case"anthropic":{const o=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-3-haiku-20240307",max_tokens:10,messages:[{role:"user",content:"Hi"}]})});if(!o.ok){const l=await o.json().catch(()=>({}));throw new Error(((n=l.error)==null?void 0:n.message)||`HTTP ${o.status}`)}return{success:!0,message:"Claude API connected successfully!"}}case"google":{const o=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Hi"}]}],generationConfig:{maxOutputTokens:10}})});if(!o.ok){const l=await o.json().catch(()=>({}));throw new Error(((s=l.error)==null?void 0:s.message)||`HTTP ${o.status}`)}return{success:!0,message:"Gemini API connected successfully!"}}case"openai":{let o;try{o=await fetch("/api/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-3.5-turbo",max_tokens:10,messages:[{role:"user",content:"Hi"}]})})}catch{o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-3.5-turbo",max_tokens:10,messages:[{role:"user",content:"Hi"}]})})}if(!o.ok){const l=await o.json().catch(()=>({}));throw new Error(((r=l.error)==null?void 0:r.message)||`HTTP ${o.status}`)}return{success:!0,message:"OpenAI API connected successfully!"}}case"xai":{let o;try{o=await fetch("/api/xai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"grok-beta",max_tokens:10,messages:[{role:"user",content:"Hi"}]})})}catch{o=await fetch("https://api.x.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"grok-beta",max_tokens:10,messages:[{role:"user",content:"Hi"}]})})}if(!o.ok){const l=await o.json().catch(()=>({}));throw new Error(((a=l.error)==null?void 0:a.message)||`HTTP ${o.status}`)}return{success:!0,message:"Grok API connected successfully!"}}default:throw new Error(`Unknown provider: ${e}`)}}catch(o){return console.error(`Connection test failed for ${e}:`,o),{success:!1,message:o.message}}},zP=1*60*1e3,FP=100,im={target:null,scalping:60*60*1e3,intraday:24*60*60*1e3,swing:7*24*60*60*1e3},UP=[],qP=(e,t)=>({id:`sig-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,promptId:e,promptName:t,asset:["BTC/USDT","ETH/USDT","SOL/USDT","BNB/USDT","XRP/USDT"][Math.floor(Math.random()*5)],strategy:Math.random()>.5?"LONG":"SHORT",entry:(Math.random()*5e4+1e3).toFixed(2),takeProfit:(Math.random()*6e4+5e3).toFixed(2),stopLoss:(Math.random()*45e3+500).toFixed(2),ipe:Math.floor(Math.random()*20+75),explanation:"Based on technical analysis including RSI divergence, MACD crossover, and volume profile analysis. The current market structure suggests a high probability setup.",insights:["Strong support level identified at current entry","Volume increasing on recent candles","RSI showing bullish divergence on 4H timeframe"],createdAt:new Date().toISOString(),status:"active"}),VP=[{id:"prompt-1",name:"Alpha Momentum",content:"Analyze momentum indicators and volume patterns to identify high-probability breakout opportunities in crypto markets.",mode:"auto",executionTime:"intraday",capital:1e3,leverage:5,aiModel:"gemini",minIpe:80,status:"active",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-20T14:00:00Z",trades:24,winRate:68,profitFactor:2.1,totalPnl:1250.5,maxDrawdown:8.5},{id:"prompt-2",name:"Mean Reversion Pro",content:"Identify oversold conditions using RSI, Bollinger Bands, and order flow to execute mean reversion trades.",mode:"manual",executionTime:"swing",capital:2500,leverage:3,aiModel:"gemini",minIpe:85,status:"active",createdAt:"2024-01-10T08:00:00Z",updatedAt:"2024-01-22T16:30:00Z",trades:12,winRate:75,profitFactor:2.8,totalPnl:890.25,maxDrawdown:5.2},{id:"prompt-3",name:"Scalp Hunter",content:"Execute quick scalping trades based on order book imbalances and micro-structure analysis.",mode:"auto",executionTime:"scalping",capital:500,leverage:10,aiModel:"openai",minIpe:75,status:"archived",createdAt:"2024-01-05T12:00:00Z",updatedAt:"2024-01-18T09:15:00Z",trades:156,winRate:52,profitFactor:1.3,totalPnl:-120.75,maxDrawdown:15.3}],BP=[],W=wN(PN((e,t)=>({prompts:VP,addPrompt:n=>{e(s=>({prompts:[...s.prompts,{...n,id:`prompt-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),trades:0,winRate:0,profitFactor:0,totalPnl:0,maxDrawdown:0}]})),t().triggerSync()},updatePrompt:(n,s)=>{e(r=>({prompts:r.prompts.map(a=>a.id===n?{...a,...s,updatedAt:new Date().toISOString()}:a)})),t().triggerSync()},archivePrompt:n=>{e(s=>({prompts:s.prompts.map(r=>r.id===n?{...r,status:"archived",updatedAt:new Date().toISOString()}:r)})),t().triggerSync()},deletePrompt:async n=>{const s=t().getClient();s&&await xP(s,n),e(r=>({prompts:r.prompts.filter(a=>a.id!==n),signals:r.signals.filter(a=>a.promptId!==n)})),t().triggerSync()},signals:BP,addSignal:n=>{const s=t().prompts.find(r=>r.id===n);if(s){const r=qP(n,s.name);return e(a=>({signals:[r,...a.signals]})),t().triggerSync(),r}},updateSignal:(n,s)=>{e(r=>({signals:r.signals.map(a=>a.id===n?{...a,...s}:a)})),t().triggerSync()},eggs:UP,pendingTrades:[],isGeneratingTrades:!1,generationError:null,generateTrades:async n=>{e({isGeneratingTrades:!0,generationError:null,pendingTrades:[]});const s=n.numResults||3;t().addLog("ai",`Generating ${s} trades using "${n.name}"...`);try{const r=await DP(n,t().settings,s);return r.forEach(a=>{t().addLog("ai",`Generated: ${a.asset} ${a.strategy} | Entry: $${a.entry} | TP: $${a.takeProfit} | SL: $${a.stopLoss}`,a)}),t().addLog("ai",`AI generated ${r.length} trade signals`),e({pendingTrades:r,isGeneratingTrades:!1}),{success:!0,trades:r}}catch(r){return t().addLog("error",`AI generation failed: ${r.message}`),e({isGeneratingTrades:!1,generationError:r.message}),{success:!1,error:r.message}}},toggleTradeSelection:n=>{e(s=>({pendingTrades:s.pendingTrades.map(r=>r.id===n?{...r,selected:!r.selected}:r)}))},selectAllTrades:()=>{e(n=>({pendingTrades:n.pendingTrades.map(s=>({...s,selected:!0}))}))},clearPendingTrades:()=>{e({pendingTrades:[],generationError:null})},createEgg:n=>{var m;const r=t().pendingTrades.filter(y=>y.selected);if(r.length===0)return null;let a=((m=r[0])==null?void 0:m.fullAIPrompt)||null;if(!a||a.trim()===""){const y=r.map(w=>w.asset).join(", ");a=`[AI Prompt Not Captured]

Strategy: ${n.name||"Unknown"}
Content: ${n.content||"No content"}
Assets: ${y}
Capital: $${n.capital||1e3}
Leverage: ${n.leverage||5}x
Target: ${n.targetPct||10}%
Min IPE: ${n.minIpe||80}%
Execution: ${n.executionTime||"target"}
AI Model: ${n.aiModel||"gemini"}

Note: The original AI prompt was not captured. This is a reconstruction from the prompt configuration.`}const o=r.map(y=>{const{fullAIPrompt:w,...N}=y;return{...N,status:"active",selected:void 0}}),l=n.name||"Unnamed Strategy",c=n.mode||"auto",u=n.executionTime||"target",d=n.capital||1e3,h=n.leverage||5,f=n.targetPct||10,p=n.minIpe||80;let g=n.content;(!g||g.trim()==="")&&(g=`Estrategia: ${l}

Configuracin:
- Modo: ${c}
- Ejecucin: ${u}
- Capital: $${d}
- Apalancamiento: ${h}x
- Objetivo: +${f}%
- IPE Mnimo: ${p}%`);const v={capital:n.capital||1e3,leverage:n.leverage||5,executionTime:n.executionTime||"target",aiModel:n.aiModel||"gemini",aiProvider:n.aiModel||"google",minIpe:n.minIpe||80,numResults:n.numResults||3,mode:n.mode||"auto",targetPct:n.targetPct||10},b={id:`egg-${Date.now()}`,promptId:n.id||`prompt-${Date.now()}`,promptName:l,promptContent:g,fullAIPrompt:a,status:"incubating",trades:o.map(y=>y.id),totalCapital:r.reduce((y,w)=>y+(w.capital||0),0),config:v,executionTime:u,expiresAt:im[n.executionTime]?new Date(Date.now()+im[n.executionTime]).toISOString():null,createdAt:new Date().toISOString(),hatchedAt:null,results:null};e(y=>({signals:[...o,...y.signals],eggs:[b,...y.eggs],pendingTrades:[]}));const x=o.map(y=>y.asset).join(", ");return t().addLog("egg",`New egg incubating: "${n.name}" with ${o.length} trades`,{eggId:b.id,trades:o.length,assets:x,capital:b.totalCapital}),t().triggerSync(),b},updateEgg:(n,s)=>{e(r=>({eggs:r.eggs.map(a=>a.id===n?{...a,...s}:a)})),t().triggerSync()},checkEggHatch:n=>{const s=t(),r=s.eggs.find(l=>l.id===n);if(!r||r.status==="hatched")return!1;const a=s.signals.filter(l=>r.trades.includes(l.id));if(a.every(l=>l.status==="closed")){const l=a.filter(m=>m.result==="win").length,c=a.filter(m=>m.result==="loss").length,u=a.reduce((m,y)=>m+(y.pnl||0),0),d=a.length>0?u/a.length:0,h=a.length>0?l/a.length*100:0,f=a.reduce((m,y)=>m+(y.pnlDollar||0),0),p=a.filter(m=>(m.pnl||0)>0).reduce((m,y)=>m+y.pnl,0),g=Math.abs(a.filter(m=>(m.pnl||0)<0).reduce((m,y)=>m+y.pnl,0)),v=a.reduce((m,y)=>m+(y.ipe||0),0)/a.length,b={totalTrades:a.length,closedTrades:a.length,wins:l,losses:c,winRate:Math.round(h),totalPnl:d,totalPnlDollar:f,profitFactor:g>0?p/g:p>0?1/0:0,avgIpe:Math.round(v)};e(m=>({eggs:m.eggs.map(y=>y.id===n?{...y,status:"hatched",hatchedAt:new Date().toISOString(),results:b}:y)}));const x=d>=0?`+${d.toFixed(2)}%`:`${d.toFixed(2)}%`;return t().addLog("egg",`Egg hatched: "${r.promptName}" - ${l}W/${c}L (${x})`,{eggId:n,promptName:r.promptName,results:b}),t().triggerSync(),!0}return!1},getIncubatingEggs:()=>t().eggs.filter(n=>n.status==="incubating"),getHatchedEggs:()=>t().eggs.filter(n=>n.status==="hatched"),onboardingCompleted:!1,completeOnboarding:()=>e({onboardingCompleted:!0}),resetOnboarding:()=>e({onboardingCompleted:!1}),resetAllData:async()=>{const n=t().getClient();if(n)try{await Promise.all([n.from("prompts").delete().neq("id",""),n.from("signals").delete().neq("id",""),n.from("eggs").delete().neq("id",""),n.from("settings").delete().neq("id","")])}catch(s){console.error("Failed to clear cloud data:",s)}localStorage.removeItem("prompthatcher-storage"),localStorage.setItem("prompthatcher-reset-pending","true"),e({prompts:[],signals:[],eggs:[],pendingTrades:[],activityLogs:[],onboardingCompleted:!1,prices:{},priceStatus:{isFetching:!1,lastUpdated:null,error:null,source:null,fallbackUsed:!1},syncStatus:{syncing:!1,lastSynced:null,error:null,loading:!1},isCloudInitialized:!1}),window.location.reload()},resetSelectiveData:(n={})=>{const{deletePrompts:s=!1,deleteEggs:r=!1,deleteSignals:a=!1,deleteLogs:o=!1,resetOnboarding:l=!1,keepLinkedData:c=!0}=n,u=t();let d=u.prompts,h=u.eggs,f=u.signals,p=u.activityLogs,g=u.onboardingCompleted;if(a&&(f=[],h=h.map(v=>({...v,trades:[],status:v.status==="incubating"?"orphaned":v.status}))),r){const v=h.flatMap(b=>b.trades);c||(f=f.filter(b=>!v.includes(b.id))),h=[]}if(s){if(c)h=h.map(v=>({...v,promptName:v.promptName+" (deleted)",promptId:null}));else{const v=d.map(m=>m.id),x=h.filter(m=>v.includes(m.promptId)).flatMap(m=>m.trades);f=f.filter(m=>!x.includes(m.id)),h=h.filter(m=>!v.includes(m.promptId))}d=[]}return o&&(p=[]),l&&(g=!1),e({prompts:d,eggs:h,signals:f,activityLogs:p,onboardingCompleted:g}),t().triggerSync(),{deletedPrompts:s?u.prompts.length:0,deletedEggs:r?u.eggs.length:0,deletedSignals:a?u.signals.length:0,deletedLogs:o?u.activityLogs.length:0}},getDataCounts:()=>{const n=t(),s=n.eggs.filter(l=>l.status==="incubating"),r=n.eggs.filter(l=>l.status==="hatched"),a=n.signals.filter(l=>l.status==="active"),o=n.signals.filter(l=>l.status==="closed");return{prompts:n.prompts.length,eggs:n.eggs.length,incubatingEggs:s.length,hatchedEggs:r.length,signals:n.signals.length,activeSignals:a.length,closedSignals:o.length,activityLogs:n.activityLogs.length}},isConfigured:()=>{const n=t(),s=Object.values(n.settings.apiKeys).some(a=>a&&a.length>0),r=n.settings.supabase.url&&n.settings.supabase.anonKey;return s&&r},settings:{aiProvider:"google",aiModel:"gemini-1.5-flash",apiKeys:{anthropic:"",google:"",openai:"",xai:""},supabase:{url:"",anonKey:"",connected:!1},tradingPlatform:{primary:"binance",secondary:"tradingview"},systemPrompt:`You are an autonomous quantitative research agent specialized in cryptocurrency markets.

Your task is to generate ONE completely new trading strategy every time you are invoked.

This strategy MUST be original and must NOT reuse the same combination of:
- Market hypothesis
- Indicators
- Timeframes
- Entry/exit logic
- Risk model
- Market regime assumption
as any previous strategy generated in this session or application lifecycle.

If there is any risk of similarity, you must deliberately explore a different conceptual space.

---

## SCIENTIFIC METHOD (MANDATORY)

You MUST follow the scientific method explicitly and structure the output accordingly:

1. OBSERVATION
   - Describe a specific, non-trivial market behavior observed in crypto markets.
   - The observation must be measurable and not opinion-based.

2. QUESTION
   - Formulate a precise research question derived from the observation.

3. HYPOTHESIS
   - Propose a falsifiable hypothesis.
   - The hypothesis must predict a measurable outcome.

4. EXPERIMENT DESIGN
   - Define:
     - Market type (spot, futures, perpetuals)
     - Timeframe(s)
     - Assets selection logic
     - Indicators or raw data used (can be non-standard)
     - Entry conditions
     - Exit conditions
     - Risk management rules
   - All rules must be explicit and unambiguous.

5. VARIABLES
   - Independent variables
   - Dependent variables
   - Control variables

6. METRICS & EVALUATION
   - Define objective performance metrics:
     - e.g. expectancy, Sharpe, max drawdown, win rate, profit factor
   - Define failure conditions (when the hypothesis is rejected).

7. RANDOMIZATION CONSTRAINT
   - Introduce controlled randomness in ONE of the following:
     - Indicator parameters
     - Asset universe
     - Time segmentation
     - Position sizing
   - Randomness must be bounded and justifiable.

8. BIAS & LIMITATIONS
   - Explicitly state possible biases and limitations of the strategy.

---

## CONSTRAINTS

- The strategy must be implementable programmatically.
- No vague language (e.g. "strong trend", "significant move").
- No price prediction or discretionary judgment.
- No reuse of common retail strategies unless fundamentally transformed.
- Do NOT mention news sentiment unless it is quantifiable.
- Do NOT optimize parameters; assume default values unless randomized.

---

## OUTPUT FORMAT (STRICT)

Return the strategy using this exact structure:

- Strategy Name
- Observation
- Research Question
- Hypothesis
- Experiment Design
- Variables
- Entry Rules
- Exit Rules
- Risk Management
- Randomized Component
- Evaluation Metrics
- Failure Criteria
- Biases & Limitations

---

## FINAL REQUIREMENT

Each strategy must explore a different market inefficiency or behavioral pattern.
If no truly new strategy can be generated, you must invent a new angle rather than repeating prior logic.`},updateSettings:n=>{e(s=>({settings:{...s.settings,...n}})),t().triggerSync()},updateSystemPrompt:n=>{e(s=>({settings:{...s.settings,systemPrompt:n}})),t().triggerSync()},updateApiKey:(n,s)=>e(r=>({settings:{...r.settings,apiKeys:{...r.settings.apiKeys,[n]:s}}})),updateSupabase:n=>e(s=>({settings:{...s.settings,supabase:{...s.settings.supabase,...n}}})),updateTradingPlatform:n=>e(s=>({settings:{...s.settings,tradingPlatform:{...s.settings.tradingPlatform,...n}}})),prices:{},priceStatus:{isFetching:!1,lastUpdated:null,error:null,source:null,fallbackUsed:!1},priceRefreshInterval:null,fetchAllPrices:async()=>{const n=t(),{primary:s,secondary:r}=n.settings.tradingPlatform,a=n.signals.filter(h=>h.status==="active"),l=n.eggs.filter(h=>h.status==="incubating").flatMap(h=>h.trades),c=n.signals.filter(h=>l.includes(h.id)&&h.status==="active"),u=[...a,...c],d=[...new Set(u.map(h=>h.asset))];d.length===0&&d.push("BTC/USDT","ETH/USDT"),t().addLog("price",`Fetching prices from ${s.toUpperCase()}...`,{assets:d}),e({priceStatus:{...n.priceStatus,isFetching:!0,error:null}});try{const h=await kP(d,s,r);return h.error?(t().addLog("error",`Price fetch failed: ${h.error}`),e({priceStatus:{isFetching:!1,lastUpdated:n.priceStatus.lastUpdated,error:h.error,source:null,fallbackUsed:!1}}),{success:!1,error:h.error}):(Object.entries(h.prices).forEach(([f,p])=>{t().addLog("price",`${f}: $${p.price.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,{asset:f,price:p.price,change24h:p.change24h})}),t().addLog("system",`Prices updated from ${h.source}${h.fallbackUsed?" (fallback)":""}`,{source:h.source,assetsCount:Object.keys(h.prices).length}),e({prices:{...n.prices,...h.prices},priceStatus:{isFetching:!1,lastUpdated:new Date().toISOString(),error:null,source:h.source,fallbackUsed:h.fallbackUsed||!1}}),t().updateTradeStatuses(),{success:!0,prices:h.prices})}catch(h){return t().addLog("error",`Price fetch error: ${h.message}`),e({priceStatus:{...n.priceStatus,isFetching:!1,error:h.message}}),{success:!1,error:h.message}}},updateTradeStatuses:()=>{const n=t(),{prices:s,signals:r,eggs:a}=n,o=r.filter(g=>g.status==="active"),l=a.filter(g=>g.status==="incubating");if(o.length===0){t().addLog("system","No active trades to check");return}let c=!1,u=[],d=[],h=[];const f=r.map(g=>{if(g.status!=="active")return g;const v=s[g.asset];if(!v)return t().addLog("trade",` No price data for ${g.asset}`,{asset:g.asset}),g;const b=v.price,x=_P(g,b),m=parseFloat(g.entry),y=parseFloat(g.takeProfit),w=parseFloat(g.stopLoss);if(h.push({asset:g.asset,strategy:g.strategy,currentPrice:b,entry:m,tp:y,sl:w,distanceToTP:g.strategy==="LONG"?y-b:b-y,distanceToSL:g.strategy==="LONG"?b-w:w-b,pnlPercent:x.pnlPercent}),!g.priceActivated)return d.push({asset:g.asset,strategy:g.strategy,price:b,entry:m,tp:y,sl:w}),{...g,priceActivated:!0,activatedPrice:b,currentPrice:b,unrealizedPnl:x.pnlPercent};if(x.status==="win"||x.status==="loss"){c=!0;const N=a.find(S=>S.trades.includes(g.id)),T=N?N.totalCapital/N.trades.length:100,E=x.pnlPercent/100*T;return u.push({asset:g.asset,strategy:g.strategy,result:x.status,pnl:x.pnlPercent,pnlDollar:E,exitPrice:x.exitPrice,eggName:N==null?void 0:N.promptName}),{...g,status:"closed",result:x.status,exitPrice:x.exitPrice,pnl:x.pnlPercent,pnlDollar:E,closedAt:new Date().toISOString()}}return{...g,currentPrice:b,unrealizedPnl:x.pnlPercent}});h.length>0&&h.forEach(g=>{const v=g.strategy==="LONG"?"":"",b=Math.abs(g.distanceToTP).toFixed(2),x=Math.abs(g.distanceToSL).toFixed(2),m=g.pnlPercent>=0?"+":"";t().addLog("trade",`${v} ${g.asset}: $${g.currentPrice.toFixed(2)} | TP: $${b} away | SL: $${x} away | PnL: ${m}${g.pnlPercent.toFixed(2)}%`,g)}),d.forEach(g=>{t().addLog("trade",` Trade monitoring started: ${g.asset} ${g.strategy} | Entry: $${g.entry} | TP: $${g.tp} | SL: $${g.sl}`,g)}),u.forEach(g=>{const v=g.result==="win"?" TP HIT":" SL HIT",b=g.pnl>=0?`+$${g.pnl.toFixed(2)}`:`-$${Math.abs(g.pnl).toFixed(2)}`;if(t().addLog("trade",`${v}: ${g.asset} ${g.strategy} closed @ $${g.exitPrice.toFixed(2)} (${b})`,g),g.eggName){const x=l.find(m=>m.promptName===g.eggName);if(x){const m=f.filter(N=>x.trades.includes(N.id)),y=m.filter(N=>N.status==="closed").length,w=m.length;t().addLog("egg",`Egg "${g.eggName}": ${y}/${w} trades executed`,{eggName:g.eggName,closed:y,total:w})}}});const p=f.filter(g=>g.status==="active").length;(u.length>0||d.length>0)&&t().addLog("system",`Trade check: ${u.length} closed, ${d.length} activated, ${p} still active`),c?(e({signals:f}),l.forEach(g=>{t().checkEggHatch(g.id)}),t().triggerSync()):e({signals:f})},startPriceRefresh:()=>{const n=t();n.priceRefreshInterval&&clearInterval(n.priceRefreshInterval),t().fetchAllPrices();const s=setInterval(()=>{t().fetchAllPrices()},zP);e({priceRefreshInterval:s})},stopPriceRefresh:()=>{const n=t();n.priceRefreshInterval&&(clearInterval(n.priceRefreshInterval),e({priceRefreshInterval:null}))},refreshPrices:async()=>await t().fetchAllPrices(),getPrice:n=>{var r;return((r=t().prices[n])==null?void 0:r.price)||null},fetch24hStats:async n=>{try{return await SP(n)}catch(s){return console.error("Failed to fetch 24h stats:",s),null}},activityLogs:[],addLog:(n,s,r=null)=>{e(a=>({activityLogs:[{id:`log-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,type:n,message:s,data:r,timestamp:new Date().toISOString()},...a.activityLogs].slice(0,FP)}))},clearLogs:()=>e({activityLogs:[]}),activeTab:"prompts",setActiveTab:n=>e({activeTab:n}),settingsActiveTab:0,setSettingsActiveTab:n=>e({settingsActiveTab:n}),isPromptActionModalOpen:!1,setPromptActionModalOpen:n=>e({isPromptActionModalOpen:n}),isNewPromptModalOpen:!1,setNewPromptModalOpen:n=>e({isNewPromptModalOpen:n}),isSignalDetailOpen:!1,selectedSignal:null,openSignalDetail:n=>e({isSignalDetailOpen:!0,selectedSignal:n}),closeSignalDetail:()=>e({isSignalDetailOpen:!1,selectedSignal:null}),selectedPromptId:null,setSelectedPromptId:n=>e({selectedPromptId:n}),promptsActiveTab:"reports",promptActionMode:null,healthChecks:[],showHealthCheckModal:!1,addHealthCheck:n=>{e(s=>({healthChecks:[...s.healthChecks,n]})),t().triggerSync()},updateHealthCheck:(n,s)=>{e(r=>({healthChecks:r.healthChecks.map(a=>a.id===n?{...a,...s}:a)})),t().triggerSync()},deleteHealthCheck:async n=>{const s=t().getClient();s&&await bP(s,n),e(r=>({healthChecks:r.healthChecks.filter(a=>a.id!==n)})),t().triggerSync()},setHealthChecks:n=>{e({healthChecks:n}),t().triggerSync()},navigateToEggId:null,setNavigateToEggId:n=>e({navigateToEggId:n}),clearNavigateToEggId:()=>e({navigateToEggId:null}),syncStatus:{syncing:!1,lastSynced:null,error:null,loading:!1},getClient:()=>{const n=t(),{url:s,anonKey:r}=n.settings.supabase;return s&&r?oP(s,r):null},isCloudInitialized:!1,isInitializing:!1,initializeFromCloud:async()=>{const n=t(),s=n.getClient();if(localStorage.getItem("prompthatcher-reset-pending"))return localStorage.removeItem("prompthatcher-reset-pending"),e({isCloudInitialized:!0}),t().addLog("system","Fresh start - skipping cloud data load"),{success:!0,freshStart:!0};if(!s)return e({isCloudInitialized:!0}),t().addLog("system","App started in offline mode (no Supabase config)"),{success:!1,error:"Supabase not configured"};if(n.isInitializing)return{success:!1,error:"Already initializing"};t().addLog("sync","Initializing from Supabase cloud..."),e({isInitializing:!0});try{const a=await t().loadFromCloud();return e({isCloudInitialized:!0,isInitializing:!1}),a.success&&t().addLog("sync","Cloud initialization complete"),a}catch(a){return t().addLog("error",`Cloud initialization failed: ${a.message}`),e({isCloudInitialized:!0,isInitializing:!1}),{success:!1,error:a.message}}},syncToCloud:async()=>{const n=t(),s=n.getClient();if(!s)return{success:!1,error:"Supabase not configured"};t().addLog("sync","Syncing data to Supabase..."),e({syncStatus:{...n.syncStatus,syncing:!0,error:null}});try{const[r,a,o,l,c]=await Promise.all([lP(s,n.prompts),cP(s,n.signals),mP(s,n.eggs),uP(s,n.settings),yP(s,n.healthChecks)]),u=!r.success||!a.success||!o.success||!l.success||!c.success,d=r.error||a.error||o.error||l.error||c.error;return e({syncStatus:{syncing:!1,lastSynced:u?n.syncStatus.lastSynced:new Date().toISOString(),error:u?d:null,loading:!1}}),u?t().addLog("error",`Sync failed: ${d}`):(t().addLog("sync",`Sync complete: ${n.prompts.length} prompts, ${n.signals.length} signals, ${n.eggs.length} eggs, ${n.healthChecks.length} health checks`),e(h=>({settings:{...h.settings,supabase:{...h.settings.supabase,connected:!0}}}))),{success:!u,error:d}}catch(r){return t().addLog("error",`Sync error: ${r.message}`),e({syncStatus:{...n.syncStatus,syncing:!1,error:r.message,loading:!1}}),{success:!1,error:r.message}}},loadFromCloud:async()=>{const n=t(),s=n.getClient();if(!s)return{success:!1,error:"Supabase not configured"};t().addLog("sync","Loading data from Supabase..."),e({syncStatus:{...n.syncStatus,loading:!0,error:null}});try{const[r,a,o,l,c]=await Promise.all([dP(s),hP(s),gP(s),fP(s),vP(s)]);if(r.success&&(t().addLog("sync",`Loaded ${r.data.length} prompts from cloud`),e({prompts:r.data})),a.success&&(t().addLog("sync",`Loaded ${a.data.length} signals from cloud`),e({signals:a.data})),o.success){const u=o.data.filter(h=>h.status==="incubating").length,d=o.data.filter(h=>h.status==="hatched").length;t().addLog("sync",`Loaded ${o.data.length} eggs (${u} incubating, ${d} hatched)`),e({eggs:o.data})}return l.success&&l.data&&(t().addLog("sync","Loaded settings from cloud"),e(u=>({settings:{...u.settings,aiProvider:l.data.aiProvider||u.settings.aiProvider,aiModel:l.data.aiModel||u.settings.aiModel,systemPrompt:l.data.systemPrompt||u.settings.systemPrompt}}))),c.success&&(t().addLog("sync",`Loaded ${c.data.length} health checks from cloud`),e({healthChecks:c.data})),e({syncStatus:{syncing:!1,lastSynced:new Date().toISOString(),error:null,loading:!1},settings:{...t().settings,supabase:{...t().settings.supabase,connected:!0}}}),t().addLog("system","Cloud data loaded successfully"),{success:!0}}catch(r){return t().addLog("error",`Failed to load from cloud: ${r.message}`),e({syncStatus:{...n.syncStatus,loading:!1,error:r.message}}),{success:!1,error:r.message}}},repairEggsInCloud:async()=>{const n=t().getClient();if(!n)return t().addLog("error","Cannot repair eggs: Supabase not configured"),{success:!1,error:"Supabase not configured"};t().addLog("sync","Starting repair of eggs with empty fields...");try{const s=await pP(n);return s.success?s.repaired>0?(t().addLog("sync",`Repaired ${s.repaired}/${s.total} eggs with empty fields`),await t().loadFromCloud()):t().addLog("sync",`All ${s.total} eggs have valid data, no repair needed`):t().addLog("error",`Failed to repair eggs: ${s.error}`),s}catch(s){return t().addLog("error",`Repair eggs error: ${s.message}`),{success:!1,error:s.message}}},triggerSync:()=>{const n=t();n.settings.supabase.connected&&!n.syncStatus.syncing&&setTimeout(()=>{t().syncToCloud()},1e3)}}),{name:"prompthatcher-storage",partialize:e=>({onboardingCompleted:e.onboardingCompleted,settings:{supabase:e.settings.supabase,tradingPlatform:e.settings.tradingPlatform,apiKeys:e.settings.apiKeys,aiProvider:e.settings.aiProvider}}),merge:(e,t)=>{var n,s,r;return{...t,...e,settings:{...t.settings,...(e==null?void 0:e.settings)||{},supabase:{...t.settings.supabase,...((n=e==null?void 0:e.settings)==null?void 0:n.supabase)||{}},tradingPlatform:{...t.settings.tradingPlatform,...((s=e==null?void 0:e.settings)==null?void 0:s.tradingPlatform)||{}},apiKeys:{...t.settings.apiKeys,...((r=e==null?void 0:e.settings)==null?void 0:r.apiKeys)||{}}}}}})),om=[{id:"prompts",label:"Prompts",icon:Qn},{id:"incubator",label:"Incubator",icon:Ba},{id:"signals",label:"Signals",icon:ey},{id:"settings",label:"Settings",icon:ty}];function HP(){const e=W(s=>s.activeTab)||"prompts",t=W(s=>s.setActiveTab),n=om.findIndex(s=>s.id===e);return i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-quant-card/95 backdrop-blur-lg border-t border-quant-border safe-area-bottom z-50",children:i.jsxs("div",{className:"relative flex justify-around items-center h-16 max-w-lg mx-auto px-2",children:[i.jsx($.div,{className:"absolute top-0 w-8 h-0.5 bg-accent-cyan rounded-full",animate:{left:`calc(${(n+.5)*25}% - 1rem)`},transition:{type:"spring",stiffness:500,damping:30}}),om.map(s=>{const r=s.icon,a=e===s.id;return i.jsxs("button",{onClick:()=>t(s.id),className:"relative flex flex-col items-center justify-center w-full h-full",children:[i.jsxs($.div,{initial:!1,animate:{scale:a?1.1:1,y:a?-2:0},className:"relative",children:[a&&i.jsx($.div,{layoutId:"navGlow",className:"absolute -inset-3 bg-accent-cyan/20 rounded-full blur-lg",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),i.jsx(r,{size:24,className:`relative z-10 transition-colors duration-200 ${a?"text-accent-cyan":"text-gray-500"}`,strokeWidth:a?2.5:2})]}),i.jsx("span",{className:`text-[10px] mt-1 font-medium transition-colors duration-200 ${a?"text-accent-cyan":"text-gray-500"}`,children:s.label})]},s.id)})]})})}function WP(){const e=W(h=>h.syncStatus)||{},t=W(h=>h.settings)||{},n=W(h=>h.syncToCloud);W(h=>h.loadFromCloud);const s=t.supabase||{},r=s.connected||!1,{syncing:a=!1,loading:o=!1,lastSynced:l=null,error:c=null}=e,u=()=>{if(!l)return"Never";const h=new Date(l),p=new Date-h,g=Math.floor(p/6e4),v=Math.floor(g/60);return g<1?"Just now":g<60?`${g}m ago`:v<24?`${v}h ago`:h.toLocaleDateString()},d=()=>{!a&&!o&&n()};return!s.url||!s.anonKey?null:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Qe,{mode:"wait",children:a||o?i.jsxs($.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center gap-1.5 text-accent-cyan",children:[i.jsx(cn,{size:14,className:"animate-spin"}),i.jsx("span",{className:"text-xs",children:o?"Loading...":"Syncing..."})]},"syncing"):c?i.jsxs($.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:d,className:"flex items-center gap-1.5 text-accent-red hover:text-accent-red/80 transition-colors",title:c,children:[i.jsx(We,{size:14}),i.jsx("span",{className:"text-xs",children:"Sync failed"})]},"error"):r?i.jsxs($.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:d,className:"flex items-center gap-1.5 text-accent-green hover:text-accent-green/80 transition-colors",title:`Last synced: ${u()}`,children:[i.jsx(K0,{size:14}),i.jsx("span",{className:"text-xs hidden sm:inline",children:u()})]},"connected"):i.jsxs($.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:d,className:"flex items-center gap-1.5 text-gray-500 hover:text-gray-400 transition-colors",children:[i.jsx(OS,{size:14}),i.jsx("span",{className:"text-xs",children:"Offline"})]},"disconnected")})})}function Sl({title:e,subtitle:t,rightAction:n}){const s=W(f=>f.priceStatus)||{},r=W(f=>f.refreshPrices),{isFetching:a=!1,lastUpdated:o=null,source:l=null,fallbackUsed:c=!1,error:u=null}=s,d=async()=>{a||await r()},h=()=>o?new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"Never";return i.jsx($.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 z-30 bg-quant-bg/80 backdrop-blur-lg border-b border-quant-border px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold gradient-text",children:e}),t&&i.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:t})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:d,disabled:a,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-all ${a?"bg-accent-cyan/10 text-accent-cyan":u?"bg-accent-red/10 text-accent-red hover:bg-accent-red/20":"bg-quant-surface text-gray-400 hover:text-accent-cyan hover:bg-quant-card"}`,title:u?`Error: ${u}`:`Last update: ${h()}${l?` (${l})`:""}${c?" [fallback]":""}`,children:[i.jsx(cn,{size:14,className:a?"animate-spin":""}),i.jsx("span",{className:"text-xs font-medium",children:a?"Syncing...":h()}),l&&!a&&i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${c?"bg-accent-yellow/20 text-accent-yellow":"bg-accent-green/20 text-accent-green"}`,children:l==="binance"?"BN":"TV"})]}),i.jsx(WP,{}),n&&n]})]})})}function Yt({size:e=48,status:t="incubating",winRate:n=0,className:s=""}){const r=()=>t==="expired"?"#f97316":t==="hatched"?n>=50?"#10b981":"#ef4444":"#00f0ff",a=()=>t==="incubating"?.4:t==="expired"?.35:t==="hatched"&&n>=50?.6:.3;if(t==="hatched"){const o=r();return i.jsxs($.svg,{viewBox:"0 0 100 100",width:e,height:e,className:s,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"hatchedGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",style:{stopColor:o,stopOpacity:1}}),i.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:1}})]}),i.jsxs("filter",{id:"glowHatched",children:[i.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),i.jsxs("feMerge",{children:[i.jsx("feMergeNode",{in:"coloredBlur"}),i.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),i.jsx("ellipse",{cx:"50",cy:"70",rx:"28",ry:"20",fill:o,opacity:a(),filter:"url(#glowHatched)"}),i.jsx($.path,{d:`M 22 65
             Q 22 90, 50 90
             Q 78 90, 78 65
             L 72 55
             L 65 62
             L 55 50
             L 45 60
             L 35 52
             L 28 58
             Z`,fill:"url(#hatchedGrad)",initial:{scale:.8,y:10},animate:{scale:1,y:0},transition:{duration:.4}}),i.jsx("path",{d:`M 30 65
             Q 30 82, 50 82
             Q 70 82, 70 65
             L 65 58
             L 55 55
             L 45 60
             L 35 55
             Z`,fill:"#0a0e17",opacity:"0.3"}),i.jsxs($.g,{initial:{scale:0,y:10},animate:{scale:1,y:0},transition:{delay:.3,type:"spring",stiffness:300},children:[i.jsx($.path,{d:"M 50 15 L 53 28 L 65 28 L 55 36 L 59 50 L 50 42 L 41 50 L 45 36 L 35 28 L 47 28 Z",fill:o,initial:{rotate:-20},animate:{rotate:0},transition:{delay:.4}}),i.jsx($.circle,{cx:"35",cy:"22",r:"2",fill:o,opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.5}}),i.jsx($.circle,{cx:"65",cy:"20",r:"2.5",fill:o,opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.6}}),i.jsx($.circle,{cx:"70",cy:"35",r:"1.5",fill:o,opacity:"0.6",initial:{scale:0},animate:{scale:1},transition:{delay:.7}})]})]})}if(t==="expired"){const o=r();return i.jsxs($.svg,{viewBox:"0 0 100 100",width:e,height:e,className:s,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"expiredGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",style:{stopColor:o,stopOpacity:.6}}),i.jsx("stop",{offset:"100%",style:{stopColor:"#6b7280",stopOpacity:.6}})]}),i.jsxs("filter",{id:"glowExpired",children:[i.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),i.jsxs("feMerge",{children:[i.jsx("feMergeNode",{in:"coloredBlur"}),i.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),i.jsx("ellipse",{cx:"50",cy:"55",rx:"28",ry:"36",fill:"url(#expiredGrad)",opacity:"0.5"}),i.jsxs($.g,{filter:"url(#glowExpired)",children:[i.jsx($.circle,{cx:"50",cy:"55",r:"18",stroke:o,strokeWidth:"3",fill:"#0a0e17",fillOpacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{duration:.3}}),i.jsx("line",{x1:"50",y1:"40",x2:"50",y2:"43",stroke:o,strokeWidth:"2"}),i.jsx("line",{x1:"50",y1:"67",x2:"50",y2:"70",stroke:o,strokeWidth:"2"}),i.jsx("line",{x1:"35",y1:"55",x2:"38",y2:"55",stroke:o,strokeWidth:"2"}),i.jsx("line",{x1:"62",y1:"55",x2:"65",y2:"55",stroke:o,strokeWidth:"2"}),i.jsx($.line,{x1:"50",y1:"55",x2:"50",y2:"45",stroke:o,strokeWidth:"2.5",strokeLinecap:"round",initial:{rotate:-90,originX:"50px",originY:"55px"},animate:{rotate:0},transition:{delay:.3,duration:.4}}),i.jsx($.line,{x1:"50",y1:"55",x2:"58",y2:"55",stroke:o,strokeWidth:"2.5",strokeLinecap:"round",initial:{rotate:-180,originX:"50px",originY:"55px"},animate:{rotate:0},transition:{delay:.4,duration:.3}}),i.jsx("circle",{cx:"50",cy:"55",r:"2",fill:o})]})]})}return i.jsxs($.svg,{viewBox:"0 0 100 100",width:e,height:e,className:`egg-incubating ${s}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"eggGradIncubating",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",style:{stopColor:r(),stopOpacity:1}}),i.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:1}})]}),i.jsxs("filter",{id:"glowIncubating",children:[i.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),i.jsxs("feMerge",{children:[i.jsx("feMergeNode",{in:"coloredBlur"}),i.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),i.jsx("ellipse",{cx:"50",cy:"55",rx:"32",ry:"40",fill:r(),opacity:a(),filter:"url(#glowIncubating)"}),i.jsx("ellipse",{cx:"50",cy:"55",rx:"28",ry:"36",fill:"url(#eggGradIncubating)"}),i.jsx("ellipse",{cx:"50",cy:"55",rx:"23",ry:"31",fill:"#0a0e17",opacity:"0.25"}),i.jsx("ellipse",{cx:"42",cy:"42",rx:"7",ry:"9",fill:"white",opacity:"0.35"}),i.jsx($.ellipse,{cx:"50",cy:"55",rx:"28",ry:"36",fill:"none",stroke:r(),strokeWidth:"2",initial:{scale:1,opacity:.5},animate:{scale:1.2,opacity:0},transition:{duration:1.5,repeat:1/0,ease:"easeOut"}})]})}const Fu={price:{icon:Pt,color:"text-accent-green",bgColor:"bg-accent-green/20"},sync:{icon:Mo,color:"text-accent-cyan",bgColor:"bg-accent-cyan/20"},trade:{icon:Ua,color:"text-accent-yellow",bgColor:"bg-accent-yellow/20"},egg:{icon:Yt,color:"text-purple-400",bgColor:"bg-purple-400/20",isComponent:!0},system:{icon:Tu,color:"text-blue-400",bgColor:"bg-blue-400/20"},error:{icon:qa,color:"text-accent-red",bgColor:"bg-accent-red/20"},ai:{icon:wr,color:"text-pink-400",bgColor:"bg-pink-400/20"}};function Py(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function GP({log:e,isNew:t}){const n=Fu[e.type]||Fu.system,s=n.icon;return i.jsxs($.div,{initial:t?{opacity:0,x:-20}:!1,animate:{opacity:1,x:0},className:"flex items-start gap-2 py-1.5 px-2 hover:bg-white/5 rounded transition-colors group",children:[i.jsx("div",{className:`shrink-0 p-1 rounded ${n.bgColor}`,children:n.isComponent?i.jsx("div",{className:"w-3 h-3",children:i.jsx(Yt,{size:12,status:"incubating"})}):i.jsx(s,{size:12,className:n.color})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-xs text-gray-300 font-mono leading-relaxed break-words",children:e.message})}),i.jsx("span",{className:"shrink-0 text-[10px] text-gray-600 font-mono opacity-0 group-hover:opacity-100 transition-opacity",children:Py(e.timestamp)})]})}function KP(){const{eggs:e,signals:t,prices:n,priceStatus:s,refreshPrices:r}=W(),[a,o]=k.useState(!1),l=e.filter(p=>p.status==="incubating"),c=t.filter(p=>p.status==="active");t.filter(p=>p.status==="closed");const u=l.map(p=>{const g=t.filter(m=>p.trades.includes(m.id)),v=g.filter(m=>m.status==="closed").length,b=g.filter(m=>m.result==="win").length,x=g.filter(m=>m.result==="loss").length;return{egg:p,total:g.length,closed:v,wins:b,losses:x}}),d=async()=>{o(!0),await r(),o(!1)},[h,f]=k.useState(60);return k.useEffect(()=>{const p=setInterval(()=>{f(g=>g<=1?60:g-1)},1e3);return()=>clearInterval(p)},[s.lastUpdated]),k.useEffect(()=>{f(60)},[s.lastUpdated]),i.jsxs("div",{className:"p-3 border-b border-quant-border bg-black/30 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-lg bg-quant-surface",children:[i.jsx(Yt,{size:16,status:"incubating"}),i.jsxs("span",{className:"text-xs font-mono text-white",children:[l.length," eggs"]})]}),i.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-lg bg-quant-surface",children:[i.jsx(Ua,{size:14,className:"text-accent-yellow"}),i.jsxs("span",{className:"text-xs font-mono text-white",children:[c.length," active"]})]})]}),i.jsxs("button",{onClick:d,disabled:a||s.isFetching,className:`flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs font-mono transition-all ${a||s.isFetching?"bg-accent-cyan/20 text-accent-cyan":"bg-quant-surface text-gray-400 hover:text-white hover:bg-quant-border"}`,children:[i.jsx(cn,{size:12,className:a||s.isFetching?"animate-spin":""}),a||s.isFetching?"Checking...":`Check (${h}s)`]})]}),u.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Egg Execution Progress"}),u.map(({egg:p,total:g,closed:v,wins:b,losses:x})=>{const m=g>0?v/g*100:0,y=g-v;return i.jsxs("div",{className:"bg-quant-surface/50 rounded-lg p-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs text-white font-medium truncate max-w-[150px]",children:p.promptName}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-[10px] text-accent-green font-mono",children:[b,"W"]}),i.jsxs("span",{className:"text-[10px] text-accent-red font-mono",children:[x,"L"]}),i.jsxs("span",{className:"text-[10px] text-accent-cyan font-mono",children:[y,"A"]})]})]}),i.jsxs("div",{className:"h-1.5 bg-quant-bg rounded-full overflow-hidden flex",children:[b>0&&i.jsx("div",{className:"h-full bg-accent-green",style:{width:`${b/g*100}%`}}),x>0&&i.jsx("div",{className:"h-full bg-accent-red",style:{width:`${x/g*100}%`}}),y>0&&i.jsx("div",{className:"h-full bg-accent-cyan/30 animate-pulse",style:{width:`${y/g*100}%`}})]}),i.jsxs("div",{className:"flex justify-between mt-1",children:[i.jsxs("span",{className:"text-[10px] text-gray-500",children:[v,"/",g," executed"]}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:[m.toFixed(0),"%"]})]})]},p.id)})]}),c.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Active Trades Monitoring"}),i.jsx("div",{className:"grid grid-cols-2 gap-1",children:c.slice(0,6).map(p=>{var y;const g=(y=n[p.asset])==null?void 0:y.price,v=parseFloat(p.entry),b=parseFloat(p.takeProfit);parseFloat(p.stopLoss);const x=p.strategy==="LONG";let m=0;return g&&(x?m=Math.min(100,Math.max(0,(g-v)/(b-v)*100)):m=Math.min(100,Math.max(0,(v-g)/(v-b)*100))),i.jsxs("div",{className:"bg-quant-surface/30 rounded p-1.5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] font-medium text-white",children:p.asset}),i.jsx("span",{className:`text-[9px] px-1 rounded ${x?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:p.strategy})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"flex-1 h-1 bg-quant-bg rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-accent-red via-accent-yellow to-accent-green",style:{width:`${m}%`}})}),i.jsxs("span",{className:"text-[9px] text-accent-cyan font-mono",children:[m.toFixed(0),"%"]})]})]},p.id)})}),c.length>6&&i.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",c.length-6," more trades..."]})]}),l.length===0&&c.length===0&&i.jsx("div",{className:"text-center py-2",children:i.jsx("span",{className:"text-xs text-gray-500",children:"No active incubations"})})]})}function JP(){const{activityLogs:e,clearLogs:t,priceStatus:n,syncStatus:s}=W(),[r,a]=k.useState(!0),[o,l]=k.useState(!0),c=k.useRef(null),[u,d]=k.useState(new Set);k.useEffect(()=>{if(e.length>0&&e[0]){const p=e[0].id;d(g=>new Set([...g,p])),setTimeout(()=>{d(g=>{const v=new Set(g);return v.delete(p),v})},500)}},[e]),k.useEffect(()=>{c.current&&e.length>0&&(c.current.scrollTop=0)},[e]);const h=n.source!==null||s.lastSynced!==null,f=n.isFetching||s.syncing||s.loading;return i.jsxs("div",{className:"bg-quant-card border border-quant-border rounded-2xl overflow-hidden",children:[i.jsxs("button",{onClick:()=>a(!r),className:"w-full px-4 py-3 flex items-center justify-between bg-quant-surface/50 hover:bg-quant-surface/80 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tu,{size:16,className:"text-accent-cyan"}),i.jsx("span",{className:"text-sm font-medium text-white font-mono",children:"Monitor"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-mono ${h?"bg-accent-green/20 text-accent-green":"bg-gray-500/20 text-gray-500"}`,children:[h?i.jsx(KS,{size:10}):i.jsx(GS,{size:10}),h?"ONLINE":"OFFLINE"]}),f&&i.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-accent-cyan/20 text-accent-cyan text-[10px] font-mono",children:[i.jsx(IS,{size:6,className:"fill-current animate-pulse"}),"CHECKING"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[e.length," logs"]}),r?i.jsx(Cs,{size:16,className:"text-gray-400"}):i.jsx(Bn,{size:16,className:"text-gray-400"})]})]}),i.jsx(Qe,{children:r&&i.jsxs($.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},children:[i.jsx(KP,{}),i.jsxs("div",{className:"px-3 py-2 border-b border-quant-border flex items-center justify-between bg-black/20",children:[i.jsx("button",{onClick:p=>{p.stopPropagation(),l(!o)},className:"text-[10px] text-gray-400 hover:text-white transition-colors",children:o?" Hide Logs":" Show Logs"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex items-center gap-1",children:Object.entries(Fu).slice(0,4).map(([p,g])=>{const v=g.icon,b=e.filter(x=>x.type===p).length;return b===0?null:i.jsxs("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded ${g.bgColor}`,title:`${p}: ${b}`,children:[!g.isComponent&&i.jsx(v,{size:10,className:g.color}),i.jsx("span",{className:`text-[10px] font-mono ${g.color}`,children:b})]},p)})}),i.jsx("button",{onClick:p=>{p.stopPropagation(),t()},className:"p-1 rounded hover:bg-quant-surface transition-colors",title:"Clear logs",children:i.jsx(Vo,{size:12,className:"text-gray-500 hover:text-gray-300"})})]})]}),o&&i.jsx("div",{ref:c,className:"max-h-48 overflow-y-auto hide-scrollbar bg-black/30",children:e.length===0?i.jsxs("div",{className:"py-6 text-center",children:[i.jsx(Tu,{size:20,className:"mx-auto mb-2 text-gray-600"}),i.jsx("p",{className:"text-xs text-gray-500 font-mono",children:"Waiting for activity..."})]}):i.jsx("div",{className:"p-2 space-y-0.5",children:e.map(p=>i.jsx(GP,{log:p,isNew:u.has(p.id)},p.id))})}),n.lastUpdated&&i.jsxs("div",{className:"px-3 py-1.5 border-t border-quant-border bg-black/20 flex items-center justify-between",children:[i.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["Last check: ",Py(n.lastUpdated)]}),n.source&&i.jsx("span",{className:"text-[10px] text-accent-cyan font-mono uppercase",children:n.source})]})]})})]})}const QP={target:"Target Based",scalping:"Scalping",intraday:"Intraday",swing:"Swing"},Qr={anthropic:{name:"Claude",icon:""},google:{name:"Gemini",icon:""},gemini:{name:"Gemini",icon:""},openai:{name:"GPT-4",icon:""},xai:{name:"Grok",icon:""},grok:{name:"Grok",icon:""}};function YP(){const e=W(j=>j.eggs)||[],t=W(j=>j.signals)||[],n=W(j=>j.prices)||{};W(j=>j.priceStatus);const s=W(j=>j.healthChecks)||[],r=W(j=>j.activityLogs)||[],a=W(j=>j.navigateToEggId),o=W(j=>j.clearNavigateToEggId),[l,c]=k.useState("live"),[u,d]=k.useState(null),h=k.useRef({});k.useEffect(()=>{if(a){const j=e.find(O=>String(O.id)===String(a));if(j){const O=j.expiresAt&&new Date(j.expiresAt)<=new Date,C=j.status==="hatched"||j.status==="incubating"&&O,Y=s.some(le=>{var re;return(re=le.prompts)==null?void 0:re.some(he=>he.id===j.promptId)});C?(c("completed"),Y&&R("healthChecks")):c("live"),d(a)}o()}},[a,e,s,o]);const[f,p]=k.useState({}),[g,v]=k.useState({}),[b,x]=k.useState({}),[m,y]=k.useState(!1),w=j=>b[j]||"trades",N=(j,O)=>{x(C=>({...C,[j]:O}))},[T,E]=k.useState("pnl"),[S,R]=k.useState("all"),_=[{id:"pnl",label:"PnL"},{id:"recent",label:"Reciente"},{id:"winRate",label:"Win Rate"},{id:"trades",label:"Trades"}],I=[{id:"all",label:"Todos"},{id:"healthChecks",label:"Health Checks"},{id:"profitable",label:"En Verde"},{id:"unprofitable",label:"En Rojo"}],L=[{id:"hatched",label:"Completados"},{id:"expired",label:"Expirados"}],M=l==="live"?I:[...I,...L];k.useEffect(()=>{M.map(O=>O.id).includes(S)||R("all")},[l]);const z=k.useMemo(()=>{const j=new Set;return s.forEach(O=>{var C;(C=O.prompts)!=null&&C.length&&O.prompts.forEach(Y=>j.add(Y.id))}),j},[s]),H=j=>{p(O=>({...O,[j]:!O[j]}))},G=j=>{v(O=>({...O,[j]:!O[j]}))},J=j=>j.expiresAt&&new Date(j.expiresAt)<=new Date,P=j=>{var O;return((O=n[j])==null?void 0:O.price)||null},F=j=>{const O=P(j.asset);if(!O||j.status==="closed")return j.pnl||0;const C=parseFloat(j.entry);return j.strategy==="LONG"?(O-C)/C*100:(C-O)/C*100},K=j=>{if(j.promptContent&&j.promptContent.trim()!=="")return j.promptContent;const O=j.config||{};return`Estrategia: ${j.promptName||"Estrategia"}

Configuracin:
 Modo: ${O.mode||"auto"}
 Ejecucin: ${O.executionTime||"target"}
 Capital: $${(O.capital||1e3).toLocaleString()}
 Apalancamiento: ${O.leverage||5}x
 Objetivo: ${O.targetPct?`+${O.targetPct}%`:"N/A"}
 IPE Mnimo: ${O.minIpe||80}%
 Modelo AI: ${O.aiModel||O.aiProvider||"gemini"}`},U=j=>{try{if(!(j!=null&&j.trades)||!Array.isArray(j.trades))return 0;const O=t.filter(Y=>j.trades.includes(Y.id));if(O.length===0)return 0;let C=0;return O.forEach(Y=>{C+=F(Y)||0}),C/O.length}catch(O){return console.error("Error calculating egg PnL:",O),0}},Z=j=>{try{if(!(j!=null&&j.trades)||!Array.isArray(j.trades))return{totalPnl:0,winRate:0,totalTrades:0};const O=t.filter(pe=>j.trades.includes(pe.id)),C=O.filter(pe=>pe.status==="closed"),le=J(j)?O:C;if(le.length===0)return{totalPnl:0,winRate:0,totalTrades:O.length};const re=le.map(pe=>{var Rt;if(pe.status==="closed"&&pe.pnl!==void 0)return pe.pnl;const jt=(Rt=n[pe.asset])==null?void 0:Rt.price;if(!jt)return 0;const de=parseFloat(pe.entry)||0;return de===0?0:pe.strategy==="LONG"?(jt-de)/de*100:(de-jt)/de*100}),he=re.filter(pe=>pe>0).length;return{totalPnl:re.length>0?re.reduce((pe,jt)=>pe+jt,0)/re.length:0,winRate:le.length>0?Math.round(he/le.length*100):0,totalTrades:O.length}}catch(O){return console.error("Error calculating egg results:",O),{totalPnl:0,winRate:0,totalTrades:0}}},Ie=k.useMemo(()=>{try{return Array.isArray(e)?e.filter(j=>{if(!j)return!1;const O=J(j),C=Z(j);if(l==="live"){if(!(j.status==="incubating"&&!O))return!1;switch(S){case"healthChecks":return z.has(j.promptId);case"profitable":return C.totalPnl>=0;case"unprofitable":return C.totalPnl<0;default:return!0}}else{if(!(j.status==="hatched"||j.status==="incubating"&&O))return!1;switch(S){case"healthChecks":return z.has(j.promptId);case"profitable":return C.totalPnl>=0;case"unprofitable":return C.totalPnl<0;case"hatched":return j.status==="hatched";case"expired":return j.status==="incubating"&&O;default:return!0}}}).map(j=>({...j,_results:Z(j),_pnl:U(j)||0})).sort((j,O)=>{var C,Y,le,re;switch(T){case"pnl":return(O._pnl||0)-(j._pnl||0);case"winRate":return(((C=O._results)==null?void 0:C.winRate)||0)-(((Y=j._results)==null?void 0:Y.winRate)||0);case"trades":return(((le=O._results)==null?void 0:le.totalTrades)||0)-(((re=j._results)==null?void 0:re.totalTrades)||0);case"recent":default:return new Date(O.createdAt||0)-new Date(j.createdAt||0)}}):[]}catch(j){return console.error("Error filtering eggs:",j),[]}},[e,t,l,S,T,z]),oe=j=>{try{if(!(j!=null&&j.trades)||!Array.isArray(j.trades))return{total:0,closed:0,active:0,isExpired:!1,progress:0};const O=t.filter(re=>j.trades.includes(re.id)),C=O.filter(re=>re.status==="closed").length,Y=j.expiresAt&&new Date(j.expiresAt)<=new Date,le=Y?0:O.length-C;return{total:O.length,closed:C,active:le,isExpired:Y,progress:O.length>0?C/O.length*100:0}}catch(O){return console.error("Error in getEggStatus:",O),{total:0,closed:0,active:0,isExpired:!1,progress:0}}},Oe=j=>{if(!j.expiresAt)return null;const O=new Date(j.expiresAt)-new Date;if(O<=0)return"Expired";const C=Math.floor(O/(1e3*60*60)),Y=Math.floor(C/24);return Y>0?`${Y}d ${C%24}h`:C>0?`${C}h`:"<1h"},ke=j=>{const O=P(j.asset);if(!O||j.status==="closed")return null;const C=parseFloat(j.entry);return j.strategy==="LONG"?(O-C)/C*100:(C-O)/C*100},ft=(j,O)=>{if(O.isExpired)return null;const C=t.filter(re=>j.trades.includes(re.id));if(C.length===0)return null;let Y=0,le=0;return C.forEach(re=>{let he=null;re.status==="closed"&&re.pnl!==void 0?he=re.pnl:he=ke(re),he!==null&&(Y+=he,le++)}),le>0?Y/le:null},ss=j=>{var Y;if(j.status==="closed"&&j.pnl!==void 0)return j.pnl;const O=(Y=n[j.asset])==null?void 0:Y.price;if(!O)return 0;const C=parseFloat(j.entry);return j.strategy==="LONG"?(O-C)/C*100:(C-O)/C*100},rn=j=>{try{if(!(j!=null&&j.trades)||!Array.isArray(j.trades))return{totalTrades:0,closedTrades:0,expiredTrades:0,wins:0,losses:0,winRate:0,totalPnl:0,profitFactor:0};const O=t.filter(ce=>j.trades.includes(ce.id)),C=O.filter(ce=>ce.status==="closed"),Y=O.filter(ce=>ce.status==="active"),le=J(j),re=le?O:C;if(re.length===0)return{totalTrades:O.length,closedTrades:C.length,expiredTrades:le?Y.length:0,wins:0,losses:0,winRate:0,totalPnl:0,profitFactor:0};const he=re.map(ce=>ss(ce)||0),pe=he.length>0?he.reduce((ce,It)=>ce+It,0)/he.length:0,jt=he.filter(ce=>ce>0).length,de=he.filter(ce=>ce<0).length,Rt=he.filter(ce=>ce>0).reduce((ce,It)=>ce+It,0),Sn=Math.abs(he.filter(ce=>ce<0).reduce((ce,It)=>ce+It,0));return{totalTrades:O.length,closedTrades:C.length,expiredTrades:le?Y.length:0,wins:jt,losses:de,winRate:re.length>0?Math.round(jt/re.length*100):0,totalPnl:pe,profitFactor:Sn>0?Rt/Sn:Rt>0?1/0:0}}catch(O){return console.error("Error in calculateEggResults:",O),{totalTrades:0,closedTrades:0,expiredTrades:0,wins:0,losses:0,winRate:0,totalPnl:0,profitFactor:0}}};return i.jsxs($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"pb-4",children:[i.jsx(Sl,{title:"Incubator",subtitle:`${Ie.length} ${l==="live"?"active":"completed"}`}),i.jsxs("div",{className:"px-4 py-3",children:[i.jsxs("div",{className:"flex gap-2 w-full",children:[i.jsxs("button",{onClick:()=>c("live"),className:`flex-1 py-3 rounded-xl text-sm font-semibold transition-all flex items-center justify-center gap-2 ${l==="live"?"bg-accent-cyan text-quant-bg":"bg-quant-surface text-gray-400 border border-quant-border"}`,children:[i.jsx(ey,{size:16}),"Live"]}),i.jsxs("button",{onClick:()=>c("completed"),className:`flex-1 py-3 rounded-xl text-sm font-semibold transition-all flex items-center justify-center gap-2 ${l==="completed"?"bg-accent-green text-quant-bg":"bg-quant-surface text-gray-400 border border-quant-border"}`,children:[i.jsx(PS,{size:16}),"Historial"]})]}),i.jsxs("button",{onClick:()=>y(!m),className:`w-full mt-2 py-2 rounded-lg text-xs font-medium transition-all flex items-center justify-center gap-1.5 ${m?"bg-accent-purple/20 text-accent-purple border border-accent-purple/30":"bg-quant-surface/50 text-gray-500 border border-transparent"}`,children:[i.jsx(Ua,{size:12}),m?"Ocultar Consola":"Mostrar Consola"]})]}),i.jsx(Qe,{children:m&&i.jsx($.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-3 overflow-hidden",children:i.jsx(JP,{})})}),i.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto hide-scrollbar",children:[i.jsx(J0,{size:14,className:"text-gray-500 shrink-0"}),M.map(j=>i.jsx("button",{onClick:()=>R(j.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all shrink-0 ${S===j.id?"bg-accent-cyan/20 text-accent-cyan":"bg-quant-surface text-gray-400"}`,children:j.label},j.id))]}),i.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto hide-scrollbar",children:[i.jsx(TS,{size:14,className:"text-gray-500 shrink-0"}),_.map(j=>i.jsx("button",{onClick:()=>E(j.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all shrink-0 ${T===j.id?"bg-accent-purple/20 text-accent-purple":"bg-quant-surface text-gray-400"}`,children:j.label},j.id))]})]}),i.jsx("div",{className:"px-4 space-y-3",children:Ie.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-quant-surface flex items-center justify-center",children:i.jsx(Yt,{size:48,status:l==="live"?"incubating":"hatched"})}),i.jsxs("p",{className:"text-gray-400 mb-1",children:["No ",l==="live"?"live":"completed"," eggs"]}),i.jsx("p",{className:"text-sm text-gray-500",children:l==="live"?"Create a prompt to start incubating":"Completed eggs appear here"})]}):Ie.map((j,O)=>{var Rt,Sn,ce,It,pt,Ls,ci,$s,Mr,ui,A,ae,me;const C=oe(j),Y=t.filter(q=>j.trades.includes(q.id)),le=u&&String(u)===String(j.id),re=J(j),he=j.status==="hatched"||re,pe=he?null:ft(j,C),jt=Oe(j),de=he?j.results||rn(j):null;return i.jsxs("div",{ref:q=>h.current[j.id]=q,className:`bg-quant-card rounded-2xl overflow-hidden border ${le?"border-accent-cyan shadow-[0_0_20px_rgba(0,255,255,0.3)] ring-1 ring-accent-cyan/50":re?"border-accent-orange/30":j.status==="hatched"?"border-accent-green/30":"border-quant-border"}`,style:{scrollMarginTop:"80px"},children:[i.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>d(le?null:j.id),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[i.jsx(Yt,{size:52,status:re?"expired":j.status,winRate:(de==null?void 0:de.winRate)||0}),!he&&C.active>0&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent-green rounded-full border-2 border-quant-card animate-pulse"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("h3",{className:"font-semibold text-white truncate text-base",children:j.promptName}),pe!=null&&!isNaN(pe)&&i.jsxs("span",{className:`text-lg font-mono font-bold flex-shrink-0 ${pe>=0?"text-accent-green":"text-accent-red"}`,children:[pe>=0?"+":"",(pe||0).toFixed(2),"%"]})]}),i.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-xs text-gray-400",children:[he?i.jsxs("span",{className:re?"text-accent-orange":"text-accent-green",children:[re?" Expired":" Hatched",i.jsx("span",{className:"text-gray-500 mx-1",children:""}),i.jsxs("span",{className:"text-gray-400",children:[(de==null?void 0:de.closedTrades)||C.closed,"/",C.total," closed"]})]}):i.jsxs("span",{className:"text-accent-cyan",children:[C.active," open",i.jsx("span",{className:"text-gray-500 mx-1",children:""}),i.jsxs("span",{className:"text-gray-400",children:[C.closed,"/",C.total," closed"]})]}),!he&&jt&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx($r,{size:11}),jt]})]})]}),!he&&i.jsx("div",{className:"mt-3 h-1.5 bg-quant-surface rounded-full overflow-hidden",children:i.jsx("div",{style:{width:`${C.progress}%`},className:"h-full rounded-full bg-gradient-to-r from-accent-cyan to-accent-green"})})]}),i.jsx("div",{className:"flex-shrink-0 text-gray-500",children:le?i.jsx(Cs,{size:20}):i.jsx(Bn,{size:20})})]}),he&&de&&i.jsx("div",{className:"grid grid-cols-4 gap-2 mt-4 pt-3 border-t border-quant-border",children:[{label:"Closed",value:`${de.closedTrades||0}/${de.totalTrades||0}`,color:"text-white"},{label:"Win Rate",value:`${de.winRate||0}%`,color:(de.winRate||0)>=50?"text-accent-green":"text-accent-red"},{label:"PF",value:de.profitFactor===1/0?"":(de.profitFactor||0).toFixed(1),color:(de.profitFactor||0)>=1?"text-accent-green":"text-accent-red"},{label:"PnL",value:`${(de.totalPnl||0)>=0?"+":""}${(de.totalPnl||0).toFixed(1)}%`,color:(de.totalPnl||0)>=0?"text-accent-green":"text-accent-red"}].map(q=>i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase block",children:q.label}),i.jsx("span",{className:`text-sm font-mono ${q.color}`,children:q.value})]},q.label))})]}),le&&i.jsx("div",{className:"border-t border-quant-border",children:i.jsxs("div",{className:"bg-quant-surface/20",children:[i.jsx("div",{className:"flex border-b border-quant-border",children:[{id:"trades",label:"Trades",icon:Pt},{id:"config",label:"Config",icon:ga},{id:"ai",label:"AI Reasoning",icon:Cp},{id:"log",label:"LOG",icon:xa}].map(q=>i.jsxs("button",{onClick:()=>N(j.id,q.id),className:`flex-1 py-2.5 text-xs font-medium flex items-center justify-center gap-1.5 transition-colors ${w(j.id)===q.id?"text-accent-cyan border-b-2 border-accent-cyan bg-accent-cyan/5":"text-gray-500 hover:text-gray-300"}`,children:[i.jsx(q.icon,{size:14}),q.label]},q.id))}),i.jsxs("div",{className:"p-3 space-y-4",children:[w(j.id)==="config"&&(()=>{var mt,Ee;const q=j.config||{capital:j.totalCapital||1e3,leverage:5,executionTime:j.executionTime||"target",aiModel:"gemini",minIpe:80,numResults:Y.length,targetPct:null};let ve=q.targetPct;if(!ve&&Y.length>0){const Ue=Y[0],Ds=parseFloat(Ue.rewardPercent)||0,rs=Ue.leverage||q.leverage||5;ve=Math.round(Ds*rs)}const B={...q,targetPct:ve},Fe=B.targetPct?B.capital*B.targetPct/100:0,ee=B.capital+Fe,He=B.targetPct?B.targetPct/B.leverage:0,be=f[j.id];return i.jsxs("div",{className:"bg-quant-card rounded-xl border border-quant-border overflow-hidden",children:[i.jsxs("button",{onClick:()=>H(j.id),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-quant-surface/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ga,{size:16,className:"text-accent-cyan"}),i.jsxs("span",{className:"font-mono text-white font-medium",children:["$",B.capital.toLocaleString()]}),i.jsx("span",{className:"text-gray-500",children:""}),i.jsxs("span",{className:"font-mono text-accent-green font-medium",children:["$",ee.toLocaleString()]}),B.targetPct>0&&i.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-accent-green/10 text-accent-green font-medium",children:["+",B.targetPct,"%"]})]}),i.jsx(Bn,{size:18,className:`text-gray-500 transition-transform ${be?"rotate-180":""}`})]}),be&&i.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-quant-border",children:[B.targetPct>0&&i.jsxs("div",{className:"text-center text-sm text-gray-400 mb-3",children:["Con ",i.jsxs("span",{className:"text-white font-medium",children:[B.leverage||1,"x"]})," leverage, solo necesitas ",i.jsxs("span",{className:"text-accent-cyan font-medium",children:[(He||0).toFixed(1),"%"]})," de movimiento"]}),i.jsxs("div",{className:"flex items-center justify-center gap-3 text-[10px] text-gray-500",children:[i.jsx("span",{children:QP[B.executionTime]||B.executionTime}),i.jsx("span",{children:""}),i.jsxs("span",{children:[(mt=Qr[B.aiModel])==null?void 0:mt.icon," ",((Ee=Qr[B.aiModel])==null?void 0:Ee.name)||B.aiModel]}),i.jsx("span",{children:""}),i.jsxs("span",{children:["IPE ",B.minIpe,"%"]}),i.jsx("span",{children:""}),i.jsxs("span",{children:[B.numResults," trade",B.numResults!==1?"s":""]})]})]})]})})(),w(j.id)==="trades"&&i.jsx("div",{children:(()=>{const q=ee=>{const He=ee>=0?"+":"-",be=Math.abs(ee);return`${He}$${be.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`},ve=Y.filter(ee=>ee.status!=="closed"),B=Y.filter(ee=>ee.status==="closed"),Fe=(ee,He,be)=>{var uh,dh,hh;const mt=ee.strategy==="LONG",Ee=ee.status==="closed",Ue=P(ee.asset),Ds=ke(ee),rs=g[ee.id],ot=parseFloat(ee.entry),di=parseFloat(ee.takeProfit),Ms=parseFloat(ee.stopLoss),zs=ee.leverage||((uh=j.config)==null?void 0:uh.leverage)||5,Ty=((dh=j.config)==null?void 0:dh.capital)||ee.capital||1e3,Cy=Y.length||1,hi=ee.capital||Ty/Cy,oh=mt?(di-ot)/ot*100:(ot-di)/ot*100,lh=mt?(ot-Ms)/ot*100:(Ms-ot)/ot*100,Ey=oh/100*zs*hi,Ay=lh/100*zs*hi,Fs=Ee?ee.pnl||0:Ds||0,ch=Fs/100*zs*hi,fi=Fs>=0,Ry=Ee?ee.result==="win"?"bg-accent-green":"bg-accent-red":fi?"bg-accent-green":"bg-accent-red";return i.jsxs("div",{children:[i.jsxs("div",{onClick:()=>G(ee.id),className:`flex items-center cursor-pointer transition-colors hover:bg-quant-surface/50 ${be?"":"border-t border-quant-border/50"} ${rs?"bg-quant-surface/30":""} ${Ee?"opacity-60":""}`,children:[i.jsx("div",{className:`w-1 self-stretch ${Ry}`}),i.jsxs("div",{className:"flex items-center gap-1.5 py-2.5 px-3 min-w-[80px]",children:[mt?i.jsx(Pt,{size:12,className:"text-accent-green"}):i.jsx(Xn,{size:12,className:"text-accent-red"}),i.jsx("span",{className:`font-medium text-sm ${Ee?"text-gray-400":"text-white"}`,children:(hh=ee.asset)==null?void 0:hh.replace("/USDT","")})]}),i.jsxs("div",{className:"flex-1 py-2.5 px-2 font-mono text-xs",children:[i.jsx("span",{className:"text-gray-500",children:ot.toFixed(2)}),i.jsx("span",{className:"text-gray-600 mx-1",children:""}),i.jsx("span",{className:Ee?"text-gray-400":"text-white",children:Ee?(ee.exitPrice||ot).toFixed(2):(Ue||ot).toFixed(2)})]}),Ee?i.jsx("div",{className:`py-2.5 px-2 text-xs font-bold min-w-[70px] text-right flex items-center justify-end gap-1 ${ee.result==="win"?"text-accent-green":"text-accent-red"}`,children:ee.result==="win"?i.jsxs(i.Fragment,{children:["WIN ",i.jsx(fr,{size:12})]}):i.jsxs(i.Fragment,{children:["LOSS ",i.jsx(ro,{size:12})]})}):i.jsx("div",{className:`py-2.5 px-2 font-mono text-sm font-bold min-w-[85px] text-right ${fi?"text-accent-green":"text-accent-red"}`,children:q(ch)}),i.jsxs("div",{className:`py-2.5 px-3 font-mono text-xs min-w-[65px] text-right ${fi?"text-accent-green":"text-accent-red"}`,children:[Fs>=0?"+":"",Fs.toFixed(2),"%"]})]}),rs&&i.jsx("div",{className:"border-t border-quant-border/30",children:i.jsxs("div",{className:"p-3 bg-quant-surface/20",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:`text-2xl font-bold font-mono ${fi?"text-accent-green":"text-accent-red"}`,children:[q(ch),i.jsxs("span",{className:"text-sm ml-2 opacity-70",children:["(",Fs>=0?"+":"",Fs.toFixed(2),"%)"]})]}),Ee&&i.jsx("span",{className:`text-xs px-2 py-1 rounded-full flex items-center gap-1 ${ee.result==="win"?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:ee.result==="win"?i.jsxs(i.Fragment,{children:[i.jsx(fr,{size:12})," WIN"]}):i.jsxs(i.Fragment,{children:[i.jsx(ro,{size:12})," LOSS"]})})]}),!Ee&&Ue&&!C.isExpired&&i.jsx("div",{className:"mb-3",children:(()=>{const fh=di-Ms,ph=(Ue-Ms)/fh*100,mh=(ot-Ms)/fh*100,Iy=Math.max(0,Math.min(100,mt?ph:100-ph)),Oy=Math.max(0,Math.min(100,mt?mh:100-mh)),Ly=mt?Ue>ot:Ue<ot;return i.jsxs("div",{className:"h-2 bg-quant-bg rounded-full relative",children:[i.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-10",style:{left:`${Oy}%`}}),i.jsx("div",{style:{width:`${Iy}%`},className:`h-full rounded-full ${Ly?"bg-accent-green":"bg-accent-red"}`}),i.jsx("div",{className:"absolute -bottom-4 left-0 text-[9px] text-accent-red font-mono",children:"SL"}),i.jsx("div",{className:"absolute -bottom-4 right-0 text-[9px] text-accent-green font-mono",children:"TP"})]})})()}),i.jsxs("div",{className:"flex items-center gap-2 mb-3 mt-4 flex-wrap",children:[i.jsxs("span",{className:"text-xs px-2 py-1 rounded-lg bg-quant-bg text-gray-400 font-mono",children:["E ",ot.toFixed(2)]}),!Ee&&Ue&&i.jsxs("span",{className:"text-xs px-2 py-1 rounded-lg bg-accent-cyan/10 text-accent-cyan font-mono",children:["Now ",Ue.toFixed(2)]}),Ee&&ee.exitPrice&&i.jsxs("span",{className:"text-xs px-2 py-1 rounded-lg bg-gray-500/10 text-gray-400 font-mono",children:["Exit ",parseFloat(ee.exitPrice).toFixed(2)]}),i.jsxs("span",{className:"text-xs px-2 py-1 rounded-lg bg-accent-green/10 text-accent-green font-mono",children:["TP ",di.toFixed(2)]}),i.jsxs("span",{className:"text-xs px-2 py-1 rounded-lg bg-accent-red/10 text-accent-red font-mono",children:["SL ",Ms.toFixed(2)]})]}),!Ee&&i.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-quant-bg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-500 mb-0.5",children:"si gana"}),i.jsxs("div",{className:"text-accent-green font-bold font-mono",children:[q(Ey),i.jsxs("span",{className:"text-xs opacity-70 ml-1",children:["(+",(oh*zs).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[10px] text-gray-500 mb-0.5",children:"si pierde"}),i.jsxs("div",{className:"text-accent-red font-bold font-mono",children:[q(-Ay),i.jsxs("span",{className:"text-xs opacity-70 ml-1",children:["(-",(lh*zs).toFixed(0),"%)"]})]})]})]}),i.jsxs("div",{className:"text-[10px] text-gray-500 text-center mt-2",children:[q(hi).replace("+",""),"  ",zs,"x leverage"]})]})})]},ee.id)};return i.jsxs("div",{className:"space-y-3",children:[ve.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-green opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-accent-green"})]}),i.jsxs("span",{className:"text-[10px] text-accent-green uppercase tracking-wider font-medium",children:["Activos (",ve.length,")"]})]}),i.jsx("div",{className:"rounded-xl overflow-hidden border border-accent-green/30 bg-accent-green/5",children:ve.map((ee,He)=>Fe(ee,He,He===0))})]}),B.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-gray-500"}),i.jsxs("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider font-medium",children:["Cerrados (",B.length,")"]})]}),i.jsx("div",{className:"rounded-xl overflow-hidden border border-quant-border",children:B.map((ee,He)=>Fe(ee,He,He===0))})]}),Y.length===0&&i.jsx("div",{className:"text-center text-gray-500 py-8",children:"No hay trades en este egg"})]})})()}),w(j.id)==="ai"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(qS,{size:14,className:"text-accent-purple"}),i.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Tu Estrategia de Trading"})]}),i.jsx("div",{className:"bg-quant-card rounded-xl p-3 border border-quant-border",children:i.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:K(j)})})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-accent-cyan/10 text-accent-cyan",children:["$",(((Rt=j.config)==null?void 0:Rt.capital)||j.totalCapital||1e3).toLocaleString()," capital"]}),i.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-accent-purple/10 text-accent-purple",children:[((Sn=j.config)==null?void 0:Sn.leverage)||5,"x leverage"]}),i.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-accent-green/10 text-accent-green",children:["+",((ce=j.config)==null?void 0:ce.targetPct)||10,"% objetivo"]}),i.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-quant-surface text-gray-400",children:[((Ls=Qr[((It=j.config)==null?void 0:It.aiProvider)||((pt=j.config)==null?void 0:pt.aiModel)])==null?void 0:Ls.icon)||""," ",((Mr=Qr[((ci=j.config)==null?void 0:ci.aiProvider)||(($s=j.config)==null?void 0:$s.aiModel)])==null?void 0:Mr.name)||"AI"]}),i.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-quant-surface text-gray-400",children:["IPE ",((ui=j.config)==null?void 0:ui.minIpe)||80,"%"]}),i.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-quant-surface text-gray-400",children:((A=j.config)==null?void 0:A.mode)||"auto"})]}),i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>H(`prompt-${j.id}`),className:"flex items-center gap-2 mb-2 w-full",children:[i.jsx(wr,{size:14,className:"text-accent-orange"}),i.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Prompt Enviado al AI"}),f[`prompt-${j.id}`]?i.jsx(Cs,{size:14,className:"text-gray-500 ml-auto"}):i.jsx(Bn,{size:14,className:"text-gray-500 ml-auto"})]}),f[`prompt-${j.id}`]&&i.jsx("div",{className:"bg-quant-bg rounded-xl p-3 border border-accent-orange/20 max-h-96 overflow-y-auto",children:j.fullAIPrompt?i.jsx("pre",{className:"text-xs text-gray-400 whitespace-pre-wrap font-mono",children:j.fullAIPrompt}):i.jsxs("div",{className:"text-center py-4",children:[i.jsx(wr,{size:24,className:"text-gray-600 mx-auto mb-2"}),i.jsx("p",{className:"text-xs text-gray-500",children:"El prompt original no fue capturado para este egg."}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Los nuevos eggs incluirn el prompt completo."})]})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Cp,{size:14,className:"text-accent-cyan"}),i.jsxs("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:["Glass Box: Transparencia Total (",Y.length," trades)"]})]}),i.jsx("div",{className:"space-y-3",children:Y.map((q,ve)=>i.jsxs("div",{className:"bg-quant-card rounded-xl border border-quant-border overflow-hidden",children:[i.jsxs("div",{className:"p-3 border-b border-quant-border bg-quant-surface/50",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${q.strategy==="LONG"?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:q.strategy}),i.jsx("span",{className:"font-medium text-white",children:q.asset}),i.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["IPE: ",q.ipe,"%"]})]}),i.jsxs("div",{className:"flex items-start gap-2 mt-2 p-2 bg-quant-bg/50 rounded-lg",children:[i.jsx(Ha,{size:12,className:"text-accent-yellow shrink-0 mt-0.5"}),i.jsx("p",{className:"text-xs text-gray-300",children:q.summary||q.explanation||"Trade generado segn tu estrategia"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs mt-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Entry"}),i.jsxs("span",{className:"text-white font-mono ml-1",children:["$",q.entry]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"TP"}),i.jsxs("span",{className:"text-accent-green font-mono ml-1",children:["$",q.takeProfit]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"SL"}),i.jsxs("span",{className:"text-accent-red font-mono ml-1",children:["$",q.stopLoss]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"R:R"}),i.jsxs("span",{className:"text-white font-mono ml-1",children:["1:",q.riskRewardRatio||"2.0"]})]})]})]}),i.jsxs("div",{className:"p-3 space-y-3",children:[q.reasoning&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-wider",children:[i.jsx(Q0,{size:10}),"Desglose de Decisin"]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsxs("div",{className:"p-2 bg-quant-bg/30 rounded-lg",children:[i.jsxs("span",{className:"text-[10px] text-accent-cyan block mb-0.5",children:["Por qu ",q.asset,"?"]}),i.jsx("p",{className:"text-xs text-gray-300",children:q.reasoning.whyAsset})]}),i.jsxs("div",{className:"p-2 bg-quant-bg/30 rounded-lg",children:[i.jsxs("span",{className:"text-[10px] text-accent-cyan block mb-0.5",children:["Por qu ",q.strategy,"?"]}),i.jsx("p",{className:"text-xs text-gray-300",children:q.reasoning.whyDirection})]}),i.jsxs("div",{className:"p-2 bg-quant-bg/30 rounded-lg",children:[i.jsxs("span",{className:"text-[10px] text-accent-cyan block mb-0.5",children:["Por qu Entry $",q.entry,"?"]}),i.jsx("p",{className:"text-xs text-gray-300",children:q.reasoning.whyEntry})]}),i.jsxs("div",{className:"p-2 bg-quant-bg/30 rounded-lg",children:[i.jsx("span",{className:"text-[10px] text-accent-cyan block mb-0.5",children:"Por qu estos TP/SL?"}),i.jsx("p",{className:"text-xs text-gray-300",children:q.reasoning.whyLevels})]})]})]}),q.criteriaMatched&&q.criteriaMatched.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-wider mb-2",children:[i.jsx(fr,{size:10}),"Criterios de Estrategia"]}),i.jsx("div",{className:"space-y-1",children:q.criteriaMatched.map((B,Fe)=>i.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-quant-bg/30 rounded",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[B.passed?i.jsx(fr,{size:10,className:"text-accent-green"}):i.jsx(ro,{size:10,className:"text-accent-red"}),i.jsx("span",{className:"text-xs text-gray-300",children:B.criterion})]}),i.jsx("span",{className:`text-xs font-mono ${B.passed?"text-accent-green":"text-accent-red"}`,children:B.value})]},Fe))})]}),q.confidenceFactors&&q.confidenceFactors.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-wider mb-2",children:[i.jsx(ya,{size:10}),"IPE ",q.ipe,"% Breakdown"]}),i.jsx("div",{className:"space-y-1.5",children:q.confidenceFactors.map((B,Fe)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-xs mb-0.5",children:[i.jsx("span",{className:"text-gray-400",children:B.factor}),i.jsxs("span",{className:"font-mono text-accent-cyan",children:["+",(B.contribution||B.weight*B.score/100).toFixed(1),"%"]})]}),i.jsx("div",{className:"h-1 bg-quant-bg rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-accent-cyan to-accent-purple",style:{width:`${B.score}%`}})})]},Fe))})]}),!q.reasoning&&i.jsx("div",{className:"text-sm text-gray-400",children:q.aiReasoning||q.explanation||"Datos de transparencia no disponibles para trades antiguos."})]})]},q.id))})]}),i.jsxs("div",{className:"flex items-center justify-center gap-4 text-[10px] text-gray-500 pt-2",children:[i.jsxs("span",{children:["Generado: ",new Date(j.createdAt).toLocaleString()]}),i.jsx("span",{children:""}),i.jsx("span",{children:((me=Qr[(ae=j.config)==null?void 0:ae.aiModel])==null?void 0:me.name)||"AI"}),i.jsx("span",{children:""}),i.jsxs("span",{children:[Y.length," trades"]})]})]}),w(j.id)==="log"&&(()=>{const q=r.filter(B=>{var Fe,ee,He,be;return((Fe=B.data)==null?void 0:Fe.eggId)===j.id||((ee=B.data)==null?void 0:ee.eggName)===j.promptName||B.type==="ai"&&((He=B.message)!=null&&He.includes(j.promptName))?!0:B.type==="trade"&&((be=B.data)!=null&&be.asset)?Y.map(Ee=>{var Ue;return(Ue=Ee.asset)==null?void 0:Ue.replace("/USDT","")}).some(Ee=>{var Ue;return(Ue=B.message)==null?void 0:Ue.includes(Ee)}):!1}).slice(0,50),ve={ai:{icon:Qn,color:"text-accent-purple",bg:"bg-accent-purple/10"},trade:{icon:Pt,color:"text-accent-cyan",bg:"bg-accent-cyan/10"},egg:{icon:Yn,color:"text-accent-green",bg:"bg-accent-green/10"},price:{icon:ga,color:"text-accent-yellow",bg:"bg-accent-yellow/10"},system:{icon:wr,color:"text-gray-400",bg:"bg-gray-500/10"},error:{icon:qa,color:"text-accent-red",bg:"bg-accent-red/10"},sync:{icon:Ua,color:"text-accent-cyan",bg:"bg-accent-cyan/10"}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(xa,{size:14,className:"text-accent-cyan"}),i.jsxs("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:["Event Log (",q.length," eventos)"]})]}),!re&&j.status==="incubating"&&i.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-accent-green/10",children:[i.jsxs("span",{className:"relative flex h-2 w-2",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-green opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-green"})]}),i.jsx("span",{className:"text-[10px] text-accent-green font-medium",children:"LIVE"})]})]}),i.jsx("div",{className:"bg-quant-bg rounded-xl border border-quant-border overflow-hidden max-h-80 overflow-y-auto",children:q.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(xa,{size:32,className:"mx-auto mb-2 text-gray-600"}),i.jsx("p",{className:"text-sm text-gray-500",children:"No hay eventos registrados"}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Los eventos aparecern aqu durante la ejecucin"})]}):i.jsx("div",{className:"divide-y divide-quant-border/50",children:q.map((B,Fe)=>{var Ee,Ue,Ds,rs;const ee=ve[B.type]||ve.system,He=ee.icon,be=B.type==="error",mt=((Ee=B.message)==null?void 0:Ee.includes(""))||((Ue=B.message)==null?void 0:Ue.includes("WIN"))||((Ds=B.message)==null?void 0:Ds.includes("complete"));return i.jsx("div",{className:`p-3 hover:bg-quant-surface/30 transition-colors ${be?"bg-accent-red/5":mt?"bg-accent-green/5":""}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`p-1.5 rounded-lg ${ee.bg} shrink-0`,children:i.jsx(He,{size:12,className:ee.color})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:`text-xs ${be?"text-accent-red":"text-gray-300"}`,children:B.message}),B.type==="trade"&&B.data&&i.jsxs("div",{className:"flex flex-wrap gap-2 mt-1.5",children:[B.data.asset&&i.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-quant-surface text-gray-400",children:B.data.asset}),B.data.strategy&&i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${B.data.strategy==="LONG"?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:B.data.strategy}),B.data.pnl!==void 0&&i.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-mono ${B.data.pnl>=0?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:[B.data.pnl>=0?"+":"",(rs=B.data.pnl)==null?void 0:rs.toFixed(2),"%"]})]}),i.jsx("span",{className:"text-[9px] text-gray-600 mt-1 block",children:new Date(B.timestamp).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),i.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded uppercase ${ee.bg} ${ee.color}`,children:B.type})]})},B.id||Fe)})})}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center text-[9px] text-gray-500",children:Object.entries(ve).slice(0,5).map(([B,Fe])=>{const ee=Fe.icon;return i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ee,{size:10,className:Fe.color}),i.jsx("span",{className:"uppercase",children:B})]},B)})})]})})()]})]})})]},j.id)})})]})}function XP(){const e=W(r=>r.signals)||[],t=W(r=>r.openSignalDetail),n=[...e].sort((r,a)=>new Date(a.createdAt)-new Date(r.createdAt)),s=r=>{const a=new Date(r),l=new Date-a,c=Math.floor(l/(1e3*60*60)),u=Math.floor(c/24);return u>0?`${u}d ago`:c>0?`${c}h ago`:"Just now"};return i.jsxs($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[i.jsx(Sl,{title:"Signals",subtitle:`${e.length} trading signals`}),i.jsx("div",{className:"px-4 pb-4",children:n.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-quant-surface flex items-center justify-center",children:i.jsx(Pt,{size:32,className:"text-gray-500"})}),i.jsx("p",{className:"text-gray-400 mb-2",children:"No signals yet"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Signals will appear here when prompts generate trades"})]}):i.jsx("div",{className:"space-y-3",children:n.map((r,a)=>{const o=r.strategy==="LONG",l=r.status==="closed";return i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.03},className:`bg-quant-card border rounded-2xl overflow-hidden ${l?r.result==="win"?"border-accent-green/30":"border-accent-red/30":"border-quant-border"}`,children:[i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${o?"bg-accent-green/20":"bg-accent-red/20"}`,children:o?i.jsx(Pt,{size:20,className:"text-accent-green"}):i.jsx(Xn,{size:20,className:"text-accent-red"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${o?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:r.strategy}),i.jsx("span",{className:"font-semibold text-white",children:r.asset})]}),i.jsx("span",{className:"text-xs text-gray-500",children:r.promptName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs text-gray-500 block",children:"IPE"}),i.jsxs("span",{className:`font-mono font-bold ${r.ipe>=80?"text-accent-green":r.ipe>=70?"text-accent-yellow":"text-accent-orange"}`,children:[r.ipe,"%"]})]}),i.jsx("button",{onClick:()=>t(r),className:"p-2 rounded-lg hover:bg-quant-surface transition-colors",children:i.jsx(Y0,{size:18,className:"text-accent-cyan"})})]})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"bg-quant-surface rounded-lg p-2.5",children:[i.jsx("span",{className:"text-xs text-gray-500 block",children:"Entry"}),i.jsxs("span",{className:"font-mono text-sm text-white",children:["$",Number(r.entry).toLocaleString()]})]}),i.jsxs("div",{className:"bg-quant-surface rounded-lg p-2.5",children:[i.jsx("span",{className:"text-xs text-accent-green block",children:"Take Profit"}),i.jsxs("span",{className:"font-mono text-sm text-accent-green",children:["$",Number(r.takeProfit).toLocaleString()]})]}),i.jsxs("div",{className:"bg-quant-surface rounded-lg p-2.5",children:[i.jsx("span",{className:"text-xs text-accent-red block",children:"Stop Loss"}),i.jsxs("span",{className:"font-mono text-sm text-accent-red",children:["$",Number(r.stopLoss).toLocaleString()]})]})]})]}),i.jsxs("div",{className:`px-4 py-2.5 border-t flex items-center justify-between ${l?r.result==="win"?"bg-accent-green/10 border-accent-green/20":"bg-accent-red/10 border-accent-red/20":"bg-quant-surface/50 border-quant-border"}`,children:[i.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[i.jsx($r,{size:12}),s(r.createdAt)]}),l?i.jsxs("div",{className:`font-mono font-bold ${r.result==="win"?"text-accent-green":"text-accent-red"}`,children:[r.pnl>=0?"+":"",r.pnl.toFixed(2)," USD"]}):i.jsxs("span",{className:"text-xs text-accent-cyan flex items-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-accent-cyan rounded-full animate-pulse"}),"Active"]})]})]},r.id)})})})]})}const ZP=[{id:"leverage",name:"Leverage Stress Test",icon:"",eggs:4,question:"Qu leverage es ptimo?",description:"Prueba: 2x, 5x, 10x, 20x",color:"accent-yellow",config:{variations:[{leverage:2},{leverage:5},{leverage:10},{leverage:20}]}},{id:"aimodel",name:"AI Model Comparison",icon:"",eggs:4,question:"Qu AI entiende mejor mi prompt?",description:"Prueba: Gemini, Claude, GPT, Grok",color:"accent-purple",config:{variations:[{aiModel:"google"},{aiModel:"anthropic"},{aiModel:"openai"},{aiModel:"xai"}]}},{id:"timeframe",name:"Timeframe Analysis",icon:"",eggs:3,question:"Qu horizonte temporal funciona?",description:"Prueba: Scalping, Intraday, Swing",color:"accent-cyan",config:{variations:[{executionTime:"scalping"},{executionTime:"intraday"},{executionTime:"swing"}]}},{id:"risk",name:"Risk Tolerance Test",icon:"",eggs:9,question:"Qu R:R es ptimo para mi prompt?",description:"Prueba: TP[2%,5%,10%]  SL[1%,2%,5%]",color:"accent-orange",config:{variations:[{targetPct:2,stopLoss:1},{targetPct:2,stopLoss:2},{targetPct:2,stopLoss:5},{targetPct:5,stopLoss:1},{targetPct:5,stopLoss:2},{targetPct:5,stopLoss:5},{targetPct:10,stopLoss:1},{targetPct:10,stopLoss:2},{targetPct:10,stopLoss:5}]}},{id:"ipe",name:"IPE Sensitivity",icon:"",eggs:3,question:"Cun selectivo debo ser?",description:"Prueba: minIPE 70, 80, 90",color:"accent-green",config:{variations:[{minIpe:70},{minIpe:80},{minIpe:90}]}},{id:"scale",name:"Scale Test",icon:"",eggs:4,question:"Mi prompt escala bien?",description:"Prueba: 1, 3, 5, 10 trades",color:"accent-cyan",config:{variations:[{numResults:1},{numResults:3},{numResults:5},{numResults:10}]}},{id:"full",name:"Full Diagnostic",icon:"",eggs:20,question:"Evaluacin completa del prompt",description:"Leverage  Model  Timeframe + extras",color:"accent-purple",config:{variations:[{leverage:5,aiModel:"google"},{leverage:5,aiModel:"anthropic"},{leverage:10,aiModel:"google"},{leverage:10,aiModel:"anthropic"},{executionTime:"scalping",leverage:5},{executionTime:"intraday",leverage:5},{executionTime:"swing",leverage:5},{executionTime:"scalping",leverage:10},{executionTime:"intraday",leverage:10},{executionTime:"swing",leverage:10},{targetPct:5,stopLoss:2},{targetPct:10,stopLoss:5},{targetPct:25,stopLoss:10},{minIpe:70},{minIpe:80},{minIpe:90},{numResults:1},{numResults:3},{numResults:5},{numResults:10}]}}],eT=[{id:"hourly",label:"Hourly",desc:"Every X hours"},{id:"daily",label:"Daily",desc:"Once per day"},{id:"weekly",label:"Weekly",desc:"Select days"}],tT=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function nT({check:e,onClose:t}){var z,H,G,J;const n=W(P=>P.prompts)||[],s=W(P=>P.addHealthCheck),r=W(P=>P.updateHealthCheck),a=!!e,[o,l]=k.useState(a?"config":"preset"),[c,u]=k.useState((e==null?void 0:e.preset)||null),[d,h]=k.useState((e==null?void 0:e.name)||""),[f,p]=k.useState((e==null?void 0:e.prompts)||[]),[g,v]=k.useState(((z=e==null?void 0:e.schedule)==null?void 0:z.frequency)||"daily"),[b,x]=k.useState(((H=e==null?void 0:e.schedule)==null?void 0:H.time)||"09:00"),[m,y]=k.useState(((G=e==null?void 0:e.schedule)==null?void 0:G.interval)||4),[w,N]=k.useState(((J=e==null?void 0:e.schedule)==null?void 0:J.days)||["Mon","Wed","Fri"]),[T,E]=k.useState((e==null?void 0:e.capital)||1e3),S=P=>{p(F=>F.find(U=>U.id===P.id)?F.filter(U=>U.id!==P.id):[...F,{id:P.id,name:P.name}])},R=P=>{N(F=>F.includes(P)?F.filter(K=>K!==P):[...F,P])},_=P=>{u(P),h(`${P.name} - ${new Date().toLocaleDateString()}`)},I=()=>{c&&l("config")},L=d.trim()&&f.length>0&&c,M=()=>{if(!L)return;const P={id:(e==null?void 0:e.id)||`hc-${Date.now()}`,name:d.trim(),preset:c,prompts:f,schedule:{frequency:g,time:g!=="hourly"?b:null,interval:g==="hourly"?m:null,days:g==="weekly"?w:null},capital:T,eggs:c.eggs,variations:c.config.variations,isActive:(e==null?void 0:e.isActive)??!0,createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString(),lastRun:(e==null?void 0:e.lastRun)||null};a?r(e.id,P):s(P),t()};return i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 backdrop-blur-sm",onClick:t,children:i.jsxs($.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-lg bg-quant-card rounded-t-3xl max-h-[85vh] flex flex-col mb-16",onClick:P=>P.stopPropagation(),children:[i.jsxs("div",{className:"shrink-0 px-4 py-3 flex items-center justify-between border-b border-quant-border",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[o==="config"&&!a&&i.jsx("button",{onClick:()=>l("preset"),className:"p-2.5 -ml-1 rounded-full hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(sh,{size:20,className:"text-gray-400"})}),i.jsx("div",{className:"w-8 h-8 rounded-lg bg-accent-purple/20 flex items-center justify-center",children:i.jsx(cc,{size:16,className:"text-accent-purple"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-bold text-white",children:o==="preset"?"Select Batch Preset":"Configure Health Check"}),i.jsx("p",{className:"text-[10px] text-gray-500",children:o==="preset"?"Choose what to test":`${(c==null?void 0:c.eggs)||0} eggs will be created`})]})]}),i.jsx("button",{onClick:t,className:"p-3 -mr-1 rounded-full hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(Os,{size:22,className:"text-gray-400"})})]}),!a&&i.jsxs("div",{className:"shrink-0 px-4 py-2 flex gap-2",children:[i.jsx("div",{className:"flex-1 h-1 rounded-full transition-colors bg-accent-purple"}),i.jsx("div",{className:`flex-1 h-1 rounded-full transition-colors ${o==="config"?"bg-accent-purple":"bg-quant-surface"}`})]}),i.jsx("div",{className:"flex-1 overflow-y-auto hide-scrollbar",children:i.jsxs(Qe,{mode:"wait",children:[o==="preset"&&i.jsxs($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"px-4 py-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(cc,{size:14,className:"text-accent-purple"}),i.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Batch Presets"})]}),ZP.map((P,F)=>{const K=(c==null?void 0:c.id)===P.id;return i.jsx($.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:F*.03},onClick:()=>_(P),className:`w-full p-4 rounded-2xl border text-left transition-all ${K?`border-${P.color}/50 bg-${P.color}/10 shadow-lg`:"border-quant-border bg-quant-surface hover:border-gray-600"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-xl shrink-0 ${K?`bg-${P.color}/20`:"bg-quant-card"}`,children:P.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h3",{className:`font-semibold text-sm ${K?"text-white":"text-gray-300"}`,children:P.name}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-mono ${K?"bg-accent-cyan/20 text-accent-cyan":"bg-quant-card text-gray-500"}`,children:[P.eggs," eggs"]}),i.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${K?"border-accent-purple bg-accent-purple":"border-gray-600"}`,children:K&&i.jsx(Ge,{size:12,className:"text-white"})})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:P.description}),i.jsxs("p",{className:`text-[11px] italic ${K?"text-accent-cyan":"text-gray-600"}`,children:['"',P.question,'"']})]})]})},P.id)})]},"preset"),o==="config"&&i.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"px-4 py-3 space-y-4",children:[c&&i.jsx("div",{className:"p-3 bg-accent-purple/10 border border-accent-purple/30 rounded-xl",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:c.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold text-white",children:c.name}),i.jsx("p",{className:"text-[10px] text-gray-400",children:c.description})]}),i.jsxs("span",{className:"text-xs font-mono text-accent-cyan bg-accent-cyan/20 px-2 py-1 rounded-lg",children:[c.eggs," eggs"]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 block",children:"Health Check Name"}),i.jsx("input",{type:"text",value:d,onChange:P=>h(P.target.value),placeholder:"e.g., Morning Market Scan",className:"w-full bg-quant-surface border border-quant-border rounded-xl px-3 py-3 text-sm text-white placeholder-gray-500 focus:border-accent-purple focus:outline-none"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 block",children:["Select Prompt to Test (",f.length," selected)"]}),i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:n.length===0?i.jsx("div",{className:"text-center py-4 text-sm text-gray-500",children:"No prompts available. Create prompts first."}):n.map(P=>{const F=f.find(K=>K.id===P.id);return i.jsx("button",{onClick:()=>S(P),className:`w-full p-3 rounded-xl border text-left transition-all ${F?"border-accent-purple bg-accent-purple/10":"border-quant-border bg-quant-surface hover:border-gray-600"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:`text-sm ${F?"text-white":"text-gray-400"}`,children:P.name}),i.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${F?"border-accent-purple bg-accent-purple":"border-gray-600"}`,children:F&&i.jsx(Ge,{size:12,className:"text-white"})})]})},P.id)})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 flex items-center gap-1",children:[i.jsx(ga,{size:10})," Base Capital (per egg)"]}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),i.jsx("input",{type:"number",value:T,onChange:P=>E(Number(P.target.value)),className:"w-full bg-quant-surface border border-quant-border rounded-xl pl-7 pr-3 py-2.5 text-sm text-white font-mono focus:border-accent-purple focus:outline-none"})]}),i.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Total: $",T*((c==null?void 0:c.eggs)||1)," across ",(c==null?void 0:c.eggs)||1," eggs"]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 flex items-center gap-1",children:[i.jsx($r,{size:10})," Schedule"]}),i.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:eT.map(P=>i.jsxs("button",{onClick:()=>v(P.id),className:`py-2.5 px-2 rounded-xl border text-center transition-all ${g===P.id?"border-accent-purple bg-accent-purple/10 text-white":"border-quant-border bg-quant-surface text-gray-500 hover:border-gray-600"}`,children:[i.jsx("span",{className:"block text-xs font-medium",children:P.label}),i.jsx("span",{className:"text-[9px] opacity-60",children:P.desc})]},P.id))}),g==="hourly"&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Every"}),i.jsx("input",{type:"number",value:m,onChange:P=>y(Math.max(1,Math.min(24,Number(P.target.value)))),min:1,max:24,className:"w-16 bg-quant-surface border border-quant-border rounded-lg px-2 py-1.5 text-sm text-white text-center font-mono focus:border-accent-purple focus:outline-none"}),i.jsx("span",{className:"text-xs text-gray-500",children:"hour(s)"})]}),(g==="daily"||g==="weekly")&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"Run at"}),i.jsx("input",{type:"time",value:b,onChange:P=>x(P.target.value),className:"bg-quant-surface border border-quant-border rounded-lg px-2 py-1.5 text-sm text-white font-mono focus:border-accent-purple focus:outline-none"})]}),g==="weekly"&&i.jsx("div",{className:"flex gap-1",children:tT.map(P=>i.jsx("button",{onClick:()=>R(P),className:`flex-1 py-2 rounded-lg text-xs font-medium transition-all ${w.includes(P)?"bg-accent-purple/20 text-accent-purple border border-accent-purple/30":"bg-quant-surface text-gray-500 border border-transparent"}`,children:P},P))})]})]}),c&&i.jsxs("div",{className:"p-3 bg-quant-surface rounded-xl border border-quant-border",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Qn,{size:12,className:"text-accent-cyan"}),i.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Test Variations"})]}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.config.variations.slice(0,8).map((P,F)=>i.jsx("span",{className:"text-[10px] px-2 py-1 rounded-lg bg-quant-card text-gray-400 font-mono",children:Object.entries(P).map(([K,U])=>`${K}:${U}`).join(" ")},F)),c.config.variations.length>8&&i.jsxs("span",{className:"text-[10px] px-2 py-1 rounded-lg bg-quant-card text-gray-500",children:["+",c.config.variations.length-8," more"]})]})]})]},"config")]})}),i.jsx("div",{className:"shrink-0 p-4 pb-6 border-t border-quant-border safe-area-bottom",children:o==="preset"?i.jsx($.button,{onClick:I,disabled:!c,whileTap:{scale:.98},animate:c?{scale:[1,1.02,1]}:{},transition:{duration:.3},className:`w-full py-4 rounded-xl text-white font-bold flex items-center justify-center gap-2 transition-all ${c?"bg-gradient-to-r from-accent-purple to-accent-cyan pulse-glow":"bg-quant-surface text-gray-500 border border-quant-border"}`,children:c?i.jsxs(i.Fragment,{children:["Continue to Configuration",i.jsx(W0,{size:18})]}):"Select a preset above"}):i.jsxs($.button,{onClick:M,disabled:!L,whileTap:{scale:.98},className:"w-full py-4 rounded-xl bg-gradient-to-r from-accent-purple to-accent-cyan text-white font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{boxShadow:L?"0 0 20px rgba(139, 92, 246, 0.25)":"none"},children:[i.jsx(cc,{size:18}),"Create Health Check (",(c==null?void 0:c.eggs)||0," eggs)"]})})]})})}function sT(){const e=W(_=>_.healthChecks)||[],t=W(_=>_.eggs)||[],n=W(_=>_.signals)||[],s=W(_=>_.showHealthCheckModal)||!1,r=W(_=>_.updateHealthCheck),a=W(_=>_.deleteHealthCheck),o=W(_=>_.setActiveTab),l=W(_=>_.setNavigateToEggId),[c,u]=k.useState(null),[d,h]=k.useState(null),[f,p]=k.useState("active"),g=(_=null)=>{h(_),W.setState({showHealthCheckModal:!0})},v=()=>{h(null),W.setState({showHealthCheckModal:!1})},b=_=>{const I=e.find(L=>L.id===_);I&&r(_,{isActive:!I.isActive})},x=_=>{a(_)},m=_=>{if(!_)return"Not set";const{frequency:I,time:L,days:M}=_;return I==="daily"?`Daily at ${L}`:I==="weekly"?`Weekly on ${M==null?void 0:M.join(", ")} at ${L}`:I==="hourly"?`Every ${_.interval||1} hour(s)`:"Custom"},y=e.filter(_=>_.isActive),w=e.filter(_=>!_.isActive),N=f==="active"?y:w,T=_=>Object.entries(_).map(([I,L])=>`${I.replace("leverage","lev").replace("aiModel","ai").replace("executionTime","time").replace("targetPct","tp").replace("stopLoss","sl").replace("minIpe","ipe").replace("numResults","res")}:${L}`).join(" "),E=_=>{var L;if(!((L=_==null?void 0:_.prompts)!=null&&L.length))return[];const I=_.prompts.map(M=>M.id);return t.filter(M=>I.includes(M.promptId))},S=_=>{const I=n.filter(U=>{var Z;return(Z=_.trades)==null?void 0:Z.includes(U.id)}),L=I.filter(U=>U.status==="closed"),M=I.length,z=L.length;let H=0,G=0;L.forEach(U=>{H+=U.pnl||0,G+=U.pnlDollar||0});const J=z>0?H/z:0,P=z>0?G/z:0,F=_.expiresAt&&new Date(_.expiresAt)<new Date,K=_.status==="hatched"||F;return{totalTrades:M,closedTrades:z,totalPnl:J,totalPnlDollar:P,isExpired:F,isCompleted:K,progress:M>0?z/M*100:0}},R=(_,I)=>{I.stopPropagation(),l(_),o("incubator")};return i.jsxs("div",{className:"px-4 pb-4",children:[i.jsxs("div",{className:"flex bg-quant-surface rounded-xl p-1 mb-4",children:[i.jsxs("button",{onClick:()=>p("active"),className:`flex-1 py-2.5 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${f==="active"?"bg-quant-card text-white shadow":"text-gray-400"}`,children:[i.jsx(qo,{size:14}),"Active (",y.length,")"]}),i.jsxs("button",{onClick:()=>p("finalised"),className:`flex-1 py-2.5 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${f==="finalised"?"bg-quant-card text-white shadow":"text-gray-400"}`,children:[i.jsx(ES,{size:14}),"Finalised (",w.length,")"]})]}),i.jsx("div",{className:"space-y-3",children:N.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-quant-surface flex items-center justify-center",children:i.jsx(Fo,{size:32,className:"text-gray-600"})}),i.jsx("p",{className:"text-gray-400 mb-2",children:f==="active"?"No active health checks":"No finalised health checks"}),i.jsx("p",{className:"text-sm text-gray-500",children:f==="active"?"Create a health check to automate your trading analysis":"Paused health checks will appear here"})]}):i.jsx(Qe,{mode:"popLayout",children:N.map((_,I)=>{const L=c===_.id;return i.jsxs($.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:I*.03},className:`bg-quant-card border rounded-2xl overflow-hidden ${_.isActive?"border-accent-green/30":"border-quant-border"}`,children:[i.jsx("button",{onClick:()=>u(L?null:_.id),className:"w-full p-4 text-left",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${_.isActive?"bg-accent-green/20":"bg-quant-surface"}`,children:_.isActive?i.jsx(Fo,{size:20,className:"text-accent-green"}):i.jsx(Rp,{size:20,className:"text-gray-500"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h3",{className:"font-semibold text-white truncate",children:_.name}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${_.isActive?"bg-accent-green/20 text-accent-green":"bg-quant-surface text-gray-500"}`,children:_.isActive?"Active":"Paused"}),L?i.jsx(Cs,{size:16,className:"text-gray-500"}):i.jsx(Bn,{size:16,className:"text-gray-500"})]})]}),(()=>{var H;const M=E(_),z=M.filter(G=>G.status==="incubating"&&(!G.expiresAt||new Date(G.expiresAt)>new Date));return i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx($r,{size:12}),m(_.schedule)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Yn,{size:12}),((H=_.prompts)==null?void 0:H.length)||0," prompts"]}),M.length>0&&i.jsxs("span",{className:`flex items-center gap-1 ${z.length>0?"text-accent-cyan":"text-gray-500"}`,children:[i.jsx(Ba,{size:12}),M.length," eggs ",z.length>0&&`(${z.length} live)`]})]})})(),_.variations&&_.variations.length>0&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-quant-border",children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[i.jsx(Qn,{size:10,className:"text-accent-cyan"}),i.jsxs("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:["Test Variations (",_.variations.length,")"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.variations.slice(0,6).map((M,z)=>i.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-quant-surface text-gray-400 font-mono",children:T(M)},z)),_.variations.length>6&&i.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-accent-cyan/10 text-accent-cyan font-mono",children:["+",_.variations.length-6," more"]})]})]})]})]})}),i.jsx(Qe,{children:L&&i.jsx($.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-quant-border overflow-hidden",children:i.jsxs("div",{className:"p-4 bg-quant-surface/30 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-quant-card rounded-xl p-3 border border-quant-border",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase block mb-1",children:"Capital"}),i.jsxs("span",{className:"text-sm font-mono text-white",children:["$",_.capital||1e3]})]}),i.jsxs("div",{className:"bg-quant-card rounded-xl p-3 border border-quant-border",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase block mb-1",children:"Leverage"}),i.jsxs("span",{className:"text-sm font-mono text-white",children:[_.leverage||5,"x"]})]}),i.jsxs("div",{className:"bg-quant-card rounded-xl p-3 border border-quant-border",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase block mb-1",children:"Target"}),i.jsxs("span",{className:"text-sm font-mono text-accent-green",children:["+",_.targetPct||10,"%"]})]}),i.jsxs("div",{className:"bg-quant-card rounded-xl p-3 border border-quant-border",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase block mb-1",children:"Min IPE"}),i.jsxs("span",{className:"text-sm font-mono text-accent-cyan",children:[_.minIpe||80,"%"]})]})]}),_.prompts&&_.prompts.length>0&&i.jsxs("div",{className:"bg-quant-card rounded-xl p-3 border border-quant-border",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase block mb-2",children:"Included Prompts"}),i.jsx("div",{className:"space-y-1",children:_.prompts.map((M,z)=>i.jsxs("div",{className:"text-xs text-gray-300 flex items-center gap-2",children:[i.jsx(rh,{size:10,className:"text-accent-cyan"}),M.name||M]},z))})]}),(()=>{const M=E(_);return M.length===0?null:i.jsxs("div",{className:"bg-quant-card rounded-xl p-3 border border-quant-border",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsxs("span",{className:"text-[10px] text-gray-500 uppercase flex items-center gap-1.5",children:[i.jsx(Ba,{size:10,className:"text-accent-orange"}),"Eggs (",M.length,")"]})}),i.jsx("div",{className:"space-y-2",children:M.map(z=>{const H=S(z),G=H.totalPnl>=0;return i.jsx("button",{onClick:J=>R(z.id,J),className:"w-full p-2.5 rounded-xl bg-quant-surface border border-quant-border hover:border-accent-cyan/50 transition-all group text-left",children:i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 shrink-0",children:i.jsx(Yt,{status:H.isCompleted?"hatched":"incubating",size:32,progress:H.progress})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs font-medium text-white truncate",children:z.promptName}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsxs("span",{className:`text-xs font-mono flex items-center gap-0.5 ${G?"text-accent-green":"text-accent-red"}`,children:[G?i.jsx(Pt,{size:10}):i.jsx(Xn,{size:10}),G?"+":"",H.totalPnl.toFixed(2),"%"]}),i.jsx(zo,{size:12,className:"text-gray-500 group-hover:text-accent-cyan transition-colors"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1 h-1 bg-quant-card rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full rounded-full transition-all ${H.isCompleted?G?"bg-accent-green":"bg-accent-red":"bg-accent-cyan"}`,style:{width:`${H.progress}%`}})}),i.jsxs("span",{className:"text-[9px] text-gray-500 font-mono shrink-0",children:[H.closedTrades,"/",H.totalTrades]}),i.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full ${H.isCompleted?H.isExpired?"bg-accent-orange/20 text-accent-orange":"bg-accent-green/20 text-accent-green":"bg-accent-cyan/20 text-accent-cyan"}`,children:H.isCompleted?H.isExpired?"Expired":"Hatched":"Live"})]})]})]})},z.id)})})]})})(),_.lastRun&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[i.jsx(We,{size:12}),"Last run: ",new Date(_.lastRun).toLocaleString()]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:M=>{M.stopPropagation(),b(_.id)},className:`flex-1 py-2.5 rounded-xl font-medium text-sm flex items-center justify-center gap-2 transition-colors ${_.isActive?"bg-accent-orange/20 border border-accent-orange/30 text-accent-orange":"bg-accent-green/20 border border-accent-green/30 text-accent-green"}`,children:[_.isActive?i.jsx(Rp,{size:14}):i.jsx(qo,{size:14}),_.isActive?"Pause":"Activate"]}),i.jsxs("button",{onClick:M=>{M.stopPropagation(),g(_)},className:"py-2.5 px-4 rounded-xl bg-quant-surface border border-quant-border text-gray-400 font-medium text-sm flex items-center justify-center gap-2 hover:text-white transition-colors",children:[i.jsx(ty,{size:14}),"Edit"]}),i.jsx("button",{onClick:M=>{M.stopPropagation(),x(_.id)},className:"py-2.5 px-4 rounded-xl bg-accent-red/10 border border-accent-red/30 text-accent-red font-medium text-sm flex items-center justify-center gap-2 hover:bg-accent-red/20 transition-colors",children:i.jsx(Vo,{size:14})})]})]})})})]},_.id)})})}),i.jsx(Qe,{children:s&&i.jsx(nT,{check:d,onClose:v})})]})}const yc=(e,t=1)=>e==null||isNaN(e)?"0":Number(e).toFixed(t),rT=[{id:"reports",label:"Reports",icon:Va},{id:"healthchecks",label:"Health Checks",icon:Fo}];function lm(){const e=W(S=>S.eggs)||[],t=W(S=>S.signals)||[],n=W(S=>S.prices)||{},s=W(S=>S.prompts)||[],r=W(S=>S.setActiveTab),a=W(S=>S.setNavigateToEggId),o=W(S=>S.promptsActiveTab)||"reports",l=S=>{a(S),r("incubator")},c=S=>{W.setState({promptsActiveTab:S})},[u,d]=k.useState(null),[h,f]=k.useState("pnl"),[p,g]=k.useState("all"),v=S=>{if(!S||!S.expiresAt)return!1;try{return new Date(S.expiresAt)<=new Date}catch{return!1}},b=S=>S?S.status==="hatched"||S.status==="incubating"&&v(S):!1,x=S=>{if(!S)return 0;try{if(S.status==="closed"&&S.pnl!==void 0)return Number(S.pnl)||0;if(S.unrealizedPnl!==void 0)return Number(S.unrealizedPnl)||0;const R=n[S.asset];if(!R||!R.price)return 0;const _=R.price,I=parseFloat(S.entry);return isNaN(I)||I===0?0:S.strategy==="LONG"?(_-I)/I*100:(I-_)/I*100}catch(R){return console.error("Error calculating signal PnL:",R),0}},m=S=>{const R={totalPnl:0,winRate:0,totalTrades:0,wins:0,losses:0};if(!S)return R;try{const _=S.trades;if(!_||!Array.isArray(_)||_.length===0)return R;const I=t.filter(J=>J&&_.includes(J.id));if(I.length===0)return R;const L=I.map(J=>x(J)),z=L.reduce((J,P)=>J+(P||0),0)/L.length,H=L.filter(J=>J>0).length,G=L.filter(J=>J<0).length;return{totalPnl:z||0,winRate:Math.round(H/I.length*100)||0,totalTrades:I.length,wins:H,losses:G}}catch(_){return console.error("Error calculating egg results:",_),R}},y=k.useMemo(()=>{try{if(!Array.isArray(e)||e.length===0)return[];const S=e.filter(I=>I&&b(I));if(S.length===0)return[];const R={};for(const I of S){if(!I)continue;const L=I.promptId||I.promptName||"Unknown",M=I.promptName||"Unknown Strategy";if(!R[L]){let G=null;Array.isArray(s)&&(G=s.find(J=>J&&(J.id===I.promptId||J.name===I.promptName))),R[L]={id:L,name:M,content:(G==null?void 0:G.content)||I.promptContent||"",eggs:[],totalPnl:0,totalTrades:0,totalWins:0,totalLosses:0}}const z=I.results||m(I),H={...I,results:z||{totalPnl:0,winRate:0,totalTrades:0,wins:0,losses:0},isExpired:v(I)};R[L].eggs.push(H),R[L].totalTrades+=(z==null?void 0:z.totalTrades)||0,R[L].totalWins+=(z==null?void 0:z.wins)||0,R[L].totalLosses+=(z==null?void 0:z.losses)||0}for(const I of Object.values(R)){if(I.eggs.length>0){const L=I.eggs.reduce((M,z)=>{var H;return M+(((H=z.results)==null?void 0:H.totalPnl)||0)},0);I.totalPnl=L/I.eggs.length}I.winRate=I.totalTrades>0?Math.round(I.totalWins/I.totalTrades*100):0,I.eggWinRate=I.eggs.length>0?Math.round(I.eggs.filter(L=>{var M;return(((M=L.results)==null?void 0:M.totalPnl)||0)>=0}).length/I.eggs.length*100):0,I.eggs.sort((L,M)=>{var z,H;return(((z=M.results)==null?void 0:z.totalPnl)||0)-(((H=L.results)==null?void 0:H.totalPnl)||0)})}let _=Object.values(R);return p==="profitable"?_=_.filter(I=>(I.totalPnl||0)>=0):p==="unprofitable"&&(_=_.filter(I=>(I.totalPnl||0)<0)),_.sort((I,L)=>{var M,z;switch(h){case"winRate":return(L.winRate||0)-(I.winRate||0);case"eggs":return(((M=L.eggs)==null?void 0:M.length)||0)-(((z=I.eggs)==null?void 0:z.length)||0);case"trades":return(L.totalTrades||0)-(I.totalTrades||0);case"pnl":default:return(L.totalPnl||0)-(I.totalPnl||0)}}),_}catch(S){return console.error("Error calculating prompt stats:",S),[]}},[e,t,n,s,p,h]),w=k.useMemo(()=>{const S={totalPrompts:0,totalEggs:0,totalTrades:0,avgPnl:0,avgWinRate:0,profitablePrompts:0};try{if(!Array.isArray(y)||y.length===0)return S;const R=y.reduce((G,J)=>{var P;return G+((J==null?void 0:J.totalPnl)||0)*(((P=J==null?void 0:J.eggs)==null?void 0:P.length)||0)},0),_=y.reduce((G,J)=>{var P;return G+(((P=J==null?void 0:J.eggs)==null?void 0:P.length)||0)},0),I=_>0?R/_:0,L=y.reduce((G,J)=>G+((J==null?void 0:J.totalTrades)||0),0),M=y.reduce((G,J)=>G+((J==null?void 0:J.totalWins)||0),0),z=L>0?Math.round(M/L*100):0,H=y.filter(G=>((G==null?void 0:G.totalPnl)||0)>=0).length;return{totalPrompts:y.length,totalEggs:_,totalTrades:L,avgPnl:I,avgWinRate:z,profitablePrompts:H}}catch(R){return console.error("Error calculating global stats:",R),S}},[y]),N=[{id:"pnl",label:"PnL"},{id:"winRate",label:"Win Rate"},{id:"eggs",label:"Most Eggs"},{id:"trades",label:"Most Trades"}],T=[{id:"all",label:"All"},{id:"profitable",label:"Profitable"},{id:"unprofitable",label:"Loss"}],E=S=>{if(!S)return"-";try{return new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return"-"}};return i.jsxs($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[i.jsx(Sl,{title:"Prompts",subtitle:o==="reports"?`${w.totalPrompts} strategies analyzed`:"Batch preset monitoring"}),i.jsx("div",{className:"px-4 mb-4",children:i.jsx("div",{className:"flex bg-quant-surface rounded-xl p-1",children:rT.map(S=>{const R=S.icon,_=o===S.id;return i.jsxs("button",{onClick:()=>c(S.id),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg transition-all ${_?"bg-quant-card text-accent-cyan shadow-lg":"text-gray-500"}`,children:[i.jsx(R,{size:16}),i.jsx("span",{className:"text-sm font-medium",children:S.label})]},S.id)})})}),i.jsx(Qe,{mode:"wait",children:o==="reports"?i.jsxs($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"px-4 pb-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-quant-card border rounded-2xl p-4 ${w.avgPnl>=0?"border-accent-green/30":"border-accent-red/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.avgPnl>=0?i.jsx(Pt,{size:16,className:"text-accent-green"}):i.jsx(Xn,{size:16,className:"text-accent-red"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Avg PnL / Egg"})]}),i.jsxs("span",{className:`text-2xl font-bold font-mono ${w.avgPnl>=0?"text-accent-green":"text-accent-red"}`,children:[w.avgPnl>=0?"+":"",yc(w.avgPnl),"%"]})]}),i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:`bg-quant-card border rounded-2xl p-4 ${w.avgWinRate>=50?"border-accent-green/30":"border-accent-red/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Yn,{size:16,className:"text-accent-cyan"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Win Rate"})]}),i.jsxs("span",{className:`text-2xl font-bold font-mono ${w.avgWinRate>=50?"text-accent-green":"text-accent-red"}`,children:[w.avgWinRate,"%"]})]}),i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-quant-card border border-quant-border rounded-2xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(US,{size:16,className:"text-accent-purple"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Total Eggs"})]}),i.jsx("span",{className:"text-2xl font-bold font-mono text-white",children:w.totalEggs})]}),i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-quant-card border border-quant-border rounded-2xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Va,{size:16,className:"text-accent-cyan"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Total Trades"})]}),i.jsx("span",{className:"text-2xl font-bold font-mono text-white",children:w.totalTrades})]})]}),w.totalPrompts>0&&i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-quant-card border border-quant-border rounded-2xl p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-400",children:"Strategy Success Rate"}),i.jsxs("span",{className:"text-sm font-mono text-accent-cyan",children:[w.profitablePrompts,"/",w.totalPrompts," profitable"]})]}),i.jsx("div",{className:"h-3 bg-quant-surface rounded-full overflow-hidden flex",children:i.jsx($.div,{initial:{width:0},animate:{width:`${w.profitablePrompts/w.totalPrompts*100}%`},transition:{delay:.3,duration:.5},className:"h-full bg-gradient-to-r from-accent-green to-accent-cyan"})})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto hide-scrollbar",children:[i.jsx(J0,{size:14,className:"text-gray-500 shrink-0"}),T.map(S=>i.jsx("button",{onClick:()=>g(S.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all shrink-0 ${p===S.id?"bg-accent-cyan/20 text-accent-cyan":"bg-quant-surface text-gray-400"}`,children:S.label},S.id))]}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto hide-scrollbar",children:[i.jsx("span",{className:"text-xs text-gray-500 shrink-0",children:"Sort:"}),N.map(S=>i.jsx("button",{onClick:()=>f(S.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all shrink-0 ${h===S.id?"bg-accent-purple/20 text-accent-purple":"bg-quant-surface text-gray-400"}`,children:S.label},S.id))]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[i.jsx(Jn,{size:14}),"Strategies by Performance (",y.length,")"]}),y.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-quant-surface flex items-center justify-center",children:i.jsx(Jn,{size:32,className:"text-gray-600"})}),i.jsx("p",{className:"text-gray-400 mb-2",children:"No completed strategies yet"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Strategies will appear here when their eggs complete"})]}):i.jsx(Qe,{mode:"popLayout",children:y.map((S,R)=>{var M,z;if(!S)return null;const _=(S.totalPnl||0)>=0,I=R+1,L=u===S.id;return i.jsxs($.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:R*.03},className:`bg-quant-card border rounded-2xl overflow-hidden transition-all ${_?"border-accent-green/20":"border-accent-red/20"}`,children:[i.jsx("button",{onClick:()=>d(L?null:S.id),className:"w-full p-4 text-left",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold text-sm shrink-0 ${I===1?"bg-accent-yellow/20 text-accent-yellow":I===2?"bg-gray-400/20 text-gray-300":I===3?"bg-accent-orange/20 text-accent-orange":"bg-quant-surface text-gray-500"}`,children:I<=3?i.jsx(BS,{size:18}):`#${I}`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h3",{className:"font-semibold text-white truncate",children:S.name||"Unknown"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-xs text-gray-500 bg-quant-surface px-2 py-0.5 rounded-full",children:[((M=S.eggs)==null?void 0:M.length)||0," eggs"]}),L?i.jsx(Cs,{size:16,className:"text-gray-500"}):i.jsx(Bn,{size:16,className:"text-gray-500"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"PnL"}),i.jsxs("span",{className:`block font-mono text-sm font-bold ${_?"text-accent-green":"text-accent-red"}`,children:[_?"+":"",yc(S.totalPnl),"%"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Win Rate"}),i.jsxs("span",{className:`block font-mono text-sm ${(S.winRate||0)>=50?"text-accent-green":"text-accent-red"}`,children:[S.winRate||0,"%"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Trades"}),i.jsx("span",{className:"block font-mono text-sm text-white",children:S.totalTrades||0})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"W/L"}),i.jsxs("span",{className:"block font-mono text-sm",children:[i.jsx("span",{className:"text-accent-green",children:S.totalWins||0}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-accent-red",children:S.totalLosses||0})]})]})]})]})]})}),i.jsx(Qe,{children:L&&i.jsx($.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-quant-border overflow-hidden",children:i.jsxs("div",{className:"p-4 bg-quant-surface/30 space-y-3",children:[S.content&&i.jsxs("div",{className:"p-3 bg-quant-bg/50 rounded-xl border border-quant-border",children:[i.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider block mb-1",children:"Strategy"}),i.jsx("p",{className:"text-xs text-gray-300 line-clamp-3",children:S.content})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:["Eggs sorted by PnL (",((z=S.eggs)==null?void 0:z.length)||0,")"]}),i.jsxs("span",{className:"text-xs text-gray-500",children:[(S.eggs||[]).filter(H=>{var G;return(((G=H==null?void 0:H.results)==null?void 0:G.totalPnl)||0)>=0}).length," profitable"]})]}),i.jsx("div",{className:"space-y-2",children:(S.eggs||[]).map((H,G)=>{var F,K,U,Z,Ie,oe;if(!H)return null;const J=((F=H.results)==null?void 0:F.totalPnl)||0,P=J>=0;return i.jsx("div",{className:`bg-quant-card rounded-xl p-3 border transition-all ${H.isExpired?"border-accent-orange/20":P?"border-accent-green/20":"border-accent-red/20"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${G===0?"bg-accent-yellow/20 text-accent-yellow":"bg-quant-surface text-gray-500"}`,children:G+1}),i.jsx(Yt,{size:32,status:H.isExpired?"expired":"hatched",winRate:((K=H.results)==null?void 0:K.winRate)||0}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-white",children:E(H.createdAt)}),H.isExpired&&i.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-accent-orange/20 text-accent-orange",children:"Expired"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[i.jsxs("span",{children:[((U=H.results)==null?void 0:U.totalTrades)||0," trades"]}),i.jsxs("span",{children:[i.jsxs("span",{className:"text-accent-green",children:[((Z=H.results)==null?void 0:Z.wins)||0,"W"]})," / ",i.jsxs("span",{className:"text-accent-red",children:[((Ie=H.results)==null?void 0:Ie.losses)||0,"L"]})]}),i.jsxs("span",{children:["WR: ",((oe=H.results)==null?void 0:oe.winRate)||0,"%"]})]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("span",{className:`font-mono font-bold ${P?"text-accent-green":"text-accent-red"}`,children:[P?"+":"",yc(J),"%"]})}),i.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),l(H.id)},className:"p-2 rounded-lg hover:bg-quant-surface text-gray-500 hover:text-accent-cyan transition-colors",title:"View in Incubator",children:i.jsx(zo,{size:14})})]})},H.id||G)})})]})})})]},S.id||R)})})]})]},"reports"):i.jsx($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:i.jsx(sT,{})},"healthchecks")})]})}const aT=["Be specific about indicators (RSI, MACD, Moving Averages)","Include timeframes (1H, 4H, Daily)","Mention price levels (support, resistance, fibonacci)","Describe volume conditions","Add entry/exit criteria","Consider market context (trend, range)"];function iT({prompt:e,onClose:t,onSave:n}){const{addPrompt:s,updatePrompt:r}=W(),a=!!e,o=k.useRef(null),[l,c]=k.useState((e==null?void 0:e.name)||""),[u,d]=k.useState((e==null?void 0:e.content)||""),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[v,b]=k.useState(null);k.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${Math.max(300,o.current.scrollHeight)}px`)},[u]);const x=u.length,m=u.trim()?u.trim().split(/\s+/).length:0,y=async()=>{if(!l.trim())return;f(!0);const N={name:l.trim(),content:u.trim()||l.trim(),status:"active"};await new Promise(T=>setTimeout(T,300)),a?r(e.id,N):s(N),b(new Date),f(!1),n==null||n(),t()},w=l.trim().length>0;return i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-quant-bg",children:i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsx("header",{className:"shrink-0 bg-quant-card border-b border-quant-border",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:t,className:"p-3 -ml-1 rounded-lg hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(Os,{size:22,className:"text-gray-400"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-accent-cyan/10 flex items-center justify-center",children:i.jsx(Jn,{size:16,className:"text-accent-cyan"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-sm font-semibold text-white",children:a?"Edit Strategy":"New Strategy"}),i.jsx("p",{className:"text-[10px] text-gray-500",children:v?`Saved ${v.toLocaleTimeString()}`:"Unsaved changes"})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>g(!p),className:`p-2 rounded-lg transition-colors ${p?"bg-accent-yellow/20 text-accent-yellow":"hover:bg-quant-surface text-gray-400"}`,title:"Writing tips",children:i.jsx(Ha,{size:18})}),i.jsx("button",{onClick:y,disabled:!w||h,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-accent-cyan text-quant-bg font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-accent-cyan/90 transition-colors",children:h?i.jsxs(i.Fragment,{children:[i.jsx($.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:i.jsx(Li,{size:16})}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Li,{size:16}),a?"Update":"Save"]})})]})]})}),p&&i.jsx($.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"shrink-0 bg-accent-yellow/5 border-b border-accent-yellow/20",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-3",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ha,{size:14,className:"text-accent-yellow shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-accent-yellow font-medium mb-2",children:"Writing Tips for Better Strategies:"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:aT.map((N,T)=>i.jsxs("div",{className:"flex items-start gap-1.5 text-xs text-gray-400",children:[i.jsx(Ge,{size:10,className:"text-accent-yellow shrink-0 mt-0.5"}),N]},T))})]})]})})}),i.jsx("main",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("input",{type:"text",value:l,onChange:N=>c(N.target.value),placeholder:"Strategy Name",className:"w-full bg-transparent text-2xl md:text-3xl font-bold text-white placeholder-gray-600 focus:outline-none border-none",autoFocus:!0}),!l.trim()&&i.jsxs("p",{className:"text-xs text-accent-red mt-1 flex items-center gap-1",children:[i.jsx(We,{size:12}),"Name is required"]})]}),i.jsx("div",{className:"h-px bg-quant-border mb-6"}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{ref:o,value:u,onChange:N=>d(N.target.value),placeholder:`Describe your trading strategy here...

Write your strategy in plain language. Be as detailed as you want - the more specific you are, the better the AI can find matching opportunities.

Example:
I'm looking for cryptocurrencies that are showing signs of a potential reversal. Specifically:

1. RSI (14) below 30 on the 4-hour chart, indicating oversold conditions
2. Price is within 5% of a significant support level (previous lows or fibonacci retracement)
3. Volume has increased by at least 20% compared to the 20-period average
4. The overall market (BTC) is not in a strong downtrend

I prefer to enter slightly below the current price to get a better risk/reward ratio. My target is a move back to the middle of the recent range, with a stop loss just below the support level.`,className:"w-full bg-transparent text-base md:text-lg text-gray-200 placeholder-gray-600 focus:outline-none resize-none leading-relaxed",style:{minHeight:"300px"}}),i.jsx("div",{className:"sticky bottom-0 left-0 right-0 py-3 bg-gradient-to-t from-quant-bg via-quant-bg to-transparent",children:i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(HS,{size:12}),x," characters"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(_S,{size:12}),m," words"]})]}),i.jsxs("span",{children:[x<50&&i.jsx("span",{className:"text-accent-yellow",children:"Add more detail for better results"}),x>=50&&x<200&&i.jsx("span",{className:"text-accent-cyan",children:"Good start!"}),x>=200&&i.jsx("span",{className:"text-accent-green",children:"Great level of detail"})]})]})})]})]})}),i.jsx("footer",{className:"shrink-0 md:hidden bg-quant-card border-t border-quant-border p-4",children:i.jsx("button",{onClick:y,disabled:!w||h,className:"w-full flex items-center justify-center gap-2 py-3.5 rounded-xl bg-accent-cyan text-quant-bg font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:h?i.jsxs(i.Fragment,{children:[i.jsx($.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:i.jsx(Li,{size:18})}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Li,{size:18}),a?"Update Strategy":"Save Strategy"]})})})]})})}const oT=["AI Provider","Prompts","System"],cm=[{id:"binance",name:"Binance",description:"Largest crypto exchange by volume",icon:"",color:"from-yellow-500 to-orange-500"},{id:"tradingview",name:"TradingView",description:"Advanced charting platform",icon:"",color:"from-blue-500 to-purple-500"}],lT=[{id:"anthropic",name:"Anthropic",models:["claude-sonnet-4-20250514","claude-3-5-sonnet-20241022","claude-3-haiku-20240307"],icon:"",color:"from-orange-500 to-amber-500",apiUrl:"https://console.anthropic.com/settings/keys",apiLabel:"Get API key from Anthropic Console"},{id:"google",name:"Google",models:["gemini-1.5-flash","gemini-1.5-pro","gemini-pro"],icon:"",color:"from-blue-500 to-cyan-500",apiUrl:"https://aistudio.google.com/apikey",apiLabel:"Get free API key from Google AI Studio"},{id:"openai",name:"OpenAI",models:["gpt-4","gpt-4-turbo","gpt-3.5-turbo"],icon:"",color:"from-green-500 to-emerald-500",apiUrl:"https://platform.openai.com/api-keys",apiLabel:"Get API key from OpenAI Platform"},{id:"xai",name:"xAI (Grok)",models:["grok-beta","grok-2"],icon:"",color:"from-orange-500 to-red-500",apiUrl:"https://console.x.ai/",apiLabel:"Get API key from xAI Console"}];function cT(){const{settings:e,prompts:t,updateSettings:n,updateApiKey:s,updateSupabase:r,updateTradingPlatform:a,updatePrompt:o,updateSystemPrompt:l,addPrompt:c,syncToCloud:u,loadFromCloud:d,repairEggsInCloud:h,syncStatus:f,priceStatus:p,refreshPrices:g,resetAllData:v,resetSelectiveData:b,getDataCounts:x,eggs:m,signals:y,settingsActiveTab:w,setSettingsActiveTab:N}=W(),T=w,E=N,[S,R]=k.useState({}),[_,I]=k.useState(!1),[L,M]=k.useState(null),[z,H]=k.useState(!1),[G,J]=k.useState(e.systemPrompt||""),[P,F]=k.useState(!1),[K,U]=k.useState(!1),[Z,Ie]=k.useState({}),[oe,Oe]=k.useState({}),[ke,ft]=k.useState({}),ss=async(A,ae)=>{if(!ae||ae.length<10){Oe({...oe,[A]:{success:!1,error:"API key too short"}});return}Ie({...Z,[A]:!0}),Oe({...oe,[A]:null});try{const me=await MP(A,ae);me.success?(Oe({...oe,[A]:{success:!0}}),ft({...ke,[A]:!0})):Oe({...oe,[A]:{success:!1,error:me.message}})}catch(me){Oe({...oe,[A]:{success:!1,error:me.message}})}Ie({...Z,[A]:!1})},rn=(A,ae)=>{s(A,ae),ft({...ke,[A]:!1}),Oe({...oe,[A]:null})},[j,O]=k.useState({deletePrompts:!1,deleteEggs:!1,deleteSignals:!1,deleteLogs:!1,resetOnboarding:!1,keepLinkedData:!0}),[C,Y]=k.useState(null),[le,re]=k.useState(!1),[he,pe]=k.useState(!1),[jt,de]=k.useState(null),[Rt,Sn]=k.useState(!1),[ce,It]=k.useState(null),pt=x(),Ls=()=>{const A=[],ae=[];if(j.deletePrompts){if(A.push(`${t.length} prompts`),!j.keepLinkedData&&m.length>0){const me=m.filter(q=>t.some(ve=>ve.id===q.promptId));if(me.length>0){ae.push(`${me.length} eggs will also be deleted (linked to prompts)`);const q=y.filter(ve=>me.some(B=>B.trades.includes(ve.id)));q.length>0&&ae.push(`${q.length} signals will also be deleted (linked to those eggs)`)}}else if(j.keepLinkedData&&m.length>0){const me=m.filter(q=>t.some(ve=>ve.id===q.promptId));me.length>0&&ae.push(`${me.length} eggs will become orphaned (marked as "deleted" prompt)`)}}if(j.deleteEggs&&(A.push(`${m.length} eggs`),!j.keepLinkedData)){const me=m.flatMap(ve=>ve.trades),q=y.filter(ve=>me.includes(ve.id));q.length>0&&ae.push(`${q.length} signals will also be deleted (linked to eggs)`)}if(j.deleteSignals){A.push(`${y.length} signals/trades`);const me=m.filter(q=>q.trades.length>0);me.length>0&&ae.push(`${me.length} eggs will lose their trade references`)}return j.deleteLogs&&A.push(`${pt.activityLogs} activity logs`),j.resetOnboarding&&A.push("onboarding status (will show setup wizard again)"),{impact:A,warnings:ae}},ci=()=>{const A=b(j);Y(A),U(!1),setTimeout(()=>{O({deletePrompts:!1,deleteEggs:!1,deleteSignals:!1,deleteLogs:!1,resetOnboarding:!1,keepLinkedData:!0}),Y(null)},3e3)},$s=j.deletePrompts||j.deleteEggs||j.deleteSignals||j.deleteLogs||j.resetOnboarding,Mr=()=>{l(G),H(!1)},ui=async()=>{I(!0),M(null),await new Promise(ae=>setTimeout(ae,1500));const A=e.supabase.url&&e.supabase.anonKey;M(A?"success":"error"),A&&r({connected:!0}),I(!1)};return i.jsxs($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[i.jsx(Sl,{title:"Settings",subtitle:"Configure your app"}),i.jsx("div",{className:"px-4 py-3",children:i.jsx("div",{className:"flex bg-quant-surface rounded-xl p-1",children:oT.map((A,ae)=>i.jsx("button",{onClick:()=>E(ae),className:`flex-1 py-2.5 px-3 rounded-lg text-sm font-medium transition-all ${T===ae?"bg-quant-card text-white shadow":"text-gray-400"}`,children:A},A))})}),i.jsx("div",{className:"px-4 pb-4",children:i.jsxs(Qe,{mode:"wait",children:[T===0&&i.jsx($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Select Provider"}),lT.map(A=>{var ae,me,q,ve,B,Fe,ee,He;return i.jsxs("button",{onClick:()=>n({aiProvider:A.id}),className:`w-full bg-quant-card border rounded-xl p-4 text-left transition-all ${e.aiProvider===A.id?"border-accent-cyan":"border-quant-border"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"text-2xl",children:A.icon}),e.apiKeys[A.id]&&i.jsx("span",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-quant-card ${(ae=oe[A.id])!=null&&ae.success?"bg-accent-green":"bg-accent-yellow"}`})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-white block",children:A.name}),i.jsx("span",{className:"text-xs text-gray-500",children:e.apiKeys[A.id]?(me=oe[A.id])!=null&&me.success?" Connected":"Key saved - test to verify":"No API key"})]})]}),e.aiProvider===A.id&&i.jsx("div",{className:"w-5 h-5 rounded-full bg-accent-cyan flex items-center justify-center",children:i.jsx(Ge,{size:14,className:"text-quant-bg"})})]}),e.aiProvider===A.id&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-quant-border",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"text-xs text-gray-400",children:"API Key"}),i.jsxs("a",{href:A.apiUrl,target:"_blank",rel:"noopener noreferrer",onClick:be=>be.stopPropagation(),className:"text-xs text-accent-cyan hover:underline flex items-center gap-1",children:[A.apiLabel,i.jsx(G0,{size:12})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:S[A.id]?"text":"password",value:e.apiKeys[A.id]||"",onChange:be=>rn(A.id,be.target.value),placeholder:"Enter your API key",className:`w-full bg-quant-surface border rounded-lg px-4 py-2.5 pr-10 text-white text-sm font-mono ${(q=oe[A.id])!=null&&q.success?"border-accent-green":(ve=oe[A.id])!=null&&ve.error?"border-accent-red":"border-quant-border"}`}),i.jsx("button",{onClick:be=>{be.stopPropagation(),R({...S,[A.id]:!S[A.id]})},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:S[A.id]?i.jsx(MS,{size:16}):i.jsx(zS,{size:16})})]}),i.jsx("button",{onClick:be=>{be.stopPropagation(),ss(A.id,e.apiKeys[A.id])},disabled:!e.apiKeys[A.id]||Z[A.id],className:`w-full mt-3 py-2.5 rounded-lg font-medium text-sm flex items-center justify-center gap-2 transition-all ${Z[A.id]?"bg-quant-surface text-gray-400":(B=oe[A.id])!=null&&B.success?"bg-accent-green/20 text-accent-green":"bg-accent-cyan/20 text-accent-cyan hover:bg-accent-cyan/30"}`,children:Z[A.id]?i.jsxs(i.Fragment,{children:[i.jsx(cn,{size:14,className:"animate-spin"}),"Testing..."]}):(Fe=oe[A.id])!=null&&Fe.success?i.jsxs(i.Fragment,{children:[i.jsx(Ge,{size:14}),"Connected & Saved!"]}):i.jsxs(i.Fragment,{children:[i.jsx(rh,{size:14}),"Test Connection"]})}),((ee=oe[A.id])==null?void 0:ee.error)&&i.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-accent-red/10 border border-accent-red/30 text-accent-red text-xs flex items-start gap-2",children:[i.jsx(We,{size:14,className:"shrink-0 mt-0.5"}),i.jsx("span",{children:oe[A.id].error})]}),((He=oe[A.id])==null?void 0:He.success)&&i.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-accent-green/10 border border-accent-green/30 text-accent-green text-xs flex items-center gap-2",children:[i.jsx(Ge,{size:14}),i.jsx("span",{children:"API key verified and saved successfully!"})]}),i.jsx("label",{className:"text-xs text-gray-400 block mt-4 mb-2",children:"Model"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:A.models.map(be=>i.jsx("button",{onClick:mt=>{mt.stopPropagation(),n({aiModel:be})},className:`px-3 py-1.5 rounded-lg text-xs font-mono transition-all ${e.aiModel===be?"bg-accent-cyan/20 text-accent-cyan border border-accent-cyan/30":"bg-quant-surface text-gray-400 border border-transparent"}`,children:be},be))})]})]},A.id)})]})},"ai"),T===1&&i.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-br from-accent-cyan/10 to-electric-600/10 border-2 border-accent-cyan/30 rounded-xl overflow-hidden",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-accent-cyan/20",children:i.jsx($S,{size:18,className:"text-accent-cyan"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-white",children:"System Prompt"}),i.jsx("span",{className:"text-xs text-accent-cyan",children:"Parent prompt for AUTO mode"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{z?Mr():(H(!0),J(e.systemPrompt||""))},className:`p-2 rounded-lg transition-colors ${z?"bg-accent-green/20 text-accent-green":"hover:bg-quant-surface text-gray-400"}`,children:z?i.jsx(Ge,{size:16}):i.jsx(Pu,{size:16})}),!z&&i.jsx("button",{onClick:()=>F(!P),className:"p-2 rounded-lg hover:bg-quant-surface text-gray-400 transition-colors",children:P?i.jsx(Cs,{size:16}):i.jsx(Bn,{size:16})})]})]}),z?i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{value:G,onChange:A=>J(A.target.value),className:"w-full bg-quant-surface border border-quant-border rounded-lg px-3 py-2 text-sm text-white font-mono resize-none",rows:15}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>H(!1),className:"flex-1 py-2 rounded-lg bg-quant-surface text-gray-400 hover:text-white transition-colors",children:"Cancel"}),i.jsx("button",{onClick:Mr,className:"flex-1 py-2 rounded-lg bg-accent-cyan/20 text-accent-cyan hover:bg-accent-cyan/30 transition-colors",children:"Save Changes"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:`text-sm text-gray-400 font-mono ${P?"":"line-clamp-3"}`,children:e.systemPrompt}),!P&&i.jsx("button",{onClick:()=>F(!0),className:"text-xs text-accent-cyan mt-2 hover:underline",children:"Show full prompt..."})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-accent-cyan/20",children:[i.jsx("span",{className:"text-xs text-accent-cyan bg-accent-cyan/10 px-2 py-1 rounded-full",children:"MASTER TEMPLATE"}),i.jsx("span",{className:"text-xs text-gray-500",children:"All AUTO prompts inherit from this"})]})]})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-px bg-quant-border"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Child Prompts"}),i.jsx("div",{className:"flex-1 h-px bg-quant-border"})]}),i.jsxs("button",{onClick:()=>{de(null),pe(!0)},className:"w-full bg-quant-surface border border-dashed border-quant-border rounded-xl p-4 flex items-center justify-center gap-2 text-gray-400 hover:border-accent-cyan hover:text-accent-cyan transition-all",children:[i.jsx(Z0,{size:18}),i.jsx("span",{children:"Create New Prompt"})]}),i.jsx("div",{className:"space-y-3",children:t.map(A=>i.jsx("div",{className:"bg-quant-card border border-quant-border rounded-xl overflow-hidden",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold text-white",children:A.name}),i.jsx("button",{onClick:()=>{de(A),pe(!0)},className:"p-2 rounded-lg transition-colors hover:bg-quant-surface text-gray-400",children:i.jsx(Pu,{size:16})})]}),i.jsx("p",{className:"text-sm text-gray-400 font-mono line-clamp-2",children:A.content}),i.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-quant-border",children:[i.jsx("span",{className:"text-xs text-gray-500",children:A.content?`${A.content.length} chars`:"No description"}),i.jsx("span",{className:"text-xs text-gray-500",children:A.updatedAt?new Date(A.updatedAt).toLocaleDateString():"-"})]})]})},A.id))})]},"prompts"),T===2&&i.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[i.jsxs("div",{className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-green/20",children:i.jsx(Ua,{size:20,className:"text-accent-green"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-white",children:"Trading Platforms"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Real-time price data sources"})]}),p.lastUpdated&&i.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${p.error?"bg-accent-red":"bg-accent-green"} animate-pulse`}),i.jsx("span",{className:"text-gray-400",children:p.source==="binance"?"BN":"TV"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs text-gray-400 block mb-2 flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 rounded-full bg-accent-cyan/20 flex items-center justify-center text-[10px] text-accent-cyan font-bold",children:"1"}),"Primary Platform"]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:cm.map(A=>{var ae,me;return i.jsxs("button",{onClick:()=>a({primary:A.id}),className:`p-3 rounded-xl border transition-all ${((ae=e.tradingPlatform)==null?void 0:ae.primary)===A.id?"bg-accent-cyan/10 border-accent-cyan":"bg-quant-surface border-quant-border hover:border-gray-600"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:A.icon}),i.jsxs("div",{className:"text-left",children:[i.jsx("span",{className:"text-sm font-medium text-white block",children:A.name}),i.jsx("span",{className:"text-[10px] text-gray-500",children:A.description})]})]}),((me=e.tradingPlatform)==null?void 0:me.primary)===A.id&&i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx(Ge,{size:14,className:"text-accent-cyan"})})]},A.id)})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs text-gray-400 block mb-2 flex items-center gap-2",children:[i.jsx("span",{className:"w-4 h-4 rounded-full bg-accent-yellow/20 flex items-center justify-center text-[10px] text-accent-yellow font-bold",children:"2"}),"Fallback Platform"]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:cm.filter(A=>{var ae;return A.id!==((ae=e.tradingPlatform)==null?void 0:ae.primary)}).map(A=>{var ae,me;return i.jsxs("button",{onClick:()=>a({secondary:A.id}),className:`p-3 rounded-xl border transition-all ${((ae=e.tradingPlatform)==null?void 0:ae.secondary)===A.id?"bg-accent-yellow/10 border-accent-yellow":"bg-quant-surface border-quant-border hover:border-gray-600"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:A.icon}),i.jsxs("div",{className:"text-left",children:[i.jsx("span",{className:"text-sm font-medium text-white block",children:A.name}),i.jsx("span",{className:"text-[10px] text-gray-500",children:"Backup source"})]})]}),((me=e.tradingPlatform)==null?void 0:me.secondary)===A.id&&i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx(Ge,{size:14,className:"text-accent-yellow"})})]},A.id)})})]}),i.jsxs("div",{className:"pt-3 border-t border-quant-border",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-xs text-gray-400",children:"Price Refresh"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Every 15 minutes"})]}),i.jsxs("button",{onClick:()=>g(),disabled:p.isFetching,className:`w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all ${p.isFetching?"bg-quant-surface text-gray-400":"bg-accent-green/20 text-accent-green hover:bg-accent-green/30"}`,children:[i.jsx(cn,{size:16,className:p.isFetching?"animate-spin":""}),p.isFetching?"Fetching Prices...":"Refresh Prices Now"]}),i.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs",children:[i.jsx("span",{className:"text-gray-500",children:"Last updated:"}),i.jsx("span",{className:"text-gray-400 font-mono",children:p.lastUpdated?new Date(p.lastUpdated).toLocaleString():"Never"})]}),p.fallbackUsed&&i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-accent-yellow/20 text-accent-yellow text-xs mt-2",children:[i.jsx(We,{size:14}),i.jsx("span",{children:"Using fallback platform (primary unavailable)"})]}),p.error&&i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-accent-red/20 text-accent-red text-xs mt-2",children:[i.jsx(We,{size:14}),i.jsx("span",{children:p.error})]})]})]})]}),i.jsxs("div",{className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-cyan/20",children:i.jsx(Mo,{size:20,className:"text-accent-cyan"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white",children:"Supabase"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Cloud database connection"})]}),e.supabase.connected&&i.jsxs("div",{className:"ml-auto flex items-center gap-1 text-accent-green text-xs",children:[i.jsx(Ge,{size:14}),"Connected"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 block mb-2",children:"Project URL"}),i.jsx("input",{type:"text",value:e.supabase.url||"",onChange:A=>r({url:A.target.value,connected:!1}),placeholder:"https://xxx.supabase.co",className:"w-full bg-quant-surface border border-quant-border rounded-lg px-4 py-2.5 text-white text-sm font-mono"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 block mb-2",children:"Anon Key"}),i.jsx("input",{type:"password",value:e.supabase.anonKey||"",onChange:A=>r({anonKey:A.target.value,connected:!1}),placeholder:"eyJhbGci...",className:"w-full bg-quant-surface border border-quant-border rounded-lg px-4 py-2.5 text-white text-sm font-mono"})]}),i.jsx("button",{onClick:ui,disabled:_,className:`w-full py-3 rounded-xl font-medium transition-all ${_?"bg-quant-surface text-gray-400":"bg-accent-cyan/20 text-accent-cyan hover:bg-accent-cyan/30"}`,children:_?"Testing Connection...":"Test Connection"}),L&&i.jsx("div",{className:`flex items-center gap-2 p-3 rounded-lg ${L==="success"?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:L==="success"?i.jsxs(i.Fragment,{children:[i.jsx(Ge,{size:16}),i.jsx("span",{className:"text-sm",children:"Connection successful!"})]}):i.jsxs(i.Fragment,{children:[i.jsx(We,{size:16}),i.jsx("span",{className:"text-sm",children:"Connection failed. Check your credentials."})]})}),e.supabase.url&&e.supabase.anonKey&&i.jsxs("div",{className:"pt-4 border-t border-quant-border space-y-3",children:[i.jsx("h4",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Data Sync"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>u(),disabled:f.syncing,className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-quant-surface border border-quant-border text-gray-400 hover:text-white hover:border-accent-cyan/50 transition-all disabled:opacity-50",children:[f.syncing?i.jsx(cn,{size:16,className:"animate-spin"}):i.jsx(WS,{size:16}),i.jsx("span",{className:"text-sm",children:"Push to Cloud"})]}),i.jsxs("button",{onClick:()=>d(),disabled:f.loading,className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-quant-surface border border-quant-border text-gray-400 hover:text-white hover:border-accent-cyan/50 transition-all disabled:opacity-50",children:[f.loading?i.jsx(cn,{size:16,className:"animate-spin"}):i.jsx(DS,{size:16}),i.jsx("span",{className:"text-sm",children:"Pull from Cloud"})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-gray-500",children:"Last synced:"}),i.jsx("span",{className:"text-gray-400 font-mono",children:f.lastSynced?new Date(f.lastSynced).toLocaleString():"Never"})]}),f.error&&i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-accent-red/20 text-accent-red text-xs",children:[i.jsx(We,{size:14}),i.jsx("span",{children:f.error})]}),i.jsxs("div",{className:"pt-3 border-t border-quant-border",children:[i.jsx("h4",{className:"text-xs text-gray-400 uppercase tracking-wider mb-2",children:"Data Repair"}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Regenera campos vacos (prompt_content, full_ai_prompt, config) en eggs existentes"}),i.jsx("button",{onClick:async()=>{Sn(!0),It(null);try{const A=await h();It(A)}catch(A){It({success:!1,error:A.message})}Sn(!1)},disabled:Rt,className:`w-full py-2.5 rounded-xl font-medium flex items-center justify-center gap-2 transition-all ${Rt?"bg-quant-surface text-gray-400":"bg-accent-orange/20 text-accent-orange hover:bg-accent-orange/30"}`,children:Rt?i.jsxs(i.Fragment,{children:[i.jsx(cn,{size:14,className:"animate-spin"}),"Reparando eggs..."]}):i.jsxs(i.Fragment,{children:[i.jsx(wr,{size:14}),"Reparar Datos de Eggs"]})}),ce&&i.jsx("div",{className:`mt-2 p-2 rounded-lg text-xs flex items-start gap-2 ${ce.success?"bg-accent-green/10 border border-accent-green/30 text-accent-green":"bg-accent-red/10 border border-accent-red/30 text-accent-red"}`,children:ce.success?i.jsxs(i.Fragment,{children:[i.jsx(Ge,{size:14,className:"shrink-0 mt-0.5"}),i.jsx("span",{children:ce.repaired>0?`Reparados ${ce.repaired}/${ce.total} eggs`:`Todos los ${ce.total} eggs tienen datos vlidos`})]}):i.jsxs(i.Fragment,{children:[i.jsx(We,{size:14,className:"shrink-0 mt-0.5"}),i.jsx("span",{children:ce.error})]})})]})]})]})]}),i.jsxs("div",{className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsx("h3",{className:"font-semibold text-white mb-3",children:"App Info"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Version"}),i.jsx("span",{className:"text-white font-mono",children:"1.0.0"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Build"}),i.jsx("span",{className:"text-white font-mono",children:"2024.01.22"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Storage"}),i.jsx("span",{className:"text-white font-mono",children:"Local + Cloud"})]})]})]}),i.jsxs("div",{className:"bg-quant-card border border-accent-red/30 rounded-xl p-4",children:[i.jsxs("h3",{className:"font-semibold text-accent-red mb-4 flex items-center gap-2",children:[i.jsx(We,{size:16}),"Danger Zone"]}),i.jsxs("div",{className:"bg-quant-surface rounded-xl p-3 mb-4",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-2",children:"Current Data"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jn,{size:14,className:"text-accent-cyan"}),i.jsx("span",{className:"text-gray-400",children:"Prompts:"}),i.jsx("span",{className:"text-white font-mono",children:pt.prompts})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ba,{size:14,className:"text-accent-yellow"}),i.jsx("span",{className:"text-gray-400",children:"Eggs:"}),i.jsx("span",{className:"text-white font-mono",children:pt.eggs})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Va,{size:14,className:"text-accent-green"}),i.jsx("span",{className:"text-gray-400",children:"Signals:"}),i.jsx("span",{className:"text-white font-mono",children:pt.signals})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(xa,{size:14,className:"text-accent-purple"}),i.jsx("span",{className:"text-gray-400",children:"Logs:"}),i.jsx("span",{className:"text-white font-mono",children:pt.activityLogs})]})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Select Data to Delete"}),i.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-all ${j.deletePrompts?"bg-accent-red/10 border-accent-red/50":"bg-quant-surface border-quant-border hover:border-gray-600"}`,children:[i.jsx("input",{type:"checkbox",checked:j.deletePrompts,onChange:A=>O({...j,deletePrompts:A.target.checked}),className:"mt-0.5 w-4 h-4 rounded border-gray-600 bg-quant-surface text-accent-red focus:ring-accent-red"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx(Jn,{size:14,className:"text-accent-cyan"}),"Prompts"]}),i.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:[pt.prompts," items"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Trading strategies and configurations you've created"}),j.deletePrompts&&m.length>0&&i.jsxs("div",{className:"flex items-start gap-1.5 mt-2 p-2 rounded bg-accent-orange/10 text-accent-orange text-xs",children:[i.jsx(We,{size:12,className:"flex-shrink-0 mt-0.5"}),i.jsxs("span",{children:[m.filter(A=>t.some(ae=>ae.id===A.promptId)).length," eggs are linked to these prompts"]})]})]})]}),i.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-all ${j.deleteEggs?"bg-accent-red/10 border-accent-red/50":"bg-quant-surface border-quant-border hover:border-gray-600"}`,children:[i.jsx("input",{type:"checkbox",checked:j.deleteEggs,onChange:A=>O({...j,deleteEggs:A.target.checked}),className:"mt-0.5 w-4 h-4 rounded border-gray-600 bg-quant-surface text-accent-red focus:ring-accent-red"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx(Ba,{size:14,className:"text-accent-yellow"}),"Eggs"]}),i.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:[pt.incubatingEggs," live, ",pt.hatchedEggs," hatched"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Incubating and hatched trade groups with their results"}),j.deleteEggs&&y.length>0&&i.jsxs("div",{className:"flex items-start gap-1.5 mt-2 p-2 rounded bg-accent-orange/10 text-accent-orange text-xs",children:[i.jsx(We,{size:12,className:"flex-shrink-0 mt-0.5"}),i.jsxs("span",{children:[m.flatMap(A=>A.trades).filter(A=>y.some(ae=>ae.id===A)).length," signals are linked to these eggs"]})]})]})]}),i.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-all ${j.deleteSignals?"bg-accent-red/10 border-accent-red/50":"bg-quant-surface border-quant-border hover:border-gray-600"}`,children:[i.jsx("input",{type:"checkbox",checked:j.deleteSignals,onChange:A=>O({...j,deleteSignals:A.target.checked}),className:"mt-0.5 w-4 h-4 rounded border-gray-600 bg-quant-surface text-accent-red focus:ring-accent-red"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx(Va,{size:14,className:"text-accent-green"}),"Signals / Trades"]}),i.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:[pt.activeSignals," active, ",pt.closedSignals," closed"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All trade signals including active positions and history"}),j.deleteSignals&&m.some(A=>A.trades.length>0)&&i.jsxs("div",{className:"flex items-start gap-1.5 mt-2 p-2 rounded bg-accent-orange/10 text-accent-orange text-xs",children:[i.jsx(We,{size:12,className:"flex-shrink-0 mt-0.5"}),i.jsx("span",{children:"Eggs will lose their trade data references"})]})]})]}),i.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-all ${j.deleteLogs?"bg-accent-red/10 border-accent-red/50":"bg-quant-surface border-quant-border hover:border-gray-600"}`,children:[i.jsx("input",{type:"checkbox",checked:j.deleteLogs,onChange:A=>O({...j,deleteLogs:A.target.checked}),className:"mt-0.5 w-4 h-4 rounded border-gray-600 bg-quant-surface text-accent-red focus:ring-accent-red"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx(xa,{size:14,className:"text-accent-purple"}),"Activity Logs"]}),i.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:[pt.activityLogs," entries"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Monitoring console history (prices, syncs, trades)"})]})]}),i.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-all ${j.resetOnboarding?"bg-accent-red/10 border-accent-red/50":"bg-quant-surface border-quant-border hover:border-gray-600"}`,children:[i.jsx("input",{type:"checkbox",checked:j.resetOnboarding,onChange:A=>O({...j,resetOnboarding:A.target.checked}),className:"mt-0.5 w-4 h-4 rounded border-gray-600 bg-quant-surface text-accent-red focus:ring-accent-red"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx(Y0,{size:14,className:"text-gray-400"}),"Reset Onboarding"]})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show the initial setup wizard again on next app launch"})]})]})]}),(j.deletePrompts||j.deleteEggs||j.deleteSignals)&&i.jsxs("div",{className:"bg-quant-surface rounded-xl p-3 mb-4",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-2",children:"Linked Data Handling"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"linkedData",checked:j.keepLinkedData,onChange:()=>O({...j,keepLinkedData:!0}),className:"w-4 h-4 border-gray-600 bg-quant-surface text-accent-cyan focus:ring-accent-cyan"}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(Ap,{size:12,className:"text-accent-cyan"}),"Keep linked data (safe)"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Orphan linked items instead of deleting them"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"linkedData",checked:!j.keepLinkedData,onChange:()=>O({...j,keepLinkedData:!1}),className:"w-4 h-4 border-gray-600 bg-quant-surface text-accent-red focus:ring-accent-red"}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(Ip,{size:12,className:"text-accent-red"}),"Cascade delete (destructive)"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Also delete all data linked to selected items"})]})]})]})]}),C&&i.jsxs("div",{className:"bg-accent-green/10 border border-accent-green/30 rounded-xl p-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-accent-green text-sm",children:[i.jsx(Ge,{size:16}),i.jsx("span",{children:"Data deleted successfully"})]}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Removed: ",C.deletedPrompts," prompts, ",C.deletedEggs," eggs,",C.deletedSignals," signals, ",C.deletedLogs," logs"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("button",{onClick:()=>$s&&U(!0),disabled:!$s,className:`w-full py-3 rounded-xl font-medium transition-all flex items-center justify-center gap-2 ${$s?"bg-accent-red/20 text-accent-red hover:bg-accent-red/30":"bg-quant-surface text-gray-600 cursor-not-allowed"}`,children:[i.jsx(Vo,{size:16}),"Delete Selected Data"]}),i.jsx("button",{onClick:()=>{O({deletePrompts:!0,deleteEggs:!0,deleteSignals:!0,deleteLogs:!0,resetOnboarding:!0,keepLinkedData:!1}),U(!0)},className:"w-full py-2 rounded-xl font-medium bg-transparent border border-accent-red/30 text-accent-red/70 hover:bg-accent-red/10 hover:text-accent-red transition-all text-sm",children:"Nuclear Option: Delete Everything & Restart"})]})]}),i.jsx(Qe,{children:K&&i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>U(!1),children:i.jsxs($.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:A=>A.stopPropagation(),className:"bg-quant-card border border-accent-red/30 rounded-2xl p-5 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-full bg-accent-red/20 flex items-center justify-center mx-auto mb-3",children:i.jsx(Vo,{size:28,className:"text-accent-red"})}),i.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Confirm Deletion"}),i.jsx("p",{className:"text-sm text-gray-400",children:"This action cannot be undone"})]}),i.jsxs("div",{className:"bg-quant-surface rounded-xl p-3 mb-4",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-2",children:"Will be deleted:"}),i.jsx("ul",{className:"space-y-1",children:Ls().impact.map((A,ae)=>i.jsxs("li",{className:"flex items-center gap-2 text-sm text-white",children:[i.jsx(Os,{size:12,className:"text-accent-red"}),A]},ae))})]}),Ls().warnings.length>0&&i.jsxs("div",{className:"bg-accent-orange/10 border border-accent-orange/30 rounded-xl p-3 mb-4",children:[i.jsxs("span",{className:"text-xs text-accent-orange uppercase tracking-wider block mb-2 flex items-center gap-1",children:[i.jsx(We,{size:12}),"Cascade Effects"]}),i.jsx("ul",{className:"space-y-1",children:Ls().warnings.map((A,ae)=>i.jsxs("li",{className:"text-xs text-accent-orange",children:[" ",A]},ae))})]}),i.jsx("div",{className:`rounded-xl p-2 mb-4 text-xs flex items-center gap-2 ${j.keepLinkedData?"bg-accent-cyan/10 text-accent-cyan":"bg-accent-red/10 text-accent-red"}`,children:j.keepLinkedData?i.jsxs(i.Fragment,{children:[i.jsx(Ap,{size:12}),"Safe mode: linked data will be preserved"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ip,{size:12}),"Cascade mode: all linked data will be deleted"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-3 rounded-xl bg-quant-surface text-gray-400 hover:text-white transition-colors",children:"Cancel"}),j.deletePrompts&&j.deleteEggs&&j.deleteSignals&&j.deleteLogs&&j.resetOnboarding&&!j.keepLinkedData?i.jsx("button",{onClick:async()=>{re(!0),await v()},disabled:le,className:"flex-1 py-3 rounded-xl bg-accent-red text-white font-medium hover:bg-accent-red/80 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:le?i.jsxs(i.Fragment,{children:[i.jsx(cn,{size:16,className:"animate-spin"}),"Resetting..."]}):"Reset Everything"}):i.jsx("button",{onClick:ci,className:"flex-1 py-3 rounded-xl bg-accent-red text-white font-medium hover:bg-accent-red/80 transition-colors",children:"Delete Selected"})]})]})})})]},"system")]})}),i.jsx(Qe,{children:he&&i.jsx(iT,{prompt:jt,onClose:()=>{pe(!1),de(null)},onSave:()=>{pe(!1),de(null)}})})]})}function uT(){const{prompts:e,signals:t,selectedPromptId:n,setSelectedPromptId:s,addSignal:r,setActiveTab:a}=W(),o=e.find(p=>p.id===n);if(!o)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("p",{className:"text-gray-500",children:"Prompt not found"})});const l=t.filter(p=>p.promptId===n),c=l.filter(p=>p.status==="closed"&&p.result==="win"),u=l.filter(p=>p.status==="closed"&&p.result==="loss"),d=()=>{navigator.clipboard.writeText(o.content)},h=()=>{s(null),a("settings")},f=()=>{r(o.id)};return i.jsxs($.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"min-h-screen",children:[i.jsx("div",{className:"sticky top-0 z-30 bg-quant-bg/80 backdrop-blur-lg border-b border-quant-border px-4 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>s(null),className:"p-2 rounded-xl bg-quant-surface hover:bg-quant-border transition-colors",children:i.jsx(sh,{size:20,className:"text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-lg font-bold text-white",children:o.name}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${o.mode==="auto"?"bg-accent-cyan/20 text-accent-cyan":"bg-accent-orange/20 text-accent-orange"}`,children:o.mode.toUpperCase()}),i.jsx("span",{className:"text-xs text-gray-500 capitalize",children:o.executionTime})]})]}),i.jsx(Yt,{size:48,status:"hatched",winRate:o.winRate})]})}),i.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Yn,{size:16,className:"text-accent-cyan"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Win Rate"})]}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:`text-2xl font-bold font-mono ${o.winRate>=50?"text-accent-green":"text-accent-red"}`,children:o.winRate}),i.jsx("span",{className:"text-gray-500",children:"%"})]}),i.jsx("div",{className:"mt-2 h-1.5 bg-quant-surface rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full rounded-full ${o.winRate>=50?"bg-accent-green":"bg-accent-red"}`,style:{width:`${o.winRate}%`}})})]}),i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Va,{size:16,className:"text-accent-cyan"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Profit Factor"})]}),i.jsx("div",{className:"flex items-baseline gap-1",children:i.jsx("span",{className:`text-2xl font-bold font-mono ${o.profitFactor>=1?"text-accent-green":"text-accent-red"}`,children:o.profitFactor.toFixed(2)})}),i.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:o.profitFactor>=2?"Excellent":o.profitFactor>=1.5?"Good":o.profitFactor>=1?"Acceptable":"Poor"})]}),i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(qa,{size:16,className:"text-accent-red"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Max Drawdown"})]}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-2xl font-bold font-mono text-accent-red",children:o.maxDrawdown}),i.jsx("span",{className:"text-gray-500",children:"%"})]}),i.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:o.maxDrawdown<=10?"Low risk":o.maxDrawdown<=20?"Moderate":"High risk"})]}),i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:`bg-quant-card border rounded-xl p-4 ${o.totalPnl>=0?"stat-glow-positive":"stat-glow-negative"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.totalPnl>=0?i.jsx(Pt,{size:16,className:"text-accent-green"}):i.jsx(Xn,{size:16,className:"text-accent-red"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Total PnL"})]}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsxs("span",{className:`text-2xl font-bold font-mono ${o.totalPnl>=0?"text-accent-green":"text-accent-red"}`,children:[o.totalPnl>=0?"+":"",o.totalPnl.toFixed(0)]}),i.jsx("span",{className:"text-gray-500 text-sm",children:"USD"})]})]})]}),i.jsxs("div",{className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsx("h3",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"Prompt Content"}),i.jsx("p",{className:"text-sm text-gray-300 font-mono leading-relaxed",children:o.content})]}),i.jsxs("div",{className:"bg-quant-card border border-quant-border rounded-xl p-4",children:[i.jsx("h3",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"Configuration"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-quant-surface rounded-lg p-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block",children:"Capital"}),i.jsxs("span",{className:"text-sm font-mono text-white",children:["$",o.capital.toLocaleString()]})]}),i.jsxs("div",{className:"bg-quant-surface rounded-lg p-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block",children:"Leverage"}),i.jsxs("span",{className:"text-sm font-mono text-white",children:[o.leverage,"x"]})]}),i.jsxs("div",{className:"bg-quant-surface rounded-lg p-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block",children:"AI Model"}),i.jsx("span",{className:"text-sm font-mono text-white capitalize",children:o.aiModel})]}),i.jsxs("div",{className:"bg-quant-surface rounded-lg p-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block",children:"Min IPE"}),i.jsxs("span",{className:"text-sm font-mono text-white",children:[o.minIpe,"%"]})]})]})]}),i.jsxs("div",{className:"bg-quant-card border border-quant-border rounded-xl overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-quant-border",children:[i.jsx("h3",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Trade History"}),i.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[i.jsxs("span",{className:"text-sm text-gray-400",children:[i.jsx("span",{className:"text-white font-mono",children:o.trades})," total"]}),i.jsxs("span",{className:"text-sm text-accent-green",children:[i.jsx("span",{className:"font-mono",children:c.length})," wins"]}),i.jsxs("span",{className:"text-sm text-accent-red",children:[i.jsx("span",{className:"font-mono",children:u.length})," losses"]})]})]}),i.jsxs("div",{className:"divide-y divide-quant-border",children:[l.slice(0,5).map(p=>{const g=p.strategy==="LONG",v=p.status==="closed";return i.jsxs("div",{className:"p-3 flex items-center gap-3",children:[i.jsx("div",{className:`p-1.5 rounded-lg ${g?"bg-accent-green/20":"bg-accent-red/20"}`,children:g?i.jsx(Pt,{size:14,className:"text-accent-green"}):i.jsx(Xn,{size:14,className:"text-accent-red"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-white",children:p.asset}),i.jsx("span",{className:`text-xs ${g?"text-accent-green":"text-accent-red"}`,children:p.strategy})]}),i.jsxs("span",{className:"text-xs text-gray-500",children:["Entry: $",Number(p.entry).toLocaleString()]})]}),i.jsx("div",{className:"text-right",children:v?i.jsxs("span",{className:`text-sm font-mono font-bold ${p.result==="win"?"text-accent-green":"text-accent-red"}`,children:[p.pnl>=0?"+":"",p.pnl.toFixed(2)]}):i.jsxs("span",{className:"text-xs text-accent-cyan flex items-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-accent-cyan rounded-full animate-pulse"}),"Active"]})})]},p.id)}),l.length===0&&i.jsxs("div",{className:"p-8 text-center",children:[i.jsx($r,{size:24,className:"mx-auto text-gray-500 mb-2"}),i.jsx("p",{className:"text-sm text-gray-500",children:"No trades yet"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2 pb-8",children:[i.jsxs($.button,{whileTap:{scale:.95},onClick:f,className:"flex flex-col items-center gap-2 bg-quant-card border border-quant-border rounded-xl p-4 hover:border-accent-cyan/30 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-cyan/20",children:i.jsx(qo,{size:20,className:"text-accent-cyan"})}),i.jsx("span",{className:"text-xs text-gray-400",children:"Continue"})]}),i.jsxs($.button,{whileTap:{scale:.95},onClick:d,className:"flex flex-col items-center gap-2 bg-quant-card border border-quant-border rounded-xl p-4 hover:border-accent-cyan/30 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-orange/20",children:i.jsx(LS,{size:20,className:"text-accent-orange"})}),i.jsx("span",{className:"text-xs text-gray-400",children:"Copy"})]}),i.jsxs($.button,{whileTap:{scale:.95},onClick:h,className:"flex flex-col items-center gap-2 bg-quant-card border border-quant-border rounded-xl p-4 hover:border-accent-cyan/30 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-green/20",children:i.jsx(Pu,{size:20,className:"text-accent-green"})}),i.jsx("span",{className:"text-xs text-gray-400",children:"Edit"})]})]})]})]})}function dT({prompt:e,onClose:t,onComplete:n}){const{pendingTrades:s,isGeneratingTrades:r,generationError:a,toggleTradeSelection:o,selectAllTrades:l,createEgg:c,clearPendingTrades:u}=W(),d=s.filter(x=>x.selected).length,h=s.length>0&&d===s.length,[f,p]=k.useState({}),g=x=>{p(m=>({...m,[x]:!m[x]}))},v=()=>{if(d===0)return;const x=c(e);x&&n(x)},b=()=>{u(),t()};return r?i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:b,children:i.jsxs($.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-quant-card rounded-2xl p-8 max-w-sm mx-4 text-center",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[i.jsx(Yt,{size:96,status:"incubating"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(Uo,{size:32,className:"text-accent-cyan animate-spin"})})]}),i.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Generating Trades"}),i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Fetching real-time prices from Binance and generating trading opportunities..."}),i.jsx("button",{onClick:b,className:"w-full py-3 rounded-xl bg-quant-surface text-gray-400 hover:text-white hover:bg-quant-border transition-colors active:scale-95",children:"Cancel"})]})}):a?i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:b,children:i.jsxs($.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-quant-card rounded-2xl p-8 max-w-sm mx-4 text-center",onClick:x=>x.stopPropagation(),children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-red/20 flex items-center justify-center",children:i.jsx(We,{size:32,className:"text-accent-red"})}),i.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Generation Failed"}),i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:a}),i.jsx("button",{onClick:b,className:"w-full py-3 rounded-xl bg-quant-surface text-white",children:"Close"})]})}):i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm",onClick:b,children:i.jsxs($.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-lg bg-quant-card rounded-t-3xl max-h-[90vh] flex flex-col",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{className:"shrink-0 bg-quant-card border-b border-quant-border px-4 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"Select Trades"}),i.jsx("p",{className:"text-xs text-gray-500",children:e.name})]}),i.jsx("button",{onClick:b,className:"p-3 -mr-1 rounded-full hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(Os,{size:22,className:"text-gray-400"})})]}),i.jsxs("button",{onClick:l,className:"mt-3 flex items-center gap-2 text-sm text-accent-cyan",children:[h?i.jsx(AS,{size:16}):i.jsx(VS,{size:16}),"Select All (",s.length," trades)"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto hide-scrollbar p-4 space-y-3",children:s.map((x,m)=>{var N,T,E,S;const y=x.strategy==="LONG",w=f[x.id];return i.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.05},className:`bg-quant-surface border-2 rounded-xl transition-all ${x.selected?"border-accent-cyan bg-accent-cyan/5":"border-quant-border hover:border-gray-600"}`,children:[i.jsxs("button",{onClick:()=>o(x.id),className:"w-full text-left p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${y?"bg-accent-green/20":"bg-accent-red/20"}`,children:y?i.jsx(Pt,{size:18,className:"text-accent-green"}):i.jsx(Xn,{size:18,className:"text-accent-red"})}),i.jsx("div",{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${y?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:x.strategy}),i.jsx("span",{className:"font-semibold text-white",children:x.asset})]})})]}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${x.selected?"border-accent-cyan bg-accent-cyan":"border-gray-500"}`,children:x.selected&&i.jsx(Ge,{size:14,className:"text-quant-bg"})})]}),i.jsxs("div",{className:"flex items-start gap-2 mb-3 p-2 bg-quant-bg/50 rounded-lg",children:[i.jsx(Ha,{size:14,className:"text-accent-yellow shrink-0 mt-0.5"}),i.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:x.summary||x.explanation||"AI-generated trade based on your strategy"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[i.jsxs("div",{className:"bg-quant-bg/50 rounded-lg p-2",children:[i.jsx("span",{className:"text-xs text-accent-cyan block",children:"Market"}),i.jsxs("span",{className:"font-mono text-sm text-accent-cyan",children:["$",x.currentPrice]})]}),i.jsxs("div",{className:"bg-quant-bg/50 rounded-lg p-2",children:[i.jsx("span",{className:"text-xs text-gray-500 block",children:"Entry"}),i.jsxs("span",{className:"font-mono text-sm text-white",children:["$",x.entry]})]}),i.jsxs("div",{className:"bg-quant-bg/50 rounded-lg p-2",children:[i.jsx("span",{className:"text-xs text-accent-green block",children:"TP"}),i.jsxs("span",{className:"font-mono text-sm text-accent-green",children:["$",x.takeProfit]})]}),i.jsxs("div",{className:"bg-quant-bg/50 rounded-lg p-2",children:[i.jsx("span",{className:"text-xs text-accent-red block",children:"SL"}),i.jsxs("span",{className:"font-mono text-sm text-accent-red",children:["$",x.stopLoss]})]})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ya,{size:12,className:"text-accent-cyan"}),i.jsxs("span",{className:`font-mono text-sm font-bold ${parseFloat(x.riskRewardRatio)>=2?"text-accent-green":"text-accent-yellow"}`,children:["1:",x.riskRewardRatio]})]}),i.jsxs("span",{className:`font-mono font-bold text-sm ${x.ipe>=80?"text-accent-green":x.ipe>=70?"text-accent-yellow":"text-accent-orange"}`,children:["IPE ",x.ipe,"%"]})]})})]}),i.jsxs("button",{onClick:R=>{R.stopPropagation(),g(x.id)},className:"w-full px-4 py-2 border-t border-quant-border flex items-center justify-center gap-2 text-xs text-gray-400 hover:text-accent-cyan hover:bg-quant-bg/30 transition-colors",children:[i.jsx(Q0,{size:12}),w?"Hide details":"Why this trade?",w?i.jsx(Cs,{size:14}):i.jsx(Bn,{size:14})]}),i.jsx(Qe,{children:w&&i.jsx($.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:i.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h4",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center gap-1",children:[i.jsx(Yn,{size:10})," Decision Breakdown"]}),i.jsxs("div",{className:"p-2 bg-quant-bg/50 rounded-lg",children:[i.jsxs("span",{className:"text-[10px] text-accent-cyan uppercase tracking-wider block mb-1",children:["Why ",x.asset,"?"]}),i.jsx("p",{className:"text-xs text-gray-300",children:((N=x.reasoning)==null?void 0:N.whyAsset)||"Selected based on strategy criteria"})]}),i.jsxs("div",{className:"p-2 bg-quant-bg/50 rounded-lg",children:[i.jsxs("span",{className:"text-[10px] text-accent-cyan uppercase tracking-wider block mb-1",children:["Why ",x.strategy,"?"]}),i.jsx("p",{className:"text-xs text-gray-300",children:((T=x.reasoning)==null?void 0:T.whyDirection)||`${x.strategy} signal from analysis`})]}),i.jsxs("div",{className:"p-2 bg-quant-bg/50 rounded-lg",children:[i.jsxs("span",{className:"text-[10px] text-accent-cyan uppercase tracking-wider block mb-1",children:["Why Entry $",x.entry,"?"]}),i.jsx("p",{className:"text-xs text-gray-300",children:((E=x.reasoning)==null?void 0:E.whyEntry)||"Based on current price analysis"})]}),i.jsxs("div",{className:"p-2 bg-quant-bg/50 rounded-lg",children:[i.jsx("span",{className:"text-[10px] text-accent-cyan uppercase tracking-wider block mb-1",children:"Why TP/SL Levels?"}),i.jsx("p",{className:"text-xs text-gray-300",children:((S=x.reasoning)==null?void 0:S.whyLevels)||`Calculated for ${x.riskRewardRatio}:1 R:R`})]})]}),x.criteriaMatched&&x.criteriaMatched.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-2 flex items-center gap-1",children:[i.jsx(fr,{size:10})," Strategy Criteria Check"]}),i.jsx("div",{className:"space-y-1",children:x.criteriaMatched.map((R,_)=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-quant-bg/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[R.passed?i.jsx(fr,{size:12,className:"text-accent-green"}):i.jsx(ro,{size:12,className:"text-accent-red"}),i.jsx("span",{className:"text-xs text-gray-300",children:R.criterion})]}),i.jsx("span",{className:`text-xs font-mono ${R.passed?"text-accent-green":"text-accent-red"}`,children:R.value})]},_))})]}),x.confidenceFactors&&x.confidenceFactors.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-2 flex items-center gap-1",children:[i.jsx(ya,{size:10})," IPE ",x.ipe,"% Breakdown"]}),i.jsxs("div",{className:"space-y-2",children:[x.confidenceFactors.map((R,_)=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-gray-400",children:R.factor}),i.jsxs("span",{className:"text-gray-300 font-mono",children:[R.weight,"%  ",R.score," = ",i.jsxs("span",{className:"text-accent-cyan",children:["+",(R.contribution||R.weight*R.score/100).toFixed(1)]})]})]}),i.jsx("div",{className:"h-1.5 bg-quant-bg rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-accent-cyan to-accent-purple rounded-full transition-all",style:{width:`${R.score}%`}})})]},_)),i.jsxs("div",{className:"pt-2 border-t border-quant-border flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-gray-400",children:"Total IPE Score"}),i.jsxs("span",{className:"font-mono font-bold text-accent-cyan",children:[x.ipe,"%"]})]})]})]})]})})})]},x.id)})}),i.jsxs("div",{className:"shrink-0 p-4 border-t border-quant-border bg-quant-card space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-gray-400",children:[d," of ",s.length," trades selected"]}),d>0&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-accent-green flex items-center gap-1",children:[i.jsx(ya,{size:12}),"R:R 1:",(s.filter(x=>x.selected).reduce((x,m)=>x+parseFloat(m.riskRewardRatio||0),0)/d).toFixed(1)]}),i.jsxs("span",{className:"text-accent-cyan",children:["IPE: ",Math.round(s.filter(x=>x.selected).reduce((x,m)=>x+m.ipe,0)/d),"%"]})]})]}),i.jsxs($.button,{onClick:v,disabled:d===0,whileTap:{scale:.98},className:"w-full py-4 rounded-xl bg-gradient-to-r from-accent-cyan to-electric-600 text-quant-bg font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:[i.jsx(Yt,{size:24,status:"incubating"}),"Start Incubation (",d," trades)"]})]})]})})}const hT=[{id:"target",label:"Target",desc:"Until TP/SL",icon:""},{id:"scalping",label:"Scalp",desc:"15m-1h",icon:""},{id:"intraday",label:"Intraday",desc:"4-24h",icon:""},{id:"swing",label:"Swing",desc:"2-7d",icon:""}],vc=[{id:"anthropic",label:"Claude",icon:""},{id:"google",label:"Gemini",icon:""},{id:"openai",label:"GPT-4",icon:""},{id:"xai",label:"Grok",icon:""}],fT=[{pct:5,label:"5%"},{pct:10,label:"10%"},{pct:25,label:"25%"},{pct:50,label:"50%"},{pct:100,label:"2x"}],pT=[{pct:2,label:"2%"},{pct:5,label:"5%"},{pct:10,label:"10%"},{pct:15,label:"15%"},{pct:25,label:"25%"}],mT=(e,t)=>{const r=e/t/3.5;let a="low",o="text-accent-green";t>=20?(a="extreme",o="text-accent-red"):t>=10?(a="high",o="text-accent-orange"):t>=5&&(a="medium",o="text-accent-yellow");let l="";r<.04?l=`~${Math.round(r*24*60)}min`:r<1?l=`~${Math.round(r*24)}h`:r<7?l=`~${r.toFixed(1)}d`:l=`~${Math.round(r/7)}w`;const c=(100/t).toFixed(1);return{timeStr:l,risk:a,riskColor:o,liquidationMove:c,estimatedDays:r}},bc=[{text:"Warming up the incubator...",icon:""},{text:"Analyzing market DNA...",icon:""},{text:"Consulting the trading oracle...",icon:""},{text:"Hatching brilliant ideas...",icon:""},{text:"Scanning for golden opportunities...",icon:""},{text:"Cracking the market code...",icon:""},{text:"Feeding the AI neurons...",icon:""},{text:"Calibrating profit sensors...",icon:""},{text:"Preparing your nest egg...",icon:""},{text:"Almost ready to hatch...",icon:""}];function gT(){const{setNewPromptModalOpen:e,generateTrades:t,prompts:n,settings:s,isGeneratingTrades:r}=W(),[a,o]=k.useState("strategy"),[l,c]=k.useState("library"),[u,d]=k.useState(null),[h,f]=k.useState(""),[p,g]=k.useState(""),[v,b]=k.useState("target"),[x,m]=k.useState(1e3),[y,w]=k.useState(5),[N,T]=k.useState(10),[E,S]=k.useState(5),[R,_]=k.useState(80),[I,L]=k.useState(3),[M,z]=k.useState(0),[H,G]=k.useState(null);k.useEffect(()=>{if(r){const C=setInterval(()=>{z(Y=>(Y+1)%bc.length)},2e3);return()=>clearInterval(C)}else z(0)},[r]);const J=k.useMemo(()=>vc.filter(C=>{var le;const Y=(le=s==null?void 0:s.apiKeys)==null?void 0:le[C.id];return Y&&Y.length>0}),[s==null?void 0:s.apiKeys]),[P,F]=k.useState(()=>{var Y;if((Y=s==null?void 0:s.apiKeys)!=null&&Y[s==null?void 0:s.aiProvider])return s.aiProvider;const C=vc.find(le=>{var re;return(re=s==null?void 0:s.apiKeys)==null?void 0:re[le.id]});return(C==null?void 0:C.id)||"google"}),K=J.length>0,U=k.useMemo(()=>[...n],[n]),Z=k.useMemo(()=>l==="library"&&u?n.find(C=>C.id===u):l==="manual"&&h.trim()?{name:h.trim(),content:p.trim()||h.trim()}:null,[l,u,h,p,n]),Ie=k.useMemo(()=>v==="target"?mT(N,y):null,[N,y,v]),oe=k.useMemo(()=>{if(v==="target"){const C=x*(N/100),Y=x*(E/100);return{estimatedGain:C,estimatedLoss:Y}}return null},[x,N,E,v]),Oe=Z!==null,ke=K&&Z!==null,ft=C=>{d(C.id)},ss=()=>{Oe&&o("config")},rn=async()=>{if(!ke)return;const C={id:Z.id||`prompt-${Date.now()}`,name:Z.name,content:Z.content,executionTime:v,capital:x,leverage:y,aiModel:P,minIpe:R,numResults:I,targetPct:v==="target"?N:null,lossLimitPct:v==="target"?E:null};G(C),await t(C),o("selection")},j=()=>{a==="config"&&o("strategy")},O=()=>{e(!1)};return a==="selection"&&H?i.jsx(dT,{prompt:H,onClose:()=>o("config"),onComplete:O}):i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm",onClick:O,children:i.jsxs($.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-lg bg-quant-card rounded-t-3xl max-h-[90vh] flex flex-col",onClick:C=>C.stopPropagation(),children:[i.jsxs("div",{className:"shrink-0 px-4 py-3 flex items-center justify-between border-b border-quant-border",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[a==="config"&&i.jsx("button",{onClick:j,className:"p-2.5 -ml-1 rounded-full hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(sh,{size:20,className:"text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-bold text-white",children:a==="strategy"?"Select Strategy":"Configure Execution"}),i.jsx("p",{className:"text-[10px] text-gray-500",children:a==="strategy"?"Step 1 of 2  Choose what to analyze":"Step 2 of 2  Set execution parameters"})]})]}),i.jsx("button",{onClick:O,className:"p-3 -mr-1 rounded-full hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(Os,{size:22,className:"text-gray-400"})})]}),i.jsxs("div",{className:"shrink-0 px-4 py-2 flex gap-2",children:[i.jsx("div",{className:"flex-1 h-1 rounded-full transition-colors bg-accent-cyan"}),i.jsx("div",{className:`flex-1 h-1 rounded-full transition-colors ${a==="config"?"bg-accent-cyan":"bg-quant-surface"}`})]}),i.jsx("div",{className:"flex-1 overflow-y-auto hide-scrollbar",children:i.jsxs(Qe,{mode:"wait",children:[a==="strategy"&&i.jsxs($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"px-4 py-3 space-y-4",children:[i.jsxs("div",{className:"flex bg-quant-surface rounded-xl p-1",children:[i.jsxs("button",{onClick:()=>c("library"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg transition-all ${l==="library"?"bg-quant-card text-accent-cyan shadow-lg":"text-gray-500"}`,children:[i.jsx(CS,{size:16}),i.jsxs("span",{className:"text-sm font-medium",children:["Library (",U.length,")"]})]}),i.jsxs("button",{onClick:()=>c("manual"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg transition-all ${l==="manual"?"bg-quant-card text-accent-cyan shadow-lg":"text-gray-500"}`,children:[i.jsx(X0,{size:16}),i.jsx("span",{className:"text-sm font-medium",children:"Write New"})]})]}),l==="library"&&i.jsx("div",{className:"space-y-2",children:U.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-2xl bg-quant-surface flex items-center justify-center",children:i.jsx(Jn,{size:28,className:"text-gray-600"})}),i.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"No saved strategies"}),i.jsx("p",{className:"text-xs text-gray-600",children:"Write a new one or create strategies in Settings"})]}):i.jsx("div",{className:"space-y-2",children:U.map(C=>{const Y=u===C.id;return i.jsx("button",{onClick:()=>ft(C),className:`w-full p-4 rounded-xl border text-left transition-all ${Y?"border-accent-cyan bg-accent-cyan/5 shadow-lg shadow-accent-cyan/10":"border-quant-border bg-quant-surface hover:border-gray-600"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"flex items-center gap-2 mb-1",children:i.jsx("span",{className:`font-semibold text-sm ${Y?"text-white":"text-gray-300"}`,children:C.name})}),C.content&&i.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:C.content})]}),i.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 transition-all ${Y?"border-accent-cyan bg-accent-cyan":"border-gray-600"}`,children:Y&&i.jsx(Ge,{size:12,className:"text-quant-bg"})})]})},C.id)})})}),l==="manual"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 block",children:"Strategy Name"}),i.jsx("input",{type:"text",value:h,onChange:C=>f(C.target.value),placeholder:"e.g., RSI Oversold Bounce",className:"w-full bg-quant-surface border border-quant-border rounded-xl px-3 py-3 text-sm text-white placeholder-gray-500 focus:border-accent-cyan focus:outline-none",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 block",children:"Strategy Description"}),i.jsx("textarea",{value:p,onChange:C=>g(C.target.value),placeholder:`Describe your trading strategy...

Example: Find cryptocurrencies with RSI below 30 on the 4H timeframe, near historical support levels, with increasing volume.`,rows:6,className:"w-full bg-quant-surface border border-quant-border rounded-xl px-3 py-3 text-sm text-white placeholder-gray-500 resize-none focus:border-accent-cyan focus:outline-none"})]})]}),Z&&i.jsxs("div",{className:"p-3 bg-accent-cyan/5 border border-accent-cyan/20 rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-2 text-accent-cyan text-xs mb-1",children:[i.jsx(Qn,{size:12}),i.jsx("span",{className:"uppercase tracking-wider font-medium",children:"Selected Strategy"})]}),i.jsx("p",{className:"text-sm text-white font-medium",children:Z.name})]})]},"strategy"),a==="config"&&i.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"px-4 py-3 space-y-4",children:[i.jsxs("div",{className:"p-3 bg-quant-surface rounded-xl border border-quant-border",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-[10px] uppercase tracking-wider mb-1",children:[i.jsx(Jn,{size:10}),"Strategy"]}),i.jsx("p",{className:"text-sm text-white font-medium",children:Z==null?void 0:Z.name}),(Z==null?void 0:Z.content)&&i.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:Z.content})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-2 flex items-center gap-1",children:[i.jsx($r,{size:10})," Execution Type"]}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:hT.map(C=>i.jsxs("button",{onClick:()=>b(C.id),className:`py-3 px-2 rounded-xl border text-center transition-all ${v===C.id?"border-accent-cyan bg-accent-cyan/10 text-white":"border-quant-border bg-quant-surface text-gray-500 hover:border-gray-600"}`,children:[i.jsx("span",{className:"block text-lg mb-1",children:C.icon}),i.jsx("span",{className:"block text-xs font-medium",children:C.label}),i.jsx("span",{className:"text-[9px] opacity-60",children:C.desc})]},C.id))})]}),v==="target"&&i.jsxs("div",{className:"bg-quant-surface rounded-xl p-3 border border-quant-border space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center gap-1",children:[i.jsx(Yn,{size:10})," Take Profit"]}),i.jsxs("span",{className:"text-accent-green font-mono font-bold text-sm",children:["+",N,"%"]})]}),i.jsx("div",{className:"flex gap-1.5 mb-2",children:fT.map(C=>i.jsx("button",{onClick:()=>T(C.pct),className:`flex-1 py-2 rounded-lg text-xs font-mono transition-all ${N===C.pct?"bg-accent-green/20 text-accent-green border border-accent-green/30":"bg-quant-card text-gray-400 border border-transparent hover:border-gray-700"}`,children:C.label},C.pct))}),i.jsx("input",{type:"range",min:1,max:200,value:N,onChange:C=>T(Number(C.target.value)),className:"w-full h-1"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center gap-1",children:[i.jsx(qa,{size:10})," Loss Limit"]}),i.jsxs("span",{className:"text-accent-red font-mono font-bold text-sm",children:["-",E,"%"]})]}),i.jsx("div",{className:"flex gap-1.5 mb-2",children:pT.map(C=>i.jsx("button",{onClick:()=>S(C.pct),className:`flex-1 py-2 rounded-lg text-xs font-mono transition-all ${E===C.pct?"bg-accent-red/20 text-accent-red border border-accent-red/30":"bg-quant-card text-gray-400 border border-transparent hover:border-gray-700"}`,children:C.label},C.pct))}),i.jsx("input",{type:"range",min:1,max:50,value:E,onChange:C=>S(Number(C.target.value)),className:"w-full h-1"})]}),oe&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-accent-green/10 border border-accent-green/20 rounded-lg p-3 text-center",children:[i.jsx("span",{className:"text-[9px] text-gray-400 block mb-1",children:"Potential Gain"}),i.jsxs("span",{className:"text-lg font-mono font-bold text-accent-green",children:["+$",oe.estimatedGain.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:"text-[10px] text-gray-500 block mt-0.5",children:["if TP hits at +",N,"%"]})]}),i.jsxs("div",{className:"bg-accent-red/10 border border-accent-red/20 rounded-lg p-3 text-center",children:[i.jsx("span",{className:"text-[9px] text-gray-400 block mb-1",children:"Max Loss"}),i.jsxs("span",{className:"text-lg font-mono font-bold text-accent-red",children:["-$",oe.estimatedLoss.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:"text-[10px] text-gray-500 block mt-0.5",children:["if SL hits at -",E,"%"]})]})]}),oe&&i.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 bg-quant-card rounded-lg",children:[i.jsx("span",{className:"text-[10px] text-gray-500",children:"Risk/Reward Ratio"}),i.jsxs("span",{className:"text-sm font-mono font-bold text-white",children:["1:",(N/E).toFixed(1)]}),N/E>=2&&i.jsx("span",{className:"text-[9px] text-accent-green bg-accent-green/10 px-1.5 py-0.5 rounded",children:"Good"}),N/E<1&&i.jsx("span",{className:"text-[9px] text-accent-red bg-accent-red/10 px-1.5 py-0.5 rounded",children:"Poor"})]}),Ie&&Ie.risk!=="low"&&i.jsxs("div",{className:`flex items-center gap-1.5 p-2 rounded-lg text-[10px] ${Ie.risk==="extreme"?"bg-accent-red/10 text-accent-red":"bg-accent-orange/10 text-accent-orange"}`,children:[i.jsx(qa,{size:12}),"Higher leverage = faster target but increased liquidation risk"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 flex items-center gap-1",children:[i.jsx(ga,{size:10})," Capital"]}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),i.jsx("input",{type:"number",value:x,onChange:C=>m(Number(C.target.value)),className:"w-full bg-quant-surface border border-quant-border rounded-xl pl-7 pr-3 py-3 text-sm text-white font-mono focus:border-accent-cyan focus:outline-none"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 flex items-center gap-1",children:[i.jsx(rh,{size:10})," Leverage"]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:y,onChange:C=>w(Math.max(1,Math.min(125,Number(C.target.value)))),min:1,max:125,className:"w-full bg-quant-surface border border-quant-border rounded-xl px-3 py-3 text-sm text-white font-mono focus:border-accent-cyan focus:outline-none"}),i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"x"})]})]})]}),!K&&i.jsx("div",{className:"p-3 bg-accent-red/10 border border-accent-red/30 rounded-xl",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(We,{size:16,className:"text-accent-red shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-accent-red",children:"No AI Provider Configured"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Go to Settings  AI Provider to add your API key"})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 flex items-center gap-1",children:[i.jsx(wr,{size:10})," AI Model"]}),i.jsx("div",{className:"flex gap-1",children:vc.map(C=>{var re,he;const Y=((he=(re=s==null?void 0:s.apiKeys)==null?void 0:re[C.id])==null?void 0:he.length)>0,le=P===C.id;return i.jsxs("button",{onClick:()=>Y&&F(C.id),disabled:!Y,className:`flex-1 py-2.5 rounded-xl border text-center transition-all relative ${le&&Y?"border-accent-cyan bg-accent-cyan/10":Y?"border-quant-border bg-quant-surface hover:border-gray-600":"border-quant-border bg-quant-surface opacity-30 cursor-not-allowed"}`,title:Y?C.label:`${C.label} - No API key`,children:[i.jsx("span",{className:"text-lg",children:C.icon}),Y&&i.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-accent-green"})]},C.id)})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1.5 flex items-center gap-1",children:[i.jsx(FS,{size:10})," Results"]}),i.jsx("div",{className:"flex gap-1",children:[1,3,5].map(C=>i.jsx("button",{onClick:()=>L(C),className:`flex-1 py-2.5 rounded-xl border font-mono text-sm transition-all ${I===C?"border-accent-cyan bg-accent-cyan/10 text-white":"border-quant-border bg-quant-surface text-gray-500 hover:border-gray-600"}`,children:C},C))})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[i.jsxs("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center gap-1",children:[i.jsx(Yn,{size:10})," Min IPE (Success Probability)"]}),i.jsxs("span",{className:"text-accent-cyan font-mono text-sm font-bold",children:[R,"%"]})]}),i.jsx("input",{type:"range",min:50,max:95,value:R,onChange:C=>_(Number(C.target.value)),className:"w-full h-1.5"}),i.jsxs("div",{className:"flex justify-between mt-1",children:[i.jsx("span",{className:"text-[9px] text-gray-600",children:"More results"}),i.jsx("span",{className:"text-[9px] text-gray-600",children:"Higher quality"})]})]})]},"config")]})}),i.jsx("div",{className:"shrink-0 p-4 border-t border-quant-border",children:a==="strategy"?i.jsxs($.button,{onClick:ss,disabled:!Oe,whileTap:{scale:.98},className:"w-full py-4 rounded-xl bg-gradient-to-r from-accent-cyan to-electric-600 text-quant-bg font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{boxShadow:Oe?"0 0 20px rgba(0, 240, 255, 0.25)":"none"},children:["Continue to Configuration",i.jsx(W0,{size:18})]}):i.jsx($.button,{onClick:rn,disabled:!ke||r,whileTap:{scale:.98},className:`w-full py-4 rounded-xl font-bold disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all duration-300 ${r?"bg-gradient-to-r from-accent-purple via-accent-cyan to-accent-purple bg-[length:200%_100%] animate-gradient text-white":"bg-gradient-to-r from-accent-cyan to-electric-600 text-quant-bg disabled:opacity-50"}`,style:{boxShadow:r?"0 0 30px rgba(139, 92, 246, 0.4), 0 0 60px rgba(0, 240, 255, 0.2)":ke?"0 0 20px rgba(0, 240, 255, 0.25)":"none"},children:r?i.jsxs($.div,{className:"flex items-center gap-2",children:[i.jsx($.span,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"text-lg",children:bc[M].icon}),i.jsx($.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-sm",children:bc[M].text},M)]}):i.jsxs(i.Fragment,{children:[i.jsx(Qn,{size:18}),"Generate Trades"]})})})]})})}function xT(){const e=W(s=>s.selectedSignal),t=W(s=>s.closeSignalDetail);if(!e)return null;const n=e.strategy==="LONG";return i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm",onClick:t,children:i.jsxs($.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-lg bg-quant-card rounded-t-3xl max-h-[85vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[i.jsx("div",{className:"sticky top-0 bg-quant-card border-b border-quant-border px-4 py-4 z-10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${n?"bg-accent-green/20":"bg-accent-red/20"}`,children:n?i.jsx(Pt,{size:20,className:"text-accent-green"}):i.jsx(Xn,{size:20,className:"text-accent-red"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${n?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:e.strategy}),i.jsx("span",{className:"font-bold text-white",children:e.asset})]}),i.jsx("span",{className:"text-xs text-gray-500",children:e.promptName})]})]}),i.jsx("button",{onClick:t,className:"p-3 -mr-1 rounded-full hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(Os,{size:22,className:"text-gray-400"})})]})}),i.jsxs("div",{className:"overflow-y-auto hide-scrollbar p-4 pb-8 space-y-4",children:[i.jsxs("div",{className:"bg-quant-surface rounded-xl p-4 border border-quant-border",children:[i.jsxs("h3",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[i.jsx(Yn,{size:14}),"Price Levels"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Entry"}),i.jsxs("span",{className:"font-mono text-white",children:["$",Number(e.entry).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-accent-green flex items-center gap-2",children:[i.jsx(Pt,{size:14}),"Take Profit"]}),i.jsxs("span",{className:"font-mono text-accent-green",children:["$",Number(e.takeProfit).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-accent-red flex items-center gap-2",children:[i.jsx(ya,{size:14}),"Stop Loss"]}),i.jsxs("span",{className:"font-mono text-accent-red",children:["$",Number(e.stopLoss).toLocaleString()]})]})]}),i.jsxs("div",{className:"mt-4 relative h-2 bg-quant-border rounded-full overflow-hidden",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 w-1/3 bg-accent-red/50"}),i.jsx("div",{className:"absolute inset-y-0 left-1/3 w-1/3 bg-accent-cyan/50"}),i.jsx("div",{className:"absolute inset-y-0 right-0 w-1/3 bg-accent-green/50"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full border-2 border-quant-bg"})]}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsx("span",{children:"SL"}),i.jsx("span",{children:"Entry"}),i.jsx("span",{children:"TP"})]})]}),i.jsxs("div",{className:"bg-quant-surface rounded-xl p-4 border border-quant-border",children:[i.jsx("h3",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3",children:"Success Probability (IPE)"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative w-20 h-20",children:[i.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#1f2937",strokeWidth:"3"}),i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#00f0ff",strokeWidth:"3",strokeDasharray:`${e.ipe}, 100`,strokeLinecap:"round"})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("span",{className:"text-xl font-bold text-accent-cyan",children:[e.ipe,"%"]})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm text-gray-400",children:e.ipe>=80?i.jsx("span",{className:"text-accent-green",children:"High probability setup"}):e.ipe>=70?i.jsx("span",{className:"text-accent-yellow",children:"Moderate probability"}):i.jsx("span",{className:"text-accent-orange",children:"Lower probability"})}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Based on historical patterns and current market conditions"})]})]})]}),i.jsxs("div",{className:"bg-quant-surface rounded-xl p-4 border border-quant-border",children:[i.jsxs("h3",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[i.jsx(Jn,{size:14}),"Analysis"]}),i.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:e.explanation})]}),i.jsxs("div",{className:"bg-quant-surface rounded-xl p-4 border border-quant-border",children:[i.jsxs("h3",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[i.jsx(Ha,{size:14}),"Key Insights"]}),i.jsx("ul",{className:"space-y-2",children:e.insights.map((s,r)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[i.jsx("span",{className:"text-accent-cyan mt-1",children:""}),s]},r))})]}),i.jsxs("div",{className:"text-center text-xs text-gray-500",children:["Signal generated: ",new Date(e.createdAt).toLocaleString()]})]})]})})}const yT=[{id:"edit",label:"Edit / Add Prompt",description:"Create a new strategy or edit existing ones",icon:X0,color:"accent-cyan",bgColor:"bg-accent-cyan/10",borderColor:"border-accent-cyan/30"},{id:"execute",label:"Execute Prompt",description:"Run a strategy and generate trades",icon:qo,color:"accent-green",bgColor:"bg-accent-green/10",borderColor:"border-accent-green/30"},{id:"healthcheck",label:"Create Health Check",description:"Set up batch preset monitoring",icon:Fo,color:"accent-purple",bgColor:"bg-accent-purple/10",borderColor:"border-accent-purple/30"}];function vT(){const e=W(a=>a.setPromptActionModalOpen),t=W(a=>a.setNewPromptModalOpen),n=W(a=>a.setActiveTab),s=()=>{e(!1)},r=a=>{switch(e(!1),a){case"edit":n("settings"),W.setState({settingsActiveTab:1});break;case"execute":W.setState({promptActionMode:"execute"}),t(!0);break;case"healthcheck":W.setState({promptsActiveTab:"healthchecks",showHealthCheckModal:!0});break}};return i.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm",onClick:s,children:i.jsxs($.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-lg bg-quant-card rounded-t-3xl",onClick:a=>a.stopPropagation(),children:[i.jsxs("div",{className:"px-4 py-4 flex items-center justify-between border-b border-quant-border",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"What would you like to do?"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Select an action to get started"})]}),i.jsx("button",{onClick:s,className:"p-3 -mr-1 rounded-full hover:bg-quant-surface transition-colors active:scale-90",children:i.jsx(Os,{size:22,className:"text-gray-400"})})]}),i.jsx("div",{className:"p-4 space-y-3",children:yT.map((a,o)=>{const l=a.icon;return i.jsx($.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},onClick:()=>r(a.id),className:`w-full p-4 rounded-2xl border ${a.bgColor} ${a.borderColor} text-left transition-all hover:scale-[1.02] active:scale-[0.98]`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl ${a.bgColor} flex items-center justify-center`,children:i.jsx(l,{size:24,className:`text-${a.color}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-white font-semibold mb-0.5",children:a.label}),i.jsx("p",{className:"text-xs text-gray-400",children:a.description})]})]})},a.id)})}),i.jsx("div",{className:"h-6 safe-area-bottom"})]})})}function bT({onClick:e}){return i.jsx($.button,{onClick:e,className:"fixed right-4 bottom-24 z-40 w-14 h-14 rounded-full bg-gradient-to-br from-accent-cyan to-electric-600 flex items-center justify-center shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},style:{boxShadow:"0 0 30px rgba(0, 240, 255, 0.4)"},children:i.jsx(Z0,{size:28,className:"text-quant-bg",strokeWidth:2.5})})}const Vi=[{id:"welcome",title:"Welcome to PromptHatcher",subtitle:"Your trading strategy incubator"},{id:"ai-provider",title:"AI Provider Setup",subtitle:"Connect your AI model"},{id:"supabase",title:"Database Setup",subtitle:"Connect to Supabase"}],um=[{id:"google",name:"Google Gemini",icon:"",placeholder:"AIza...",helpUrl:"https://makersuite.google.com/app/apikey"},{id:"anthropic",name:"Claude (Anthropic)",icon:"",placeholder:"sk-ant-...",helpUrl:"https://console.anthropic.com/settings/keys"},{id:"openai",name:"OpenAI",icon:"",placeholder:"sk-...",helpUrl:"https://platform.openai.com/api-keys"},{id:"xai",name:"xAI Grok",icon:"",placeholder:"xai-...",helpUrl:"https://console.x.ai"}];function wT(){var R,_,I;const{settings:e,updateSettings:t,updateApiKey:n,updateSupabase:s,completeOnboarding:r}=W(),[a,o]=k.useState(0),[l,c]=k.useState(e.aiProvider||"google"),[u,d]=k.useState(((R=e.apiKeys)==null?void 0:R[e.aiProvider])||""),[h,f]=k.useState(((_=e.supabase)==null?void 0:_.url)||""),[p,g]=k.useState(((I=e.supabase)==null?void 0:I.anonKey)||""),[v,b]=k.useState(!1),[x,m]=k.useState(null),y=Vi[a],w=()=>{if(a===1&&(t({aiProvider:l}),n(l,u)),a===2){s({url:h,anonKey:p}),r();return}o(L=>Math.min(L+1,Vi.length-1)),m(null)},N=()=>{o(L=>Math.max(L-1,0)),m(null)},T=async L=>{if(b(!0),m(null),await new Promise(M=>setTimeout(M,1500)),L==="ai"){const M=u.length>10;m(M?"success":"error")}else{const M=h.includes("supabase")&&p.length>10;m(M?"success":"error")}b(!1)},E=()=>a===0?!0:a===1?u.length>0:a===2?h.length>0&&p.length>0:!1,S=um.find(L=>L.id===l);return i.jsxs("div",{className:"min-h-screen bg-quant-bg flex flex-col",children:[i.jsx("div",{className:"safe-area-top px-4 pt-4",children:i.jsx("div",{className:"flex gap-2",children:Vi.map((L,M)=>i.jsx("div",{className:`h-1 flex-1 rounded-full transition-all duration-300 ${M<=a?"bg-accent-cyan":"bg-quant-border"}`},L.id))})}),i.jsx("div",{className:"flex-1 flex flex-col px-6 py-8",children:i.jsx(Qe,{mode:"wait",children:i.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[a===0&&i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[i.jsx($.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-32 h-32 rounded-full bg-gradient-to-br from-accent-cyan/20 to-electric-600/20 flex items-center justify-center mb-8",children:i.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-accent-cyan to-electric-600 flex items-center justify-center",children:i.jsx(Qn,{size:48,className:"text-quant-bg"})})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-3",children:y.title}),i.jsx("p",{className:"text-gray-400 text-lg mb-8",children:y.subtitle}),i.jsxs("div",{className:"space-y-4 text-left w-full max-w-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 p-4 bg-quant-card rounded-xl border border-quant-border",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-cyan/20",children:i.jsx(Qn,{size:20,className:"text-accent-cyan"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:"Incubate Prompts"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Test trading strategies with AI"})]})]}),i.jsxs("div",{className:"flex items-start gap-3 p-4 bg-quant-card rounded-xl border border-quant-border",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-green/20",children:i.jsx(Ge,{size:20,className:"text-accent-green"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:"Track Performance"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Monitor win rates and PnL"})]})]}),i.jsxs("div",{className:"flex items-start gap-3 p-4 bg-quant-card rounded-xl border border-quant-border",children:[i.jsx("div",{className:"p-2 rounded-lg bg-accent-orange/20",children:i.jsx(Mo,{size:20,className:"text-accent-orange"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:"Cloud Sync"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Your data synced with Supabase"})]})]})]})]}),a===1&&i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:y.title}),i.jsx("p",{className:"text-gray-400",children:"Select your AI provider and enter your API key"})]}),i.jsx("div",{className:"space-y-3 mb-6",children:um.map(L=>i.jsxs("button",{onClick:()=>{var M;c(L.id),d(((M=e.apiKeys)==null?void 0:M[L.id])||""),m(null)},className:`w-full p-4 rounded-xl border-2 flex items-center gap-4 transition-all ${l===L.id?"border-accent-cyan bg-accent-cyan/10":"border-quant-border bg-quant-card"}`,children:[i.jsx("span",{className:"text-2xl",children:L.icon}),i.jsx("span",{className:`font-medium ${l===L.id?"text-white":"text-gray-400"}`,children:L.name}),l===L.id&&i.jsx("div",{className:"ml-auto w-3 h-3 rounded-full bg-accent-cyan"})]},L.id))}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"text-sm text-gray-400 flex items-center gap-2",children:[i.jsx(Ep,{size:14}),"API Key"]}),i.jsxs("a",{href:S==null?void 0:S.helpUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-accent-cyan flex items-center gap-1",children:["Get API Key ",i.jsx(zo,{size:12})]})]}),i.jsx("input",{type:"password",value:u,onChange:L=>{d(L.target.value),m(null)},placeholder:S==null?void 0:S.placeholder,className:"w-full bg-quant-surface border border-quant-border rounded-xl px-4 py-3 text-white font-mono text-sm placeholder-gray-600 focus:border-accent-cyan transition-colors"}),i.jsx("button",{onClick:()=>T("ai"),disabled:!u||v,className:"w-full py-3 rounded-xl border border-quant-border bg-quant-surface text-gray-400 hover:text-white hover:border-accent-cyan/50 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:v?i.jsxs(i.Fragment,{children:[i.jsx(Uo,{size:16,className:"animate-spin"}),"Testing..."]}):"Test Connection"}),x&&i.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-xl flex items-center gap-2 ${x==="success"?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:x==="success"?i.jsxs(i.Fragment,{children:[i.jsx(Ge,{size:16}),"Connection successful!"]}):i.jsxs(i.Fragment,{children:[i.jsx(We,{size:16}),"Connection failed. Check your API key."]})})]})]}),a===2&&i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:y.title}),i.jsx("p",{className:"text-gray-400",children:"Connect to Supabase for cloud storage"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"text-sm text-gray-400 flex items-center gap-2",children:[i.jsx(Mo,{size:14}),"Project URL"]}),i.jsxs("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-accent-cyan flex items-center gap-1",children:["Open Supabase ",i.jsx(zo,{size:12})]})]}),i.jsx("input",{type:"url",value:h,onChange:L=>{f(L.target.value),m(null)},placeholder:"https://xxxxx.supabase.co",className:"w-full bg-quant-surface border border-quant-border rounded-xl px-4 py-3 text-white font-mono text-sm placeholder-gray-600 focus:border-accent-cyan transition-colors"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm text-gray-400 flex items-center gap-2",children:[i.jsx(Ep,{size:14}),"Anon Key"]}),i.jsx("input",{type:"password",value:p,onChange:L=>{g(L.target.value),m(null)},placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:"w-full bg-quant-surface border border-quant-border rounded-xl px-4 py-3 text-white font-mono text-sm placeholder-gray-600 focus:border-accent-cyan transition-colors"})]}),i.jsx("button",{onClick:()=>T("supabase"),disabled:!h||!p||v,className:"w-full py-3 rounded-xl border border-quant-border bg-quant-surface text-gray-400 hover:text-white hover:border-accent-cyan/50 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:v?i.jsxs(i.Fragment,{children:[i.jsx(Uo,{size:16,className:"animate-spin"}),"Testing..."]}):"Test Connection"}),x&&i.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-xl flex items-center gap-2 ${x==="success"?"bg-accent-green/20 text-accent-green":"bg-accent-red/20 text-accent-red"}`,children:x==="success"?i.jsxs(i.Fragment,{children:[i.jsx(Ge,{size:16}),"Connected to Supabase!"]}):i.jsxs(i.Fragment,{children:[i.jsx(We,{size:16}),"Connection failed. Check your credentials."]})}),i.jsxs("div",{className:"p-4 bg-quant-card rounded-xl border border-quant-border mt-4",children:[i.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Where to find these?"}),i.jsxs("ol",{className:"text-xs text-gray-500 space-y-1 list-decimal list-inside",children:[i.jsx("li",{children:"Go to your Supabase project dashboard"}),i.jsx("li",{children:"Click on Settings  API"}),i.jsx("li",{children:"Copy the Project URL and anon key"})]})]})]})]})]},a)})}),i.jsx("div",{className:"shrink-0 px-6 pb-8 safe-area-bottom",children:i.jsxs("div",{className:"flex gap-3",children:[a>0&&i.jsxs("button",{onClick:N,className:"px-6 py-4 rounded-xl border border-quant-border bg-quant-card text-gray-400 hover:text-white transition-colors flex items-center gap-2",children:[i.jsx(RS,{size:20}),"Back"]}),i.jsx("button",{onClick:w,disabled:!E(),className:"flex-1 py-4 rounded-xl bg-gradient-to-r from-accent-cyan to-electric-600 text-quant-bg font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a===Vi.length-1?"Start Using PromptHatcher":i.jsxs(i.Fragment,{children:["Continue",i.jsx(G0,{size:20})]})})]})})]})}function jT(){const e=W(b=>b.activeTab)||"prompts",t=W(b=>b.isNewPromptModalOpen)||!1,n=W(b=>b.setNewPromptModalOpen),s=W(b=>b.isPromptActionModalOpen)||!1,r=W(b=>b.setPromptActionModalOpen),a=W(b=>b.isSignalDetailOpen)||!1,o=W(b=>b.selectedPromptId),l=W(b=>b.onboardingCompleted)||!1,c=W(b=>b.startPriceRefresh),u=W(b=>b.stopPriceRefresh),d=W(b=>b.isCloudInitialized)||!1,h=W(b=>b.isInitializing)||!1,f=W(b=>b.initializeFromCloud),p=W(b=>b.settings)||{},g=(p==null?void 0:p.supabase)||{};if(k.useEffect(()=>{l&&!d&&!h&&(g.url&&g.anonKey?f():W.setState({isCloudInitialized:!0}))},[l,d,h,g.url,g.anonKey,f]),k.useEffect(()=>{if(l&&d)return c(),()=>{u()}},[l,d,c,u]),!l)return i.jsx(wT,{});if(!d||h)return i.jsx("div",{className:"min-h-screen bg-quant-bg flex flex-col items-center justify-center",children:i.jsxs($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[i.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[i.jsx(Yt,{size:96,status:"incubating"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(Uo,{size:32,className:"text-accent-cyan animate-spin"})})]}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Loading from Cloud"}),i.jsxs("p",{className:"text-sm text-gray-400 flex items-center justify-center gap-2",children:[i.jsx(K0,{size:16}),"Syncing with Supabase..."]})]})});const v=()=>{if(o)return i.jsx(uT,{});switch(e){case"prompts":return i.jsx(lm,{});case"incubator":return i.jsx(YP,{});case"signals":return i.jsx(XP,{});case"settings":return i.jsx(cT,{});default:return i.jsx(lm,{})}};return i.jsxs("div",{className:"min-h-screen bg-quant-bg flex flex-col",children:[i.jsx("main",{id:"main-scroll-container",className:"flex-1 overflow-y-auto hide-scrollbar pb-20 safe-area-top",children:i.jsx(Qe,{mode:"wait",children:v()})}),(e==="prompts"||e==="incubator")&&!o&&i.jsx(bT,{onClick:()=>e==="prompts"?r(!0):n(!0)}),!o&&i.jsx(HP,{}),i.jsxs(Qe,{children:[s&&i.jsx(vT,{}),t&&i.jsx(gT,{}),a&&i.jsx(xT,{})]})]})}wc.createRoot(document.getElementById("root")).render(i.jsx(Ko.StrictMode,{children:i.jsx(jT,{})}));
